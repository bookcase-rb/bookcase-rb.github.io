import{r as M,L as E,R as _e,Q as st,d as be,C as zt,o as Xe,ac as jo,a6 as Uo,a0 as ae,ad as kt,v as g,ae as Et,af as Jt,P as Vo,ag as Ue,a7 as Ot,ah as Ko,ai as pt,w as Be,p as Qt,y as Ye,E as V,_ as H,H as he,K as Ze,J as Re,aj as eo,M as Je,ak as to,a3 as oe,x as Pt,al as qo,D as Ne,T as oo,G as re,Z as Ae,Y as no,am as It,an as ct,ao as Go,ap as Xo,aq as Yo,ar as We,z as X,as as Zo,A as Jo,a1 as Ce,at as $t,au as Qo,F as Rt,av as en,aw as tn,$ as At,ax as on,ay as nn,az as rn,aA as ln,aB as _t,aC as an,aD as sn,t as cn,u as dn,f as un,c as P,b as Ve,B as mt,S as Dt,N as Ie,i as fn,a as hn}from"./index-DhaXtIy0.js";import{N as vn,g as gn}from"./utils-DS8uTo8M.js";import{d as bn}from"./vue-utils-BoE53MNa.js";import{N as pn}from"./InputGroup-4fE8BISv.js";import{c as ro,d as at,e as mn,i as Bt,f as yn,p as xn,N as wn,u as Cn,g as Ft,B as Sn,V as kn,a as Rn}from"./Popover-DJSVc_nM.js";import{h as Ge,a as Fn,c as Tn}from"./create-D3Vn69pI.js";import{a as zn,N as de}from"./FormItem-DWtFSt5g.js";import{a as On}from"./Image-BoZtHotb.js";import{N as Pn}from"./InputNumber-CxNa8_mA.js";function Lt(e){return e&-e}class lo{constructor(t,o){this.l=t,this.min=o;const n=new Array(t+1);for(let l=0;l<t+1;++l)n[l]=0;this.ft=n}add(t,o){if(o===0)return;const{l:n,ft:l}=this;for(t+=1;t<=n;)l[t]+=o,t+=Lt(t)}get(t){return this.sum(t+1)-this.sum(t)}sum(t){if(t===void 0&&(t=this.l),t<=0)return 0;const{ft:o,min:n,l}=this;if(t>l)throw new Error("[FinweckTree.sum]: `i` is larger than length.");let r=t*n;for(;t>0;)r+=o[t],t-=Lt(t);return r}getBound(t){let o=0,n=this.l;for(;n>o;){const l=Math.floor((o+n)/2),r=this.sum(l);if(r>t){n=l;continue}else if(r<t){if(o===l)return this.sum(o+1)<=t?o+1:l;o=l}else return l}return o}}let lt;function In(){return typeof document>"u"?!1:(lt===void 0&&("matchMedia"in window?lt=window.matchMedia("(pointer:coarse)").matches:lt=!1),lt)}let yt;function Ht(){return typeof document>"u"?1:(yt===void 0&&(yt="chrome"in window?window.devicePixelRatio:1),yt)}const io="VVirtualListXScroll";function Bn({columnsRef:e,renderColRef:t,renderItemWithColsRef:o}){const n=M(0),l=M(0),r=E(()=>{const a=e.value;if(a.length===0)return null;const d=new lo(a.length,0);return a.forEach((m,C)=>{d.add(C,m.width)}),d}),h=_e(()=>{const a=r.value;return a!==null?Math.max(a.getBound(l.value)-1,0):0}),i=a=>{const d=r.value;return d!==null?d.sum(a):0},u=_e(()=>{const a=r.value;return a!==null?Math.min(a.getBound(l.value+n.value)+1,e.value.length-1):0});return st(io,{startIndexRef:h,endIndexRef:u,columnsRef:e,renderColRef:t,renderItemWithColsRef:o,getLeft:i}),{listWidthRef:n,scrollLeftRef:l}}const Nt=be({name:"VirtualListRow",props:{index:{type:Number,required:!0},item:{type:Object,required:!0}},setup(){const{startIndexRef:e,endIndexRef:t,columnsRef:o,getLeft:n,renderColRef:l,renderItemWithColsRef:r}=zt(io);return{startIndex:e,endIndex:t,columns:o,renderCol:l,renderItemWithCols:r,getLeft:n}},render(){const{startIndex:e,endIndex:t,columns:o,renderCol:n,renderItemWithCols:l,getLeft:r,item:h}=this;if(l!=null)return l({itemIndex:this.index,startColIndex:e,endColIndex:t,allColumns:o,item:h,getLeft:r});if(n!=null){const i=[];for(let u=e;u<=t;++u){const a=o[u];i.push(n({column:a,left:r(u),item:h}))}return i}return null}}),Mn=at(".v-vl",{maxHeight:"inherit",height:"100%",overflow:"auto",minWidth:"1px"},[at("&:not(.v-vl--show-scrollbar)",{scrollbarWidth:"none"},[at("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",{width:0,height:0,display:"none"})])]),En=be({name:"VirtualList",inheritAttrs:!1,props:{showScrollbar:{type:Boolean,default:!0},columns:{type:Array,default:()=>[]},renderCol:Function,renderItemWithCols:Function,items:{type:Array,default:()=>[]},itemSize:{type:Number,required:!0},itemResizable:Boolean,itemsStyle:[String,Object],visibleItemsTag:{type:[String,Object],default:"div"},visibleItemsProps:Object,ignoreItemResize:Boolean,onScroll:Function,onWheel:Function,onResize:Function,defaultScrollKey:[Number,String],defaultScrollIndex:Number,keyField:{type:String,default:"key"},paddingTop:{type:[Number,String],default:0},paddingBottom:{type:[Number,String],default:0}},setup(e){const t=Jt();Mn.mount({id:"vueuc/virtual-list",head:!0,anchorMetaName:ro,ssr:t}),Xe(()=>{const{defaultScrollIndex:p,defaultScrollKey:T}=e;p!=null?R({index:p}):T!=null&&R({key:T})});let o=!1,n=!1;jo(()=>{if(o=!1,!n){n=!0;return}R({top:v.value,left:h.value})}),Uo(()=>{o=!0,n||(n=!0)});const l=_e(()=>{if(e.renderCol==null&&e.renderItemWithCols==null||e.columns.length===0)return;let p=0;return e.columns.forEach(T=>{p+=T.width}),p}),r=E(()=>{const p=new Map,{keyField:T}=e;return e.items.forEach(($,G)=>{p.set($[T],G)}),p}),{scrollLeftRef:h,listWidthRef:i}=Bn({columnsRef:ae(e,"columns"),renderColRef:ae(e,"renderCol"),renderItemWithColsRef:ae(e,"renderItemWithCols")}),u=M(null),a=M(void 0),d=new Map,m=E(()=>{const{items:p,itemSize:T,keyField:$}=e,G=new lo(p.length,T);return p.forEach((J,Y)=>{const Z=J[$],U=d.get(Z);U!==void 0&&G.add(Y,U)}),G}),C=M(0),v=M(0),f=_e(()=>Math.max(m.value.getBound(v.value-kt(e.paddingTop))-1,0)),F=E(()=>{const{value:p}=a;if(p===void 0)return[];const{items:T,itemSize:$}=e,G=f.value,J=Math.min(G+Math.ceil(p/$+1),T.length-1),Y=[];for(let Z=G;Z<=J;++Z)Y.push(T[Z]);return Y}),R=(p,T)=>{if(typeof p=="number"){O(p,T,"auto");return}const{left:$,top:G,index:J,key:Y,position:Z,behavior:U,debounce:te=!0}=p;if($!==void 0||G!==void 0)O($,G,U);else if(J!==void 0)b(J,U,te);else if(Y!==void 0){const y=r.value.get(Y);y!==void 0&&b(y,U,te)}else Z==="bottom"?O(0,Number.MAX_SAFE_INTEGER,U):Z==="top"&&O(0,0,U)};let w,c=null;function b(p,T,$){const{value:G}=m,J=G.sum(p)+kt(e.paddingTop);if(!$)u.value.scrollTo({left:0,top:J,behavior:T});else{w=p,c!==null&&window.clearTimeout(c),c=window.setTimeout(()=>{w=void 0,c=null},16);const{scrollTop:Y,offsetHeight:Z}=u.value;if(J>Y){const U=G.get(p);J+U<=Y+Z||u.value.scrollTo({left:0,top:J+U-Z,behavior:T})}else u.value.scrollTo({left:0,top:J,behavior:T})}}function O(p,T,$){u.value.scrollTo({left:p,top:T,behavior:$})}function B(p,T){var $,G,J;if(o||e.ignoreItemResize||ne(T.target))return;const{value:Y}=m,Z=r.value.get(p),U=Y.get(Z),te=(J=(G=($=T.borderBoxSize)===null||$===void 0?void 0:$[0])===null||G===void 0?void 0:G.blockSize)!==null&&J!==void 0?J:T.contentRect.height;if(te===U)return;te-e.itemSize===0?d.delete(p):d.set(p,te-e.itemSize);const S=te-U;if(S===0)return;Y.add(Z,S);const N=u.value;if(N!=null){if(w===void 0){const se=Y.sum(Z);N.scrollTop>se&&N.scrollBy(0,S)}else if(Z<w)N.scrollBy(0,S);else if(Z===w){const se=Y.sum(Z);te+se>N.scrollTop+N.offsetHeight&&N.scrollBy(0,S)}ee()}C.value++}const q=!In();let A=!1;function _(p){var T;(T=e.onScroll)===null||T===void 0||T.call(e,p),(!q||!A)&&ee()}function D(p){var T;if((T=e.onWheel)===null||T===void 0||T.call(e,p),q){const $=u.value;if($!=null){if(p.deltaX===0&&($.scrollTop===0&&p.deltaY<=0||$.scrollTop+$.offsetHeight>=$.scrollHeight&&p.deltaY>=0))return;p.preventDefault(),$.scrollTop+=p.deltaY/Ht(),$.scrollLeft+=p.deltaX/Ht(),ee(),A=!0,mn(()=>{A=!1})}}}function Q(p){if(o||ne(p.target))return;if(e.renderCol==null&&e.renderItemWithCols==null){if(p.contentRect.height===a.value)return}else if(p.contentRect.height===a.value&&p.contentRect.width===i.value)return;a.value=p.contentRect.height,i.value=p.contentRect.width;const{onResize:T}=e;T!==void 0&&T(p)}function ee(){const{value:p}=u;p!=null&&(v.value=p.scrollTop,h.value=p.scrollLeft)}function ne(p){let T=p;for(;T!==null;){if(T.style.display==="none")return!0;T=T.parentElement}return!1}return{listHeight:a,listStyle:{overflow:"auto"},keyToIndex:r,itemsStyle:E(()=>{const{itemResizable:p}=e,T=Ue(m.value.sum());return C.value,[e.itemsStyle,{boxSizing:"content-box",width:Ue(l.value),height:p?"":T,minHeight:p?T:"",paddingTop:Ue(e.paddingTop),paddingBottom:Ue(e.paddingBottom)}]}),visibleItemsStyle:E(()=>(C.value,{transform:`translateY(${Ue(m.value.sum(f.value))})`})),viewportItems:F,listElRef:u,itemsElRef:M(null),scrollTo:R,handleListResize:Q,handleListScroll:_,handleListWheel:D,handleItemResize:B}},render(){const{itemResizable:e,keyField:t,keyToIndex:o,visibleItemsTag:n}=this;return g(Et,{onResize:this.handleListResize},{default:()=>{var l,r;return g("div",Vo(this.$attrs,{class:["v-vl",this.showScrollbar&&"v-vl--show-scrollbar"],onScroll:this.handleListScroll,onWheel:this.handleListWheel,ref:"listElRef"}),[this.items.length!==0?g("div",{ref:"itemsElRef",class:"v-vl-items",style:this.itemsStyle},[g(n,Object.assign({class:"v-vl-visible-items",style:this.visibleItemsStyle},this.visibleItemsProps),{default:()=>{const{renderCol:h,renderItemWithCols:i}=this;return this.viewportItems.map(u=>{const a=u[t],d=o.get(a),m=h!=null?g(Nt,{index:d,item:u}):void 0,C=i!=null?g(Nt,{index:d,item:u}):void 0,v=this.$slots.default({item:u,renderedCols:m,renderedItemWithCols:C,index:d})[0];return e?g(Et,{key:a,onResize:f=>this.handleItemResize(a,f)},{default:()=>v}):(v.key=a,v)})}})]):(r=(l=this.$slots).empty)===null||r===void 0?void 0:r.call(l)])}})}}),Te="v-hidden",$n=at("[v-hidden]",{display:"none!important"}),Wt=be({name:"Overflow",props:{getCounter:Function,getTail:Function,updateCounter:Function,onUpdateCount:Function,onUpdateOverflow:Function},setup(e,{slots:t}){const o=M(null),n=M(null);function l(h){const{value:i}=o,{getCounter:u,getTail:a}=e;let d;if(u!==void 0?d=u():d=n.value,!i||!d)return;d.hasAttribute(Te)&&d.removeAttribute(Te);const{children:m}=i;if(h.showAllItemsBeforeCalculate)for(const b of m)b.hasAttribute(Te)&&b.removeAttribute(Te);const C=i.offsetWidth,v=[],f=t.tail?a==null?void 0:a():null;let F=f?f.offsetWidth:0,R=!1;const w=i.children.length-(t.tail?1:0);for(let b=0;b<w-1;++b){if(b<0)continue;const O=m[b];if(R){O.hasAttribute(Te)||O.setAttribute(Te,"");continue}else O.hasAttribute(Te)&&O.removeAttribute(Te);const B=O.offsetWidth;if(F+=B,v[b]=B,F>C){const{updateCounter:q}=e;for(let A=b;A>=0;--A){const _=w-1-A;q!==void 0?q(_):d.textContent=`${_}`;const D=d.offsetWidth;if(F-=v[A],F+D<=C||A===0){R=!0,b=A-1,f&&(b===-1?(f.style.maxWidth=`${C-D}px`,f.style.boxSizing="border-box"):f.style.maxWidth="");const{onUpdateCount:Q}=e;Q&&Q(_);break}}}}const{onUpdateOverflow:c}=e;R?c!==void 0&&c(!0):(c!==void 0&&c(!1),d.setAttribute(Te,""))}const r=Jt();return $n.mount({id:"vueuc/overflow",head:!0,anchorMetaName:ro,ssr:r}),Xe(()=>l({showAllItemsBeforeCalculate:!1})),{selfRef:o,counterRef:n,sync:l}},render(){const{$slots:e}=this;return Ot(()=>this.sync({showAllItemsBeforeCalculate:!1})),g("div",{class:"v-overflow",ref:"selfRef"},[Ko(e,"default"),e.counter?e.counter():g("span",{style:{display:"inline-block"},ref:"counterRef"}),e.tail?e.tail():null])}});function ao(e,t){t&&(Xe(()=>{const{value:o}=e;o&&pt.registerHandler(o,t)}),Be(e,(o,n)=>{n&&pt.unregisterHandler(n)},{deep:!1}),Qt(()=>{const{value:o}=e;o&&pt.unregisterHandler(o)}))}function jt(e){switch(typeof e){case"string":return e||void 0;case"number":return String(e);default:return}}function xt(e){const t=e.filter(o=>o!==void 0);if(t.length!==0)return t.length===1?t[0]:o=>{e.forEach(n=>{n&&n(o)})}}const An=be({name:"Checkmark",render(){return g("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},g("g",{fill:"none"},g("path",{d:"M14.046 3.486a.75.75 0 0 1-.032 1.06l-7.93 7.474a.85.85 0 0 1-1.188-.022l-2.68-2.72a.75.75 0 1 1 1.068-1.053l2.234 2.267l7.468-7.038a.75.75 0 0 1 1.06.032z",fill:"currentColor"})))}}),_n=be({name:"Empty",render(){return g("svg",{viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},g("path",{d:"M26 7.5C26 11.0899 23.0899 14 19.5 14C15.9101 14 13 11.0899 13 7.5C13 3.91015 15.9101 1 19.5 1C23.0899 1 26 3.91015 26 7.5ZM16.8536 4.14645C16.6583 3.95118 16.3417 3.95118 16.1464 4.14645C15.9512 4.34171 15.9512 4.65829 16.1464 4.85355L18.7929 7.5L16.1464 10.1464C15.9512 10.3417 15.9512 10.6583 16.1464 10.8536C16.3417 11.0488 16.6583 11.0488 16.8536 10.8536L19.5 8.20711L22.1464 10.8536C22.3417 11.0488 22.6583 11.0488 22.8536 10.8536C23.0488 10.6583 23.0488 10.3417 22.8536 10.1464L20.2071 7.5L22.8536 4.85355C23.0488 4.65829 23.0488 4.34171 22.8536 4.14645C22.6583 3.95118 22.3417 3.95118 22.1464 4.14645L19.5 6.79289L16.8536 4.14645Z",fill:"currentColor"}),g("path",{d:"M25 22.75V12.5991C24.5572 13.0765 24.053 13.4961 23.5 13.8454V16H17.5L17.3982 16.0068C17.0322 16.0565 16.75 16.3703 16.75 16.75C16.75 18.2688 15.5188 19.5 14 19.5C12.4812 19.5 11.25 18.2688 11.25 16.75L11.2432 16.6482C11.1935 16.2822 10.8797 16 10.5 16H4.5V7.25C4.5 6.2835 5.2835 5.5 6.25 5.5H12.2696C12.4146 4.97463 12.6153 4.47237 12.865 4H6.25C4.45507 4 3 5.45507 3 7.25V22.75C3 24.5449 4.45507 26 6.25 26H21.75C23.5449 26 25 24.5449 25 22.75ZM4.5 22.75V17.5H9.81597L9.85751 17.7041C10.2905 19.5919 11.9808 21 14 21L14.215 20.9947C16.2095 20.8953 17.842 19.4209 18.184 17.5H23.5V22.75C23.5 23.7165 22.7165 24.5 21.75 24.5H6.25C5.2835 24.5 4.5 23.7165 4.5 22.75Z",fill:"currentColor"}))}}),Dn=be({props:{onFocus:Function,onBlur:Function},setup(e){return()=>g("div",{style:"width: 0; height: 0",tabindex:0,onFocus:e.onFocus,onBlur:e.onBlur})}}),Ln={iconSizeTiny:"28px",iconSizeSmall:"34px",iconSizeMedium:"40px",iconSizeLarge:"46px",iconSizeHuge:"52px"};function Hn(e){const{textColorDisabled:t,iconColor:o,textColor2:n,fontSizeTiny:l,fontSizeSmall:r,fontSizeMedium:h,fontSizeLarge:i,fontSizeHuge:u}=e;return Object.assign(Object.assign({},Ln),{fontSizeTiny:l,fontSizeSmall:r,fontSizeMedium:h,fontSizeLarge:i,fontSizeHuge:u,textColor:t,iconColor:o,extraTextColor:n})}const so={name:"Empty",common:Ye,self:Hn},Nn=V("empty",`
 display: flex;
 flex-direction: column;
 align-items: center;
 font-size: var(--n-font-size);
`,[H("icon",`
 width: var(--n-icon-size);
 height: var(--n-icon-size);
 font-size: var(--n-icon-size);
 line-height: var(--n-icon-size);
 color: var(--n-icon-color);
 transition:
 color .3s var(--n-bezier);
 `,[he("+",[H("description",`
 margin-top: 8px;
 `)])]),H("description",`
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
 `),H("extra",`
 text-align: center;
 transition: color .3s var(--n-bezier);
 margin-top: 12px;
 color: var(--n-extra-text-color);
 `)]),Wn=Object.assign(Object.assign({},Re.props),{description:String,showDescription:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!0},size:{type:String,default:"medium"},renderIcon:Function}),jn=be({name:"Empty",props:Wn,slots:Object,setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:o,mergedComponentPropsRef:n}=Ze(e),l=Re("Empty","-empty",Nn,so,e,t),{localeRef:r}=eo("Empty"),h=E(()=>{var d,m,C;return(d=e.description)!==null&&d!==void 0?d:(C=(m=n==null?void 0:n.value)===null||m===void 0?void 0:m.Empty)===null||C===void 0?void 0:C.description}),i=E(()=>{var d,m;return((m=(d=n==null?void 0:n.value)===null||d===void 0?void 0:d.Empty)===null||m===void 0?void 0:m.renderIcon)||(()=>g(_n,null))}),u=E(()=>{const{size:d}=e,{common:{cubicBezierEaseInOut:m},self:{[oe("iconSize",d)]:C,[oe("fontSize",d)]:v,textColor:f,iconColor:F,extraTextColor:R}}=l.value;return{"--n-icon-size":C,"--n-font-size":v,"--n-bezier":m,"--n-text-color":f,"--n-icon-color":F,"--n-extra-text-color":R}}),a=o?Je("empty",E(()=>{let d="";const{size:m}=e;return d+=m[0],d}),u,e):void 0;return{mergedClsPrefix:t,mergedRenderIcon:i,localizedDescription:E(()=>h.value||r.value.description),cssVars:o?void 0:u,themeClass:a==null?void 0:a.themeClass,onRender:a==null?void 0:a.onRender}},render(){const{$slots:e,mergedClsPrefix:t,onRender:o}=this;return o==null||o(),g("div",{class:[`${t}-empty`,this.themeClass],style:this.cssVars},this.showIcon?g("div",{class:`${t}-empty__icon`},e.icon?e.icon():g(to,{clsPrefix:t},{default:this.mergedRenderIcon})):null,this.showDescription?g("div",{class:`${t}-empty__description`},e.default?e.default():this.localizedDescription):null,e.extra?g("div",{class:`${t}-empty__extra`},e.extra()):null)}}),Un={height:"calc(var(--n-option-height) * 7.6)",paddingTiny:"4px 0",paddingSmall:"4px 0",paddingMedium:"4px 0",paddingLarge:"4px 0",paddingHuge:"4px 0",optionPaddingTiny:"0 12px",optionPaddingSmall:"0 12px",optionPaddingMedium:"0 12px",optionPaddingLarge:"0 12px",optionPaddingHuge:"0 12px",loadingSize:"18px"};function Vn(e){const{borderRadius:t,popoverColor:o,textColor3:n,dividerColor:l,textColor2:r,primaryColorPressed:h,textColorDisabled:i,primaryColor:u,opacityDisabled:a,hoverColor:d,fontSizeTiny:m,fontSizeSmall:C,fontSizeMedium:v,fontSizeLarge:f,fontSizeHuge:F,heightTiny:R,heightSmall:w,heightMedium:c,heightLarge:b,heightHuge:O}=e;return Object.assign(Object.assign({},Un),{optionFontSizeTiny:m,optionFontSizeSmall:C,optionFontSizeMedium:v,optionFontSizeLarge:f,optionFontSizeHuge:F,optionHeightTiny:R,optionHeightSmall:w,optionHeightMedium:c,optionHeightLarge:b,optionHeightHuge:O,borderRadius:t,color:o,groupHeaderTextColor:n,actionDividerColor:l,optionTextColor:r,optionTextColorPressed:h,optionTextColorDisabled:i,optionTextColorActive:u,optionOpacityDisabled:a,optionCheckColor:u,optionColorPending:d,optionColorActive:"rgba(0, 0, 0, 0)",optionColorActivePending:d,actionTextColor:r,loadingColor:u})}const co=Pt({name:"InternalSelectMenu",common:Ye,peers:{Scrollbar:qo,Empty:so},self:Vn}),Ut=be({name:"NBaseSelectGroupHeader",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(){const{renderLabelRef:e,renderOptionRef:t,labelFieldRef:o,nodePropsRef:n}=zt(Bt);return{labelField:o,nodeProps:n,renderLabel:e,renderOption:t}},render(){const{clsPrefix:e,renderLabel:t,renderOption:o,nodeProps:n,tmNode:{rawNode:l}}=this,r=n==null?void 0:n(l),h=t?t(l,!1):Ne(l[this.labelField],l,!1),i=g("div",Object.assign({},r,{class:[`${e}-base-select-group-header`,r==null?void 0:r.class]}),h);return l.render?l.render({node:i,option:l}):o?o({node:i,option:l,selected:!1}):i}});function Kn(e,t){return g(oo,{name:"fade-in-scale-up-transition"},{default:()=>e?g(to,{clsPrefix:t,class:`${t}-base-select-option__check`},{default:()=>g(An)}):null})}const Vt=be({name:"NBaseSelectOption",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(e){const{valueRef:t,pendingTmNodeRef:o,multipleRef:n,valueSetRef:l,renderLabelRef:r,renderOptionRef:h,labelFieldRef:i,valueFieldRef:u,showCheckmarkRef:a,nodePropsRef:d,handleOptionClick:m,handleOptionMouseEnter:C}=zt(Bt),v=_e(()=>{const{value:w}=o;return w?e.tmNode.key===w.key:!1});function f(w){const{tmNode:c}=e;c.disabled||m(w,c)}function F(w){const{tmNode:c}=e;c.disabled||C(w,c)}function R(w){const{tmNode:c}=e,{value:b}=v;c.disabled||b||C(w,c)}return{multiple:n,isGrouped:_e(()=>{const{tmNode:w}=e,{parent:c}=w;return c&&c.rawNode.type==="group"}),showCheckmark:a,nodeProps:d,isPending:v,isSelected:_e(()=>{const{value:w}=t,{value:c}=n;if(w===null)return!1;const b=e.tmNode.rawNode[u.value];if(c){const{value:O}=l;return O.has(b)}else return w===b}),labelField:i,renderLabel:r,renderOption:h,handleMouseMove:R,handleMouseEnter:F,handleClick:f}},render(){const{clsPrefix:e,tmNode:{rawNode:t},isSelected:o,isPending:n,isGrouped:l,showCheckmark:r,nodeProps:h,renderOption:i,renderLabel:u,handleClick:a,handleMouseEnter:d,handleMouseMove:m}=this,C=Kn(o,e),v=u?[u(t,o),r&&C]:[Ne(t[this.labelField],t,o),r&&C],f=h==null?void 0:h(t),F=g("div",Object.assign({},f,{class:[`${e}-base-select-option`,t.class,f==null?void 0:f.class,{[`${e}-base-select-option--disabled`]:t.disabled,[`${e}-base-select-option--selected`]:o,[`${e}-base-select-option--grouped`]:l,[`${e}-base-select-option--pending`]:n,[`${e}-base-select-option--show-checkmark`]:r}],style:[(f==null?void 0:f.style)||"",t.style||""],onClick:xt([a,f==null?void 0:f.onClick]),onMouseenter:xt([d,f==null?void 0:f.onMouseenter]),onMousemove:xt([m,f==null?void 0:f.onMousemove])}),g("div",{class:`${e}-base-select-option__content`},v));return t.render?t.render({node:F,option:t,selected:o}):i?i({node:F,option:t,selected:o}):F}}),qn=V("base-select-menu",`
 line-height: 1.5;
 outline: none;
 z-index: 0;
 position: relative;
 border-radius: var(--n-border-radius);
 transition:
 background-color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier);
 background-color: var(--n-color);
`,[V("scrollbar",`
 max-height: var(--n-height);
 `),V("virtual-list",`
 max-height: var(--n-height);
 `),V("base-select-option",`
 min-height: var(--n-option-height);
 font-size: var(--n-option-font-size);
 display: flex;
 align-items: center;
 `,[H("content",`
 z-index: 1;
 white-space: nowrap;
 text-overflow: ellipsis;
 overflow: hidden;
 `)]),V("base-select-group-header",`
 min-height: var(--n-option-height);
 font-size: .93em;
 display: flex;
 align-items: center;
 `),V("base-select-menu-option-wrapper",`
 position: relative;
 width: 100%;
 `),H("loading, empty",`
 display: flex;
 padding: 12px 32px;
 flex: 1;
 justify-content: center;
 `),H("loading",`
 color: var(--n-loading-color);
 font-size: var(--n-loading-size);
 `),H("header",`
 padding: 8px var(--n-option-padding-left);
 font-size: var(--n-option-font-size);
 transition: 
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 border-bottom: 1px solid var(--n-action-divider-color);
 color: var(--n-action-text-color);
 `),H("action",`
 padding: 8px var(--n-option-padding-left);
 font-size: var(--n-option-font-size);
 transition: 
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 border-top: 1px solid var(--n-action-divider-color);
 color: var(--n-action-text-color);
 `),V("base-select-group-header",`
 position: relative;
 cursor: default;
 padding: var(--n-option-padding);
 color: var(--n-group-header-text-color);
 `),V("base-select-option",`
 cursor: pointer;
 position: relative;
 padding: var(--n-option-padding);
 transition:
 color .3s var(--n-bezier),
 opacity .3s var(--n-bezier);
 box-sizing: border-box;
 color: var(--n-option-text-color);
 opacity: 1;
 `,[re("show-checkmark",`
 padding-right: calc(var(--n-option-padding-right) + 20px);
 `),he("&::before",`
 content: "";
 position: absolute;
 left: 4px;
 right: 4px;
 top: 0;
 bottom: 0;
 border-radius: var(--n-border-radius);
 transition: background-color .3s var(--n-bezier);
 `),he("&:active",`
 color: var(--n-option-text-color-pressed);
 `),re("grouped",`
 padding-left: calc(var(--n-option-padding-left) * 1.5);
 `),re("pending",[he("&::before",`
 background-color: var(--n-option-color-pending);
 `)]),re("selected",`
 color: var(--n-option-text-color-active);
 `,[he("&::before",`
 background-color: var(--n-option-color-active);
 `),re("pending",[he("&::before",`
 background-color: var(--n-option-color-active-pending);
 `)])]),re("disabled",`
 cursor: not-allowed;
 `,[Ae("selected",`
 color: var(--n-option-text-color-disabled);
 `),re("selected",`
 opacity: var(--n-option-opacity-disabled);
 `)]),H("check",`
 font-size: 16px;
 position: absolute;
 right: calc(var(--n-option-padding-right) - 4px);
 top: calc(50% - 7px);
 color: var(--n-option-check-color);
 transition: color .3s var(--n-bezier);
 `,[no({enterScale:"0.5"})])])]),Gn=be({name:"InternalSelectMenu",props:Object.assign(Object.assign({},Re.props),{clsPrefix:{type:String,required:!0},scrollable:{type:Boolean,default:!0},treeMate:{type:Object,required:!0},multiple:Boolean,size:{type:String,default:"medium"},value:{type:[String,Number,Array],default:null},autoPending:Boolean,virtualScroll:{type:Boolean,default:!0},show:{type:Boolean,default:!0},labelField:{type:String,default:"label"},valueField:{type:String,default:"value"},loading:Boolean,focusable:Boolean,renderLabel:Function,renderOption:Function,nodeProps:Function,showCheckmark:{type:Boolean,default:!0},onMousedown:Function,onScroll:Function,onFocus:Function,onBlur:Function,onKeyup:Function,onKeydown:Function,onTabOut:Function,onMouseenter:Function,onMouseleave:Function,onResize:Function,resetMenuOnOptionsChange:{type:Boolean,default:!0},inlineThemeDisabled:Boolean,onToggle:Function}),setup(e){const{mergedClsPrefixRef:t,mergedRtlRef:o}=Ze(e),n=It("InternalSelectMenu",o,t),l=Re("InternalSelectMenu","-internal-select-menu",qn,co,e,ae(e,"clsPrefix")),r=M(null),h=M(null),i=M(null),u=E(()=>e.treeMate.getFlattenedNodes()),a=E(()=>Fn(u.value)),d=M(null);function m(){const{treeMate:y}=e;let S=null;const{value:N}=e;N===null?S=y.getFirstAvailableNode():(e.multiple?S=y.getNode((N||[])[(N||[]).length-1]):S=y.getNode(N),(!S||S.disabled)&&(S=y.getFirstAvailableNode())),T(S||null)}function C(){const{value:y}=d;y&&!e.treeMate.getNode(y.key)&&(d.value=null)}let v;Be(()=>e.show,y=>{y?v=Be(()=>e.treeMate,()=>{e.resetMenuOnOptionsChange?(e.autoPending?m():C(),Ot($)):C()},{immediate:!0}):v==null||v()},{immediate:!0}),Qt(()=>{v==null||v()});const f=E(()=>kt(l.value.self[oe("optionHeight",e.size)])),F=E(()=>We(l.value.self[oe("padding",e.size)])),R=E(()=>e.multiple&&Array.isArray(e.value)?new Set(e.value):new Set),w=E(()=>{const y=u.value;return y&&y.length===0});function c(y){const{onToggle:S}=e;S&&S(y)}function b(y){const{onScroll:S}=e;S&&S(y)}function O(y){var S;(S=i.value)===null||S===void 0||S.sync(),b(y)}function B(){var y;(y=i.value)===null||y===void 0||y.sync()}function q(){const{value:y}=d;return y||null}function A(y,S){S.disabled||T(S,!1)}function _(y,S){S.disabled||c(S)}function D(y){var S;Ge(y,"action")||(S=e.onKeyup)===null||S===void 0||S.call(e,y)}function Q(y){var S;Ge(y,"action")||(S=e.onKeydown)===null||S===void 0||S.call(e,y)}function ee(y){var S;(S=e.onMousedown)===null||S===void 0||S.call(e,y),!e.focusable&&y.preventDefault()}function ne(){const{value:y}=d;y&&T(y.getNext({loop:!0}),!0)}function p(){const{value:y}=d;y&&T(y.getPrev({loop:!0}),!0)}function T(y,S=!1){d.value=y,S&&$()}function $(){var y,S;const N=d.value;if(!N)return;const se=a.value(N.key);se!==null&&(e.virtualScroll?(y=h.value)===null||y===void 0||y.scrollTo({index:se}):(S=i.value)===null||S===void 0||S.scrollTo({index:se,elSize:f.value}))}function G(y){var S,N;!((S=r.value)===null||S===void 0)&&S.contains(y.target)&&((N=e.onFocus)===null||N===void 0||N.call(e,y))}function J(y){var S,N;!((S=r.value)===null||S===void 0)&&S.contains(y.relatedTarget)||(N=e.onBlur)===null||N===void 0||N.call(e,y)}st(Bt,{handleOptionMouseEnter:A,handleOptionClick:_,valueSetRef:R,pendingTmNodeRef:d,nodePropsRef:ae(e,"nodeProps"),showCheckmarkRef:ae(e,"showCheckmark"),multipleRef:ae(e,"multiple"),valueRef:ae(e,"value"),renderLabelRef:ae(e,"renderLabel"),renderOptionRef:ae(e,"renderOption"),labelFieldRef:ae(e,"labelField"),valueFieldRef:ae(e,"valueField")}),st(yn,r),Xe(()=>{const{value:y}=i;y&&y.sync()});const Y=E(()=>{const{size:y}=e,{common:{cubicBezierEaseInOut:S},self:{height:N,borderRadius:se,color:pe,groupHeaderTextColor:me,actionDividerColor:ve,optionTextColorPressed:ce,optionTextColor:ye,optionTextColorDisabled:ue,optionTextColorActive:ze,optionOpacityDisabled:De,optionCheckColor:xe,actionTextColor:Oe,optionColorPending:Se,optionColorActive:ge,loadingColor:Fe,loadingSize:we,optionColorActivePending:je,[oe("optionFontSize",y)]:Le,[oe("optionHeight",y)]:Ee,[oe("optionPadding",y)]:fe}}=l.value;return{"--n-height":N,"--n-action-divider-color":ve,"--n-action-text-color":Oe,"--n-bezier":S,"--n-border-radius":se,"--n-color":pe,"--n-option-font-size":Le,"--n-group-header-text-color":me,"--n-option-check-color":xe,"--n-option-color-pending":Se,"--n-option-color-active":ge,"--n-option-color-active-pending":je,"--n-option-height":Ee,"--n-option-opacity-disabled":De,"--n-option-text-color":ye,"--n-option-text-color-active":ze,"--n-option-text-color-disabled":ue,"--n-option-text-color-pressed":ce,"--n-option-padding":fe,"--n-option-padding-left":We(fe,"left"),"--n-option-padding-right":We(fe,"right"),"--n-loading-color":Fe,"--n-loading-size":we}}),{inlineThemeDisabled:Z}=e,U=Z?Je("internal-select-menu",E(()=>e.size[0]),Y,e):void 0,te={selfRef:r,next:ne,prev:p,getPendingTmNode:q};return ao(r,e.onResize),Object.assign({mergedTheme:l,mergedClsPrefix:t,rtlEnabled:n,virtualListRef:h,scrollbarRef:i,itemSize:f,padding:F,flattenedNodes:u,empty:w,virtualListContainer(){const{value:y}=h;return y==null?void 0:y.listElRef},virtualListContent(){const{value:y}=h;return y==null?void 0:y.itemsElRef},doScroll:b,handleFocusin:G,handleFocusout:J,handleKeyUp:D,handleKeyDown:Q,handleMouseDown:ee,handleVirtualListResize:B,handleVirtualListScroll:O,cssVars:Z?void 0:Y,themeClass:U==null?void 0:U.themeClass,onRender:U==null?void 0:U.onRender},te)},render(){const{$slots:e,virtualScroll:t,clsPrefix:o,mergedTheme:n,themeClass:l,onRender:r}=this;return r==null||r(),g("div",{ref:"selfRef",tabindex:this.focusable?0:-1,class:[`${o}-base-select-menu`,this.rtlEnabled&&`${o}-base-select-menu--rtl`,l,this.multiple&&`${o}-base-select-menu--multiple`],style:this.cssVars,onFocusin:this.handleFocusin,onFocusout:this.handleFocusout,onKeyup:this.handleKeyUp,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave},ct(e.header,h=>h&&g("div",{class:`${o}-base-select-menu__header`,"data-header":!0,key:"header"},h)),this.loading?g("div",{class:`${o}-base-select-menu__loading`},g(Go,{clsPrefix:o,strokeWidth:20})):this.empty?g("div",{class:`${o}-base-select-menu__empty`,"data-empty":!0},Yo(e.empty,()=>[g(jn,{theme:n.peers.Empty,themeOverrides:n.peerOverrides.Empty,size:this.size})])):g(Xo,{ref:"scrollbarRef",theme:n.peers.Scrollbar,themeOverrides:n.peerOverrides.Scrollbar,scrollable:this.scrollable,container:t?this.virtualListContainer:void 0,content:t?this.virtualListContent:void 0,onScroll:t?void 0:this.doScroll},{default:()=>t?g(En,{ref:"virtualListRef",class:`${o}-virtual-list`,items:this.flattenedNodes,itemSize:this.itemSize,showScrollbar:!1,paddingTop:this.padding.top,paddingBottom:this.padding.bottom,onResize:this.handleVirtualListResize,onScroll:this.handleVirtualListScroll,itemResizable:!0},{default:({item:h})=>h.isGroup?g(Ut,{key:h.key,clsPrefix:o,tmNode:h}):h.ignored?null:g(Vt,{clsPrefix:o,key:h.key,tmNode:h})}):g("div",{class:`${o}-base-select-menu-option-wrapper`,style:{paddingTop:this.padding.top,paddingBottom:this.padding.bottom}},this.flattenedNodes.map(h=>h.isGroup?g(Ut,{key:h.key,clsPrefix:o,tmNode:h}):g(Vt,{clsPrefix:o,key:h.key,tmNode:h})))}),ct(e.action,h=>h&&[g("div",{class:`${o}-base-select-menu__action`,"data-action":!0,key:"action"},h),g(Dn,{onFocus:this.onTabOut,key:"focus-detector"})]))}}),Xn={closeIconSizeTiny:"12px",closeIconSizeSmall:"12px",closeIconSizeMedium:"14px",closeIconSizeLarge:"14px",closeSizeTiny:"16px",closeSizeSmall:"16px",closeSizeMedium:"18px",closeSizeLarge:"18px",padding:"0 7px",closeMargin:"0 0 0 4px"};function Yn(e){const{textColor2:t,primaryColorHover:o,primaryColorPressed:n,primaryColor:l,infoColor:r,successColor:h,warningColor:i,errorColor:u,baseColor:a,borderColor:d,opacityDisabled:m,tagColor:C,closeIconColor:v,closeIconColorHover:f,closeIconColorPressed:F,borderRadiusSmall:R,fontSizeMini:w,fontSizeTiny:c,fontSizeSmall:b,fontSizeMedium:O,heightMini:B,heightTiny:q,heightSmall:A,heightMedium:_,closeColorHover:D,closeColorPressed:Q,buttonColor2Hover:ee,buttonColor2Pressed:ne,fontWeightStrong:p}=e;return Object.assign(Object.assign({},Xn),{closeBorderRadius:R,heightTiny:B,heightSmall:q,heightMedium:A,heightLarge:_,borderRadius:R,opacityDisabled:m,fontSizeTiny:w,fontSizeSmall:c,fontSizeMedium:b,fontSizeLarge:O,fontWeightStrong:p,textColorCheckable:t,textColorHoverCheckable:t,textColorPressedCheckable:t,textColorChecked:a,colorCheckable:"#0000",colorHoverCheckable:ee,colorPressedCheckable:ne,colorChecked:l,colorCheckedHover:o,colorCheckedPressed:n,border:`1px solid ${d}`,textColor:t,color:C,colorBordered:"rgb(250, 250, 252)",closeIconColor:v,closeIconColorHover:f,closeIconColorPressed:F,closeColorHover:D,closeColorPressed:Q,borderPrimary:`1px solid ${X(l,{alpha:.3})}`,textColorPrimary:l,colorPrimary:X(l,{alpha:.12}),colorBorderedPrimary:X(l,{alpha:.1}),closeIconColorPrimary:l,closeIconColorHoverPrimary:l,closeIconColorPressedPrimary:l,closeColorHoverPrimary:X(l,{alpha:.12}),closeColorPressedPrimary:X(l,{alpha:.18}),borderInfo:`1px solid ${X(r,{alpha:.3})}`,textColorInfo:r,colorInfo:X(r,{alpha:.12}),colorBorderedInfo:X(r,{alpha:.1}),closeIconColorInfo:r,closeIconColorHoverInfo:r,closeIconColorPressedInfo:r,closeColorHoverInfo:X(r,{alpha:.12}),closeColorPressedInfo:X(r,{alpha:.18}),borderSuccess:`1px solid ${X(h,{alpha:.3})}`,textColorSuccess:h,colorSuccess:X(h,{alpha:.12}),colorBorderedSuccess:X(h,{alpha:.1}),closeIconColorSuccess:h,closeIconColorHoverSuccess:h,closeIconColorPressedSuccess:h,closeColorHoverSuccess:X(h,{alpha:.12}),closeColorPressedSuccess:X(h,{alpha:.18}),borderWarning:`1px solid ${X(i,{alpha:.35})}`,textColorWarning:i,colorWarning:X(i,{alpha:.15}),colorBorderedWarning:X(i,{alpha:.12}),closeIconColorWarning:i,closeIconColorHoverWarning:i,closeIconColorPressedWarning:i,closeColorHoverWarning:X(i,{alpha:.12}),closeColorPressedWarning:X(i,{alpha:.18}),borderError:`1px solid ${X(u,{alpha:.23})}`,textColorError:u,colorError:X(u,{alpha:.1}),colorBorderedError:X(u,{alpha:.08}),closeIconColorError:u,closeIconColorHoverError:u,closeIconColorPressedError:u,closeColorHoverError:X(u,{alpha:.12}),closeColorPressedError:X(u,{alpha:.18})})}const Zn={name:"Tag",common:Ye,self:Yn},Jn={color:Object,type:{type:String,default:"default"},round:Boolean,size:{type:String,default:"medium"},closable:Boolean,disabled:{type:Boolean,default:void 0}},Qn=V("tag",`
 --n-close-margin: var(--n-close-margin-top) var(--n-close-margin-right) var(--n-close-margin-bottom) var(--n-close-margin-left);
 white-space: nowrap;
 position: relative;
 box-sizing: border-box;
 cursor: default;
 display: inline-flex;
 align-items: center;
 flex-wrap: nowrap;
 padding: var(--n-padding);
 border-radius: var(--n-border-radius);
 color: var(--n-text-color);
 background-color: var(--n-color);
 transition: 
 border-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 opacity .3s var(--n-bezier);
 line-height: 1;
 height: var(--n-height);
 font-size: var(--n-font-size);
`,[re("strong",`
 font-weight: var(--n-font-weight-strong);
 `),H("border",`
 pointer-events: none;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 border-radius: inherit;
 border: var(--n-border);
 transition: border-color .3s var(--n-bezier);
 `),H("icon",`
 display: flex;
 margin: 0 4px 0 0;
 color: var(--n-text-color);
 transition: color .3s var(--n-bezier);
 font-size: var(--n-avatar-size-override);
 `),H("avatar",`
 display: flex;
 margin: 0 6px 0 0;
 `),H("close",`
 margin: var(--n-close-margin);
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 `),re("round",`
 padding: 0 calc(var(--n-height) / 3);
 border-radius: calc(var(--n-height) / 2);
 `,[H("icon",`
 margin: 0 4px 0 calc((var(--n-height) - 8px) / -2);
 `),H("avatar",`
 margin: 0 6px 0 calc((var(--n-height) - 8px) / -2);
 `),re("closable",`
 padding: 0 calc(var(--n-height) / 4) 0 calc(var(--n-height) / 3);
 `)]),re("icon, avatar",[re("round",`
 padding: 0 calc(var(--n-height) / 3) 0 calc(var(--n-height) / 2);
 `)]),re("disabled",`
 cursor: not-allowed !important;
 opacity: var(--n-opacity-disabled);
 `),re("checkable",`
 cursor: pointer;
 box-shadow: none;
 color: var(--n-text-color-checkable);
 background-color: var(--n-color-checkable);
 `,[Ae("disabled",[he("&:hover","background-color: var(--n-color-hover-checkable);",[Ae("checked","color: var(--n-text-color-hover-checkable);")]),he("&:active","background-color: var(--n-color-pressed-checkable);",[Ae("checked","color: var(--n-text-color-pressed-checkable);")])]),re("checked",`
 color: var(--n-text-color-checked);
 background-color: var(--n-color-checked);
 `,[Ae("disabled",[he("&:hover","background-color: var(--n-color-checked-hover);"),he("&:active","background-color: var(--n-color-checked-pressed);")])])])]),er=Object.assign(Object.assign(Object.assign({},Re.props),Jn),{bordered:{type:Boolean,default:void 0},checked:Boolean,checkable:Boolean,strong:Boolean,triggerClickOnClose:Boolean,onClose:[Array,Function],onMouseenter:Function,onMouseleave:Function,"onUpdate:checked":Function,onUpdateChecked:Function,internalCloseFocusable:{type:Boolean,default:!0},internalCloseIsButtonTag:{type:Boolean,default:!0},onCheckedChange:Function}),tr=Jo("n-tag"),wt=be({name:"Tag",props:er,slots:Object,setup(e){const t=M(null),{mergedBorderedRef:o,mergedClsPrefixRef:n,inlineThemeDisabled:l,mergedRtlRef:r}=Ze(e),h=Re("Tag","-tag",Qn,Zn,e,n);st(tr,{roundRef:ae(e,"round")});function i(){if(!e.disabled&&e.checkable){const{checked:v,onCheckedChange:f,onUpdateChecked:F,"onUpdate:checked":R}=e;F&&F(!v),R&&R(!v),f&&f(!v)}}function u(v){if(e.triggerClickOnClose||v.stopPropagation(),!e.disabled){const{onClose:f}=e;f&&Ce(f,v)}}const a={setTextContent(v){const{value:f}=t;f&&(f.textContent=v)}},d=It("Tag",r,n),m=E(()=>{const{type:v,size:f,color:{color:F,textColor:R}={}}=e,{common:{cubicBezierEaseInOut:w},self:{padding:c,closeMargin:b,borderRadius:O,opacityDisabled:B,textColorCheckable:q,textColorHoverCheckable:A,textColorPressedCheckable:_,textColorChecked:D,colorCheckable:Q,colorHoverCheckable:ee,colorPressedCheckable:ne,colorChecked:p,colorCheckedHover:T,colorCheckedPressed:$,closeBorderRadius:G,fontWeightStrong:J,[oe("colorBordered",v)]:Y,[oe("closeSize",f)]:Z,[oe("closeIconSize",f)]:U,[oe("fontSize",f)]:te,[oe("height",f)]:y,[oe("color",v)]:S,[oe("textColor",v)]:N,[oe("border",v)]:se,[oe("closeIconColor",v)]:pe,[oe("closeIconColorHover",v)]:me,[oe("closeIconColorPressed",v)]:ve,[oe("closeColorHover",v)]:ce,[oe("closeColorPressed",v)]:ye}}=h.value,ue=We(b);return{"--n-font-weight-strong":J,"--n-avatar-size-override":`calc(${y} - 8px)`,"--n-bezier":w,"--n-border-radius":O,"--n-border":se,"--n-close-icon-size":U,"--n-close-color-pressed":ye,"--n-close-color-hover":ce,"--n-close-border-radius":G,"--n-close-icon-color":pe,"--n-close-icon-color-hover":me,"--n-close-icon-color-pressed":ve,"--n-close-icon-color-disabled":pe,"--n-close-margin-top":ue.top,"--n-close-margin-right":ue.right,"--n-close-margin-bottom":ue.bottom,"--n-close-margin-left":ue.left,"--n-close-size":Z,"--n-color":F||(o.value?Y:S),"--n-color-checkable":Q,"--n-color-checked":p,"--n-color-checked-hover":T,"--n-color-checked-pressed":$,"--n-color-hover-checkable":ee,"--n-color-pressed-checkable":ne,"--n-font-size":te,"--n-height":y,"--n-opacity-disabled":B,"--n-padding":c,"--n-text-color":R||N,"--n-text-color-checkable":q,"--n-text-color-checked":D,"--n-text-color-hover-checkable":A,"--n-text-color-pressed-checkable":_}}),C=l?Je("tag",E(()=>{let v="";const{type:f,size:F,color:{color:R,textColor:w}={}}=e;return v+=f[0],v+=F[0],R&&(v+=`a${$t(R)}`),w&&(v+=`b${$t(w)}`),o.value&&(v+="c"),v}),m,e):void 0;return Object.assign(Object.assign({},a),{rtlEnabled:d,mergedClsPrefix:n,contentRef:t,mergedBordered:o,handleClick:i,handleCloseClick:u,cssVars:l?void 0:m,themeClass:C==null?void 0:C.themeClass,onRender:C==null?void 0:C.onRender})},render(){var e,t;const{mergedClsPrefix:o,rtlEnabled:n,closable:l,color:{borderColor:r}={},round:h,onRender:i,$slots:u}=this;i==null||i();const a=ct(u.avatar,m=>m&&g("div",{class:`${o}-tag__avatar`},m)),d=ct(u.icon,m=>m&&g("div",{class:`${o}-tag__icon`},m));return g("div",{class:[`${o}-tag`,this.themeClass,{[`${o}-tag--rtl`]:n,[`${o}-tag--strong`]:this.strong,[`${o}-tag--disabled`]:this.disabled,[`${o}-tag--checkable`]:this.checkable,[`${o}-tag--checked`]:this.checkable&&this.checked,[`${o}-tag--round`]:h,[`${o}-tag--avatar`]:a,[`${o}-tag--icon`]:d,[`${o}-tag--closable`]:l}],style:this.cssVars,onClick:this.handleClick,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave},d||a,g("span",{class:`${o}-tag__content`,ref:"contentRef"},(t=(e=this.$slots).default)===null||t===void 0?void 0:t.call(e)),!this.checkable&&l?g(Zo,{clsPrefix:o,class:`${o}-tag__close`,disabled:this.disabled,onClick:this.handleCloseClick,focusable:this.internalCloseFocusable,round:h,isButtonTag:this.internalCloseIsButtonTag,absolute:!0}):null,!this.checkable&&this.mergedBordered?g("div",{class:`${o}-tag__border`,style:{borderColor:r}}):null)}}),or={paddingSingle:"0 26px 0 12px",paddingMultiple:"3px 26px 0 12px",clearSize:"16px",arrowSize:"16px"};function nr(e){const{borderRadius:t,textColor2:o,textColorDisabled:n,inputColor:l,inputColorDisabled:r,primaryColor:h,primaryColorHover:i,warningColor:u,warningColorHover:a,errorColor:d,errorColorHover:m,borderColor:C,iconColor:v,iconColorDisabled:f,clearColor:F,clearColorHover:R,clearColorPressed:w,placeholderColor:c,placeholderColorDisabled:b,fontSizeTiny:O,fontSizeSmall:B,fontSizeMedium:q,fontSizeLarge:A,heightTiny:_,heightSmall:D,heightMedium:Q,heightLarge:ee,fontWeight:ne}=e;return Object.assign(Object.assign({},or),{fontSizeTiny:O,fontSizeSmall:B,fontSizeMedium:q,fontSizeLarge:A,heightTiny:_,heightSmall:D,heightMedium:Q,heightLarge:ee,borderRadius:t,fontWeight:ne,textColor:o,textColorDisabled:n,placeholderColor:c,placeholderColorDisabled:b,color:l,colorDisabled:r,colorActive:l,border:`1px solid ${C}`,borderHover:`1px solid ${i}`,borderActive:`1px solid ${h}`,borderFocus:`1px solid ${i}`,boxShadowHover:"none",boxShadowActive:`0 0 0 2px ${X(h,{alpha:.2})}`,boxShadowFocus:`0 0 0 2px ${X(h,{alpha:.2})}`,caretColor:h,arrowColor:v,arrowColorDisabled:f,loadingColor:h,borderWarning:`1px solid ${u}`,borderHoverWarning:`1px solid ${a}`,borderActiveWarning:`1px solid ${u}`,borderFocusWarning:`1px solid ${a}`,boxShadowHoverWarning:"none",boxShadowActiveWarning:`0 0 0 2px ${X(u,{alpha:.2})}`,boxShadowFocusWarning:`0 0 0 2px ${X(u,{alpha:.2})}`,colorActiveWarning:l,caretColorWarning:u,borderError:`1px solid ${d}`,borderHoverError:`1px solid ${m}`,borderActiveError:`1px solid ${d}`,borderFocusError:`1px solid ${m}`,boxShadowHoverError:"none",boxShadowActiveError:`0 0 0 2px ${X(d,{alpha:.2})}`,boxShadowFocusError:`0 0 0 2px ${X(d,{alpha:.2})}`,colorActiveError:l,caretColorError:d,clearColor:F,clearColorHover:R,clearColorPressed:w})}const uo=Pt({name:"InternalSelection",common:Ye,peers:{Popover:xn},self:nr}),rr=he([V("base-selection",`
 --n-padding-single: var(--n-padding-single-top) var(--n-padding-single-right) var(--n-padding-single-bottom) var(--n-padding-single-left);
 --n-padding-multiple: var(--n-padding-multiple-top) var(--n-padding-multiple-right) var(--n-padding-multiple-bottom) var(--n-padding-multiple-left);
 position: relative;
 z-index: auto;
 box-shadow: none;
 width: 100%;
 max-width: 100%;
 display: inline-block;
 vertical-align: bottom;
 border-radius: var(--n-border-radius);
 min-height: var(--n-height);
 line-height: 1.5;
 font-size: var(--n-font-size);
 `,[V("base-loading",`
 color: var(--n-loading-color);
 `),V("base-selection-tags","min-height: var(--n-height);"),H("border, state-border",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 pointer-events: none;
 border: var(--n-border);
 border-radius: inherit;
 transition:
 box-shadow .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `),H("state-border",`
 z-index: 1;
 border-color: #0000;
 `),V("base-suffix",`
 cursor: pointer;
 position: absolute;
 top: 50%;
 transform: translateY(-50%);
 right: 10px;
 `,[H("arrow",`
 font-size: var(--n-arrow-size);
 color: var(--n-arrow-color);
 transition: color .3s var(--n-bezier);
 `)]),V("base-selection-overlay",`
 display: flex;
 align-items: center;
 white-space: nowrap;
 pointer-events: none;
 position: absolute;
 top: 0;
 right: 0;
 bottom: 0;
 left: 0;
 padding: var(--n-padding-single);
 transition: color .3s var(--n-bezier);
 `,[H("wrapper",`
 flex-basis: 0;
 flex-grow: 1;
 overflow: hidden;
 text-overflow: ellipsis;
 `)]),V("base-selection-placeholder",`
 color: var(--n-placeholder-color);
 `,[H("inner",`
 max-width: 100%;
 overflow: hidden;
 `)]),V("base-selection-tags",`
 cursor: pointer;
 outline: none;
 box-sizing: border-box;
 position: relative;
 z-index: auto;
 display: flex;
 padding: var(--n-padding-multiple);
 flex-wrap: wrap;
 align-items: center;
 width: 100%;
 vertical-align: bottom;
 background-color: var(--n-color);
 border-radius: inherit;
 transition:
 color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 `),V("base-selection-label",`
 height: var(--n-height);
 display: inline-flex;
 width: 100%;
 vertical-align: bottom;
 cursor: pointer;
 outline: none;
 z-index: auto;
 box-sizing: border-box;
 position: relative;
 transition:
 color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 border-radius: inherit;
 background-color: var(--n-color);
 align-items: center;
 `,[V("base-selection-input",`
 font-size: inherit;
 line-height: inherit;
 outline: none;
 cursor: pointer;
 box-sizing: border-box;
 border:none;
 width: 100%;
 padding: var(--n-padding-single);
 background-color: #0000;
 color: var(--n-text-color);
 transition: color .3s var(--n-bezier);
 caret-color: var(--n-caret-color);
 `,[H("content",`
 text-overflow: ellipsis;
 overflow: hidden;
 white-space: nowrap; 
 `)]),H("render-label",`
 color: var(--n-text-color);
 `)]),Ae("disabled",[he("&:hover",[H("state-border",`
 box-shadow: var(--n-box-shadow-hover);
 border: var(--n-border-hover);
 `)]),re("focus",[H("state-border",`
 box-shadow: var(--n-box-shadow-focus);
 border: var(--n-border-focus);
 `)]),re("active",[H("state-border",`
 box-shadow: var(--n-box-shadow-active);
 border: var(--n-border-active);
 `),V("base-selection-label","background-color: var(--n-color-active);"),V("base-selection-tags","background-color: var(--n-color-active);")])]),re("disabled","cursor: not-allowed;",[H("arrow",`
 color: var(--n-arrow-color-disabled);
 `),V("base-selection-label",`
 cursor: not-allowed;
 background-color: var(--n-color-disabled);
 `,[V("base-selection-input",`
 cursor: not-allowed;
 color: var(--n-text-color-disabled);
 `),H("render-label",`
 color: var(--n-text-color-disabled);
 `)]),V("base-selection-tags",`
 cursor: not-allowed;
 background-color: var(--n-color-disabled);
 `),V("base-selection-placeholder",`
 cursor: not-allowed;
 color: var(--n-placeholder-color-disabled);
 `)]),V("base-selection-input-tag",`
 height: calc(var(--n-height) - 6px);
 line-height: calc(var(--n-height) - 6px);
 outline: none;
 display: none;
 position: relative;
 margin-bottom: 3px;
 max-width: 100%;
 vertical-align: bottom;
 `,[H("input",`
 font-size: inherit;
 font-family: inherit;
 min-width: 1px;
 padding: 0;
 background-color: #0000;
 outline: none;
 border: none;
 max-width: 100%;
 overflow: hidden;
 width: 1em;
 line-height: inherit;
 cursor: pointer;
 color: var(--n-text-color);
 caret-color: var(--n-caret-color);
 `),H("mirror",`
 position: absolute;
 left: 0;
 top: 0;
 white-space: pre;
 visibility: hidden;
 user-select: none;
 -webkit-user-select: none;
 opacity: 0;
 `)]),["warning","error"].map(e=>re(`${e}-status`,[H("state-border",`border: var(--n-border-${e});`),Ae("disabled",[he("&:hover",[H("state-border",`
 box-shadow: var(--n-box-shadow-hover-${e});
 border: var(--n-border-hover-${e});
 `)]),re("active",[H("state-border",`
 box-shadow: var(--n-box-shadow-active-${e});
 border: var(--n-border-active-${e});
 `),V("base-selection-label",`background-color: var(--n-color-active-${e});`),V("base-selection-tags",`background-color: var(--n-color-active-${e});`)]),re("focus",[H("state-border",`
 box-shadow: var(--n-box-shadow-focus-${e});
 border: var(--n-border-focus-${e});
 `)])])]))]),V("base-selection-popover",`
 margin-bottom: -3px;
 display: flex;
 flex-wrap: wrap;
 margin-right: -8px;
 `),V("base-selection-tag-wrapper",`
 max-width: 100%;
 display: inline-flex;
 padding: 0 7px 3px 0;
 `,[he("&:last-child","padding-right: 0;"),V("tag",`
 font-size: 14px;
 max-width: 100%;
 `,[H("content",`
 line-height: 1.25;
 text-overflow: ellipsis;
 overflow: hidden;
 `)])])]),lr=be({name:"InternalSelection",props:Object.assign(Object.assign({},Re.props),{clsPrefix:{type:String,required:!0},bordered:{type:Boolean,default:void 0},active:Boolean,pattern:{type:String,default:""},placeholder:String,selectedOption:{type:Object,default:null},selectedOptions:{type:Array,default:null},labelField:{type:String,default:"label"},valueField:{type:String,default:"value"},multiple:Boolean,filterable:Boolean,clearable:Boolean,disabled:Boolean,size:{type:String,default:"medium"},loading:Boolean,autofocus:Boolean,showArrow:{type:Boolean,default:!0},inputProps:Object,focused:Boolean,renderTag:Function,onKeydown:Function,onClick:Function,onBlur:Function,onFocus:Function,onDeleteOption:Function,maxTagCount:[String,Number],ellipsisTagPopoverProps:Object,onClear:Function,onPatternInput:Function,onPatternFocus:Function,onPatternBlur:Function,renderLabel:Function,status:String,inlineThemeDisabled:Boolean,ignoreComposition:{type:Boolean,default:!0},onResize:Function}),setup(e){const{mergedClsPrefixRef:t,mergedRtlRef:o}=Ze(e),n=It("InternalSelection",o,t),l=M(null),r=M(null),h=M(null),i=M(null),u=M(null),a=M(null),d=M(null),m=M(null),C=M(null),v=M(null),f=M(!1),F=M(!1),R=M(!1),w=Re("InternalSelection","-internal-selection",rr,uo,e,ae(e,"clsPrefix")),c=E(()=>e.clearable&&!e.disabled&&(R.value||e.active)),b=E(()=>e.selectedOption?e.renderTag?e.renderTag({option:e.selectedOption,handleClose:()=>{}}):e.renderLabel?e.renderLabel(e.selectedOption,!0):Ne(e.selectedOption[e.labelField],e.selectedOption,!0):e.placeholder),O=E(()=>{const x=e.selectedOption;if(x)return x[e.labelField]}),B=E(()=>e.multiple?!!(Array.isArray(e.selectedOptions)&&e.selectedOptions.length):e.selectedOption!==null);function q(){var x;const{value:z}=l;if(z){const{value:le}=r;le&&(le.style.width=`${z.offsetWidth}px`,e.maxTagCount!=="responsive"&&((x=C.value)===null||x===void 0||x.sync({showAllItemsBeforeCalculate:!1})))}}function A(){const{value:x}=v;x&&(x.style.display="none")}function _(){const{value:x}=v;x&&(x.style.display="inline-block")}Be(ae(e,"active"),x=>{x||A()}),Be(ae(e,"pattern"),()=>{e.multiple&&Ot(q)});function D(x){const{onFocus:z}=e;z&&z(x)}function Q(x){const{onBlur:z}=e;z&&z(x)}function ee(x){const{onDeleteOption:z}=e;z&&z(x)}function ne(x){const{onClear:z}=e;z&&z(x)}function p(x){const{onPatternInput:z}=e;z&&z(x)}function T(x){var z;(!x.relatedTarget||!(!((z=h.value)===null||z===void 0)&&z.contains(x.relatedTarget)))&&D(x)}function $(x){var z;!((z=h.value)===null||z===void 0)&&z.contains(x.relatedTarget)||Q(x)}function G(x){ne(x)}function J(){R.value=!0}function Y(){R.value=!1}function Z(x){!e.active||!e.filterable||x.target!==r.value&&x.preventDefault()}function U(x){ee(x)}const te=M(!1);function y(x){if(x.key==="Backspace"&&!te.value&&!e.pattern.length){const{selectedOptions:z}=e;z!=null&&z.length&&U(z[z.length-1])}}let S=null;function N(x){const{value:z}=l;if(z){const le=x.target.value;z.textContent=le,q()}e.ignoreComposition&&te.value?S=x:p(x)}function se(){te.value=!0}function pe(){te.value=!1,e.ignoreComposition&&p(S),S=null}function me(x){var z;F.value=!0,(z=e.onPatternFocus)===null||z===void 0||z.call(e,x)}function ve(x){var z;F.value=!1,(z=e.onPatternBlur)===null||z===void 0||z.call(e,x)}function ce(){var x,z;if(e.filterable)F.value=!1,(x=a.value)===null||x===void 0||x.blur(),(z=r.value)===null||z===void 0||z.blur();else if(e.multiple){const{value:le}=i;le==null||le.blur()}else{const{value:le}=u;le==null||le.blur()}}function ye(){var x,z,le;e.filterable?(F.value=!1,(x=a.value)===null||x===void 0||x.focus()):e.multiple?(z=i.value)===null||z===void 0||z.focus():(le=u.value)===null||le===void 0||le.focus()}function ue(){const{value:x}=r;x&&(_(),x.focus())}function ze(){const{value:x}=r;x&&x.blur()}function De(x){const{value:z}=d;z&&z.setTextContent(`+${x}`)}function xe(){const{value:x}=m;return x}function Oe(){return r.value}let Se=null;function ge(){Se!==null&&window.clearTimeout(Se)}function Fe(){e.active||(ge(),Se=window.setTimeout(()=>{B.value&&(f.value=!0)},100))}function we(){ge()}function je(x){x||(ge(),f.value=!1)}Be(B,x=>{x||(f.value=!1)}),Xe(()=>{Qo(()=>{const x=a.value;x&&(e.disabled?x.removeAttribute("tabindex"):x.tabIndex=F.value?-1:0)})}),ao(h,e.onResize);const{inlineThemeDisabled:Le}=e,Ee=E(()=>{const{size:x}=e,{common:{cubicBezierEaseInOut:z},self:{fontWeight:le,borderRadius:ht,color:vt,placeholderColor:Qe,textColor:et,paddingSingle:tt,paddingMultiple:gt,caretColor:bt,colorDisabled:ot,textColorDisabled:Pe,placeholderColorDisabled:s,colorActive:k,boxShadowFocus:I,boxShadowActive:K,boxShadowHover:W,border:L,borderFocus:j,borderHover:ie,borderActive:ke,arrowColor:po,arrowColorDisabled:mo,loadingColor:yo,colorActiveWarning:xo,boxShadowFocusWarning:wo,boxShadowActiveWarning:Co,boxShadowHoverWarning:So,borderWarning:ko,borderFocusWarning:Ro,borderHoverWarning:Fo,borderActiveWarning:To,colorActiveError:zo,boxShadowFocusError:Oo,boxShadowActiveError:Po,boxShadowHoverError:Io,borderError:Bo,borderFocusError:Mo,borderHoverError:Eo,borderActiveError:$o,clearColor:Ao,clearColorHover:_o,clearColorPressed:Do,clearSize:Lo,arrowSize:Ho,[oe("height",x)]:No,[oe("fontSize",x)]:Wo}}=w.value,nt=We(tt),rt=We(gt);return{"--n-bezier":z,"--n-border":L,"--n-border-active":ke,"--n-border-focus":j,"--n-border-hover":ie,"--n-border-radius":ht,"--n-box-shadow-active":K,"--n-box-shadow-focus":I,"--n-box-shadow-hover":W,"--n-caret-color":bt,"--n-color":vt,"--n-color-active":k,"--n-color-disabled":ot,"--n-font-size":Wo,"--n-height":No,"--n-padding-single-top":nt.top,"--n-padding-multiple-top":rt.top,"--n-padding-single-right":nt.right,"--n-padding-multiple-right":rt.right,"--n-padding-single-left":nt.left,"--n-padding-multiple-left":rt.left,"--n-padding-single-bottom":nt.bottom,"--n-padding-multiple-bottom":rt.bottom,"--n-placeholder-color":Qe,"--n-placeholder-color-disabled":s,"--n-text-color":et,"--n-text-color-disabled":Pe,"--n-arrow-color":po,"--n-arrow-color-disabled":mo,"--n-loading-color":yo,"--n-color-active-warning":xo,"--n-box-shadow-focus-warning":wo,"--n-box-shadow-active-warning":Co,"--n-box-shadow-hover-warning":So,"--n-border-warning":ko,"--n-border-focus-warning":Ro,"--n-border-hover-warning":Fo,"--n-border-active-warning":To,"--n-color-active-error":zo,"--n-box-shadow-focus-error":Oo,"--n-box-shadow-active-error":Po,"--n-box-shadow-hover-error":Io,"--n-border-error":Bo,"--n-border-focus-error":Mo,"--n-border-hover-error":Eo,"--n-border-active-error":$o,"--n-clear-size":Lo,"--n-clear-color":Ao,"--n-clear-color-hover":_o,"--n-clear-color-pressed":Do,"--n-arrow-size":Ho,"--n-font-weight":le}}),fe=Le?Je("internal-selection",E(()=>e.size[0]),Ee,e):void 0;return{mergedTheme:w,mergedClearable:c,mergedClsPrefix:t,rtlEnabled:n,patternInputFocused:F,filterablePlaceholder:b,label:O,selected:B,showTagsPanel:f,isComposing:te,counterRef:d,counterWrapperRef:m,patternInputMirrorRef:l,patternInputRef:r,selfRef:h,multipleElRef:i,singleElRef:u,patternInputWrapperRef:a,overflowRef:C,inputTagElRef:v,handleMouseDown:Z,handleFocusin:T,handleClear:G,handleMouseEnter:J,handleMouseLeave:Y,handleDeleteOption:U,handlePatternKeyDown:y,handlePatternInputInput:N,handlePatternInputBlur:ve,handlePatternInputFocus:me,handleMouseEnterCounter:Fe,handleMouseLeaveCounter:we,handleFocusout:$,handleCompositionEnd:pe,handleCompositionStart:se,onPopoverUpdateShow:je,focus:ye,focusInput:ue,blur:ce,blurInput:ze,updateCounter:De,getCounter:xe,getTail:Oe,renderLabel:e.renderLabel,cssVars:Le?void 0:Ee,themeClass:fe==null?void 0:fe.themeClass,onRender:fe==null?void 0:fe.onRender}},render(){const{status:e,multiple:t,size:o,disabled:n,filterable:l,maxTagCount:r,bordered:h,clsPrefix:i,ellipsisTagPopoverProps:u,onRender:a,renderTag:d,renderLabel:m}=this;a==null||a();const C=r==="responsive",v=typeof r=="number",f=C||v,F=g(tn,null,{default:()=>g(en,{clsPrefix:i,loading:this.loading,showArrow:this.showArrow,showClear:this.mergedClearable&&this.selected,onClear:this.handleClear},{default:()=>{var w,c;return(c=(w=this.$slots).arrow)===null||c===void 0?void 0:c.call(w)}})});let R;if(t){const{labelField:w}=this,c=p=>g("div",{class:`${i}-base-selection-tag-wrapper`,key:p.value},d?d({option:p,handleClose:()=>{this.handleDeleteOption(p)}}):g(wt,{size:o,closable:!p.disabled,disabled:n,onClose:()=>{this.handleDeleteOption(p)},internalCloseIsButtonTag:!1,internalCloseFocusable:!1},{default:()=>m?m(p,!0):Ne(p[w],p,!0)})),b=()=>(v?this.selectedOptions.slice(0,r):this.selectedOptions).map(c),O=l?g("div",{class:`${i}-base-selection-input-tag`,ref:"inputTagElRef",key:"__input-tag__"},g("input",Object.assign({},this.inputProps,{ref:"patternInputRef",tabindex:-1,disabled:n,value:this.pattern,autofocus:this.autofocus,class:`${i}-base-selection-input-tag__input`,onBlur:this.handlePatternInputBlur,onFocus:this.handlePatternInputFocus,onKeydown:this.handlePatternKeyDown,onInput:this.handlePatternInputInput,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd})),g("span",{ref:"patternInputMirrorRef",class:`${i}-base-selection-input-tag__mirror`},this.pattern)):null,B=C?()=>g("div",{class:`${i}-base-selection-tag-wrapper`,ref:"counterWrapperRef"},g(wt,{size:o,ref:"counterRef",onMouseenter:this.handleMouseEnterCounter,onMouseleave:this.handleMouseLeaveCounter,disabled:n})):void 0;let q;if(v){const p=this.selectedOptions.length-r;p>0&&(q=g("div",{class:`${i}-base-selection-tag-wrapper`,key:"__counter__"},g(wt,{size:o,ref:"counterRef",onMouseenter:this.handleMouseEnterCounter,disabled:n},{default:()=>`+${p}`})))}const A=C?l?g(Wt,{ref:"overflowRef",updateCounter:this.updateCounter,getCounter:this.getCounter,getTail:this.getTail,style:{width:"100%",display:"flex",overflow:"hidden"}},{default:b,counter:B,tail:()=>O}):g(Wt,{ref:"overflowRef",updateCounter:this.updateCounter,getCounter:this.getCounter,style:{width:"100%",display:"flex",overflow:"hidden"}},{default:b,counter:B}):v&&q?b().concat(q):b(),_=f?()=>g("div",{class:`${i}-base-selection-popover`},C?b():this.selectedOptions.map(c)):void 0,D=f?Object.assign({show:this.showTagsPanel,trigger:"hover",overlap:!0,placement:"top",width:"trigger",onUpdateShow:this.onPopoverUpdateShow,theme:this.mergedTheme.peers.Popover,themeOverrides:this.mergedTheme.peerOverrides.Popover},u):null,ee=(this.selected?!1:this.active?!this.pattern&&!this.isComposing:!0)?g("div",{class:`${i}-base-selection-placeholder ${i}-base-selection-overlay`},g("div",{class:`${i}-base-selection-placeholder__inner`},this.placeholder)):null,ne=l?g("div",{ref:"patternInputWrapperRef",class:`${i}-base-selection-tags`},A,C?null:O,F):g("div",{ref:"multipleElRef",class:`${i}-base-selection-tags`,tabindex:n?void 0:0},A,F);R=g(Rt,null,f?g(wn,Object.assign({},D,{scrollable:!0,style:"max-height: calc(var(--v-target-height) * 6.6);"}),{trigger:()=>ne,default:_}):ne,ee)}else if(l){const w=this.pattern||this.isComposing,c=this.active?!w:!this.selected,b=this.active?!1:this.selected;R=g("div",{ref:"patternInputWrapperRef",class:`${i}-base-selection-label`,title:this.patternInputFocused?void 0:jt(this.label)},g("input",Object.assign({},this.inputProps,{ref:"patternInputRef",class:`${i}-base-selection-input`,value:this.active?this.pattern:"",placeholder:"",readonly:n,disabled:n,tabindex:-1,autofocus:this.autofocus,onFocus:this.handlePatternInputFocus,onBlur:this.handlePatternInputBlur,onInput:this.handlePatternInputInput,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd})),b?g("div",{class:`${i}-base-selection-label__render-label ${i}-base-selection-overlay`,key:"input"},g("div",{class:`${i}-base-selection-overlay__wrapper`},d?d({option:this.selectedOption,handleClose:()=>{}}):m?m(this.selectedOption,!0):Ne(this.label,this.selectedOption,!0))):null,c?g("div",{class:`${i}-base-selection-placeholder ${i}-base-selection-overlay`,key:"placeholder"},g("div",{class:`${i}-base-selection-overlay__wrapper`},this.filterablePlaceholder)):null,F)}else R=g("div",{ref:"singleElRef",class:`${i}-base-selection-label`,tabindex:this.disabled?void 0:0},this.label!==void 0?g("div",{class:`${i}-base-selection-input`,title:jt(this.label),key:"input"},g("div",{class:`${i}-base-selection-input__content`},d?d({option:this.selectedOption,handleClose:()=>{}}):m?m(this.selectedOption,!0):Ne(this.label,this.selectedOption,!0))):g("div",{class:`${i}-base-selection-placeholder ${i}-base-selection-overlay`,key:"placeholder"},g("div",{class:`${i}-base-selection-placeholder__inner`},this.placeholder)),F);return g("div",{ref:"selfRef",class:[`${i}-base-selection`,this.rtlEnabled&&`${i}-base-selection--rtl`,this.themeClass,e&&`${i}-base-selection--${e}-status`,{[`${i}-base-selection--active`]:this.active,[`${i}-base-selection--selected`]:this.selected||this.active&&this.pattern,[`${i}-base-selection--disabled`]:this.disabled,[`${i}-base-selection--multiple`]:this.multiple,[`${i}-base-selection--focus`]:this.focused}],style:this.cssVars,onClick:this.onClick,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onKeydown:this.onKeydown,onFocusin:this.handleFocusin,onFocusout:this.handleFocusout,onMousedown:this.handleMouseDown},R,h?g("div",{class:`${i}-base-selection__border`}):null,h?g("div",{class:`${i}-base-selection__state-border`}):null)}});function dt(e){return e.type==="group"}function fo(e){return e.type==="ignored"}function Ct(e,t){try{return!!(1+t.toString().toLowerCase().indexOf(e.trim().toLowerCase()))}catch{return!1}}function ir(e,t){return{getIsGroup:dt,getIgnored:fo,getKey(n){return dt(n)?n.name||n.key||"key-required":n[e]},getChildren(n){return n[t]}}}function ar(e,t,o,n){if(!t)return e;function l(r){if(!Array.isArray(r))return[];const h=[];for(const i of r)if(dt(i)){const u=l(i[n]);u.length&&h.push(Object.assign({},i,{[n]:u}))}else{if(fo(i))continue;t(o,i)&&h.push(i)}return h}return l(e)}function sr(e,t,o){const n=new Map;return e.forEach(l=>{dt(l)?l[o].forEach(r=>{n.set(r[t],r)}):n.set(l[t],l)}),n}function cr(e){const{boxShadow2:t}=e;return{menuBoxShadow:t}}const dr=Pt({name:"Select",common:Ye,peers:{InternalSelection:uo,InternalSelectMenu:co},self:cr}),ur=he([V("select",`
 z-index: auto;
 outline: none;
 width: 100%;
 position: relative;
 font-weight: var(--n-font-weight);
 `),V("select-menu",`
 margin: 4px 0;
 box-shadow: var(--n-menu-box-shadow);
 `,[no({originalTransition:"background-color .3s var(--n-bezier), box-shadow .3s var(--n-bezier)"})])]),fr=Object.assign(Object.assign({},Re.props),{to:Ft.propTo,bordered:{type:Boolean,default:void 0},clearable:Boolean,clearFilterAfterSelect:{type:Boolean,default:!0},options:{type:Array,default:()=>[]},defaultValue:{type:[String,Number,Array],default:null},keyboard:{type:Boolean,default:!0},value:[String,Number,Array],placeholder:String,menuProps:Object,multiple:Boolean,size:String,menuSize:{type:String},filterable:Boolean,disabled:{type:Boolean,default:void 0},remote:Boolean,loading:Boolean,filter:Function,placement:{type:String,default:"bottom-start"},widthMode:{type:String,default:"trigger"},tag:Boolean,onCreate:Function,fallbackOption:{type:[Function,Boolean],default:void 0},show:{type:Boolean,default:void 0},showArrow:{type:Boolean,default:!0},maxTagCount:[Number,String],ellipsisTagPopoverProps:Object,consistentMenuWidth:{type:Boolean,default:!0},virtualScroll:{type:Boolean,default:!0},labelField:{type:String,default:"label"},valueField:{type:String,default:"value"},childrenField:{type:String,default:"children"},renderLabel:Function,renderOption:Function,renderTag:Function,"onUpdate:value":[Function,Array],inputProps:Object,nodeProps:Function,ignoreComposition:{type:Boolean,default:!0},showOnFocus:Boolean,onUpdateValue:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onFocus:[Function,Array],onScroll:[Function,Array],onSearch:[Function,Array],onUpdateShow:[Function,Array],"onUpdate:show":[Function,Array],displayDirective:{type:String,default:"show"},resetMenuOnOptionsChange:{type:Boolean,default:!0},status:String,showCheckmark:{type:Boolean,default:!0},onChange:[Function,Array],items:Array}),He=be({name:"Select",props:fr,slots:Object,setup(e){const{mergedClsPrefixRef:t,mergedBorderedRef:o,namespaceRef:n,inlineThemeDisabled:l}=Ze(e),r=Re("Select","-select",ur,dr,e,t),h=M(e.defaultValue),i=ae(e,"value"),u=At(i,h),a=M(!1),d=M(""),m=Cn(e,["items","options"]),C=M([]),v=M([]),f=E(()=>v.value.concat(C.value).concat(m.value)),F=E(()=>{const{filter:s}=e;if(s)return s;const{labelField:k,valueField:I}=e;return(K,W)=>{if(!W)return!1;const L=W[k];if(typeof L=="string")return Ct(K,L);const j=W[I];return typeof j=="string"?Ct(K,j):typeof j=="number"?Ct(K,String(j)):!1}}),R=E(()=>{if(e.remote)return m.value;{const{value:s}=f,{value:k}=d;return!k.length||!e.filterable?s:ar(s,F.value,k,e.childrenField)}}),w=E(()=>{const{valueField:s,childrenField:k}=e,I=ir(s,k);return Tn(R.value,I)}),c=E(()=>sr(f.value,e.valueField,e.childrenField)),b=M(!1),O=At(ae(e,"show"),b),B=M(null),q=M(null),A=M(null),{localeRef:_}=eo("Select"),D=E(()=>{var s;return(s=e.placeholder)!==null&&s!==void 0?s:_.value.placeholder}),Q=[],ee=M(new Map),ne=E(()=>{const{fallbackOption:s}=e;if(s===void 0){const{labelField:k,valueField:I}=e;return K=>({[k]:String(K),[I]:K})}return s===!1?!1:k=>Object.assign(s(k),{value:k})});function p(s){const k=e.remote,{value:I}=ee,{value:K}=c,{value:W}=ne,L=[];return s.forEach(j=>{if(K.has(j))L.push(K.get(j));else if(k&&I.has(j))L.push(I.get(j));else if(W){const ie=W(j);ie&&L.push(ie)}}),L}const T=E(()=>{if(e.multiple){const{value:s}=u;return Array.isArray(s)?p(s):[]}return null}),$=E(()=>{const{value:s}=u;return!e.multiple&&!Array.isArray(s)?s===null?null:p([s])[0]||null:null}),G=on(e),{mergedSizeRef:J,mergedDisabledRef:Y,mergedStatusRef:Z}=G;function U(s,k){const{onChange:I,"onUpdate:value":K,onUpdateValue:W}=e,{nTriggerFormChange:L,nTriggerFormInput:j}=G;I&&Ce(I,s,k),W&&Ce(W,s,k),K&&Ce(K,s,k),h.value=s,L(),j()}function te(s){const{onBlur:k}=e,{nTriggerFormBlur:I}=G;k&&Ce(k,s),I()}function y(){const{onClear:s}=e;s&&Ce(s)}function S(s){const{onFocus:k,showOnFocus:I}=e,{nTriggerFormFocus:K}=G;k&&Ce(k,s),K(),I&&ve()}function N(s){const{onSearch:k}=e;k&&Ce(k,s)}function se(s){const{onScroll:k}=e;k&&Ce(k,s)}function pe(){var s;const{remote:k,multiple:I}=e;if(k){const{value:K}=ee;if(I){const{valueField:W}=e;(s=T.value)===null||s===void 0||s.forEach(L=>{K.set(L[W],L)})}else{const W=$.value;W&&K.set(W[e.valueField],W)}}}function me(s){const{onUpdateShow:k,"onUpdate:show":I}=e;k&&Ce(k,s),I&&Ce(I,s),b.value=s}function ve(){Y.value||(me(!0),b.value=!0,e.filterable&&tt())}function ce(){me(!1)}function ye(){d.value="",v.value=Q}const ue=M(!1);function ze(){e.filterable&&(ue.value=!0)}function De(){e.filterable&&(ue.value=!1,O.value||ye())}function xe(){Y.value||(O.value?e.filterable?tt():ce():ve())}function Oe(s){var k,I;!((I=(k=A.value)===null||k===void 0?void 0:k.selfRef)===null||I===void 0)&&I.contains(s.relatedTarget)||(a.value=!1,te(s),ce())}function Se(s){S(s),a.value=!0}function ge(){a.value=!0}function Fe(s){var k;!((k=B.value)===null||k===void 0)&&k.$el.contains(s.relatedTarget)||(a.value=!1,te(s),ce())}function we(){var s;(s=B.value)===null||s===void 0||s.focus(),ce()}function je(s){var k;O.value&&(!((k=B.value)===null||k===void 0)&&k.$el.contains(an(s))||ce())}function Le(s){if(!Array.isArray(s))return[];if(ne.value)return Array.from(s);{const{remote:k}=e,{value:I}=c;if(k){const{value:K}=ee;return s.filter(W=>I.has(W)||K.has(W))}else return s.filter(K=>I.has(K))}}function Ee(s){fe(s.rawNode)}function fe(s){if(Y.value)return;const{tag:k,remote:I,clearFilterAfterSelect:K,valueField:W}=e;if(k&&!I){const{value:L}=v,j=L[0]||null;if(j){const ie=C.value;ie.length?ie.push(j):C.value=[j],v.value=Q}}if(I&&ee.value.set(s[W],s),e.multiple){const L=Le(u.value),j=L.findIndex(ie=>ie===s[W]);if(~j){if(L.splice(j,1),k&&!I){const ie=x(s[W]);~ie&&(C.value.splice(ie,1),K&&(d.value=""))}}else L.push(s[W]),K&&(d.value="");U(L,p(L))}else{if(k&&!I){const L=x(s[W]);~L?C.value=[C.value[L]]:C.value=Q}et(),ce(),U(s[W],s)}}function x(s){return C.value.findIndex(I=>I[e.valueField]===s)}function z(s){O.value||ve();const{value:k}=s.target;d.value=k;const{tag:I,remote:K}=e;if(N(k),I&&!K){if(!k){v.value=Q;return}const{onCreate:W}=e,L=W?W(k):{[e.labelField]:k,[e.valueField]:k},{valueField:j,labelField:ie}=e;m.value.some(ke=>ke[j]===L[j]||ke[ie]===L[ie])||C.value.some(ke=>ke[j]===L[j]||ke[ie]===L[ie])?v.value=Q:v.value=[L]}}function le(s){s.stopPropagation();const{multiple:k}=e;!k&&e.filterable&&ce(),y(),k?U([],[]):U(null,null)}function ht(s){!Ge(s,"action")&&!Ge(s,"empty")&&!Ge(s,"header")&&s.preventDefault()}function vt(s){se(s)}function Qe(s){var k,I,K,W,L;if(!e.keyboard){s.preventDefault();return}switch(s.key){case" ":if(e.filterable)break;s.preventDefault();case"Enter":if(!(!((k=B.value)===null||k===void 0)&&k.isComposing)){if(O.value){const j=(I=A.value)===null||I===void 0?void 0:I.getPendingTmNode();j?Ee(j):e.filterable||(ce(),et())}else if(ve(),e.tag&&ue.value){const j=v.value[0];if(j){const ie=j[e.valueField],{value:ke}=u;e.multiple&&Array.isArray(ke)&&ke.includes(ie)||fe(j)}}}s.preventDefault();break;case"ArrowUp":if(s.preventDefault(),e.loading)return;O.value&&((K=A.value)===null||K===void 0||K.prev());break;case"ArrowDown":if(s.preventDefault(),e.loading)return;O.value?(W=A.value)===null||W===void 0||W.next():ve();break;case"Escape":O.value&&(sn(s),ce()),(L=B.value)===null||L===void 0||L.focus();break}}function et(){var s;(s=B.value)===null||s===void 0||s.focus()}function tt(){var s;(s=B.value)===null||s===void 0||s.focusInput()}function gt(){var s;O.value&&((s=q.value)===null||s===void 0||s.syncPosition())}pe(),Be(ae(e,"options"),pe);const bt={focus:()=>{var s;(s=B.value)===null||s===void 0||s.focus()},focusInput:()=>{var s;(s=B.value)===null||s===void 0||s.focusInput()},blur:()=>{var s;(s=B.value)===null||s===void 0||s.blur()},blurInput:()=>{var s;(s=B.value)===null||s===void 0||s.blurInput()}},ot=E(()=>{const{self:{menuBoxShadow:s}}=r.value;return{"--n-menu-box-shadow":s}}),Pe=l?Je("select",void 0,ot,e):void 0;return Object.assign(Object.assign({},bt),{mergedStatus:Z,mergedClsPrefix:t,mergedBordered:o,namespace:n,treeMate:w,isMounted:nn(),triggerRef:B,menuRef:A,pattern:d,uncontrolledShow:b,mergedShow:O,adjustedTo:Ft(e),uncontrolledValue:h,mergedValue:u,followerRef:q,localizedPlaceholder:D,selectedOption:$,selectedOptions:T,mergedSize:J,mergedDisabled:Y,focused:a,activeWithoutMenuOpen:ue,inlineThemeDisabled:l,onTriggerInputFocus:ze,onTriggerInputBlur:De,handleTriggerOrMenuResize:gt,handleMenuFocus:ge,handleMenuBlur:Fe,handleMenuTabOut:we,handleTriggerClick:xe,handleToggle:Ee,handleDeleteOption:fe,handlePatternInput:z,handleClear:le,handleTriggerBlur:Oe,handleTriggerFocus:Se,handleKeydown:Qe,handleMenuAfterLeave:ye,handleMenuClickOutside:je,handleMenuScroll:vt,handleMenuKeydown:Qe,handleMenuMousedown:ht,mergedTheme:r,cssVars:l?void 0:ot,themeClass:Pe==null?void 0:Pe.themeClass,onRender:Pe==null?void 0:Pe.onRender})},render(){return g("div",{class:`${this.mergedClsPrefix}-select`},g(Sn,null,{default:()=>[g(kn,null,{default:()=>g(lr,{ref:"triggerRef",inlineThemeDisabled:this.inlineThemeDisabled,status:this.mergedStatus,inputProps:this.inputProps,clsPrefix:this.mergedClsPrefix,showArrow:this.showArrow,maxTagCount:this.maxTagCount,ellipsisTagPopoverProps:this.ellipsisTagPopoverProps,bordered:this.mergedBordered,active:this.activeWithoutMenuOpen||this.mergedShow,pattern:this.pattern,placeholder:this.localizedPlaceholder,selectedOption:this.selectedOption,selectedOptions:this.selectedOptions,multiple:this.multiple,renderTag:this.renderTag,renderLabel:this.renderLabel,filterable:this.filterable,clearable:this.clearable,disabled:this.mergedDisabled,size:this.mergedSize,theme:this.mergedTheme.peers.InternalSelection,labelField:this.labelField,valueField:this.valueField,themeOverrides:this.mergedTheme.peerOverrides.InternalSelection,loading:this.loading,focused:this.focused,onClick:this.handleTriggerClick,onDeleteOption:this.handleDeleteOption,onPatternInput:this.handlePatternInput,onClear:this.handleClear,onBlur:this.handleTriggerBlur,onFocus:this.handleTriggerFocus,onKeydown:this.handleKeydown,onPatternBlur:this.onTriggerInputBlur,onPatternFocus:this.onTriggerInputFocus,onResize:this.handleTriggerOrMenuResize,ignoreComposition:this.ignoreComposition},{arrow:()=>{var e,t;return[(t=(e=this.$slots).arrow)===null||t===void 0?void 0:t.call(e)]}})}),g(Rn,{ref:"followerRef",show:this.mergedShow,to:this.adjustedTo,teleportDisabled:this.adjustedTo===Ft.tdkey,containerClass:this.namespace,width:this.consistentMenuWidth?"target":void 0,minWidth:"target",placement:this.placement},{default:()=>g(oo,{name:"fade-in-scale-up-transition",appear:this.isMounted,onAfterLeave:this.handleMenuAfterLeave},{default:()=>{var e,t,o;return this.mergedShow||this.displayDirective==="show"?((e=this.onRender)===null||e===void 0||e.call(this),rn(g(Gn,Object.assign({},this.menuProps,{ref:"menuRef",onResize:this.handleTriggerOrMenuResize,inlineThemeDisabled:this.inlineThemeDisabled,virtualScroll:this.consistentMenuWidth&&this.virtualScroll,class:[`${this.mergedClsPrefix}-select-menu`,this.themeClass,(t=this.menuProps)===null||t===void 0?void 0:t.class],clsPrefix:this.mergedClsPrefix,focusable:!0,labelField:this.labelField,valueField:this.valueField,autoPending:!0,nodeProps:this.nodeProps,theme:this.mergedTheme.peers.InternalSelectMenu,themeOverrides:this.mergedTheme.peerOverrides.InternalSelectMenu,treeMate:this.treeMate,multiple:this.multiple,size:this.menuSize,renderOption:this.renderOption,renderLabel:this.renderLabel,value:this.mergedValue,style:[(o=this.menuProps)===null||o===void 0?void 0:o.style,this.cssVars],onToggle:this.handleToggle,onScroll:this.handleMenuScroll,onFocus:this.handleMenuFocus,onBlur:this.handleMenuBlur,onKeydown:this.handleMenuKeydown,onTabOut:this.handleMenuTabOut,onMousedown:this.handleMenuMousedown,show:this.mergedShow,showCheckmark:this.showCheckmark,resetMenuOnOptionsChange:this.resetMenuOnOptionsChange}),{empty:()=>{var n,l;return[(l=(n=this.$slots).empty)===null||l===void 0?void 0:l.call(n)]},header:()=>{var n,l;return[(l=(n=this.$slots).header)===null||l===void 0?void 0:l.call(n)]},action:()=>{var n,l;return[(l=(n=this.$slots).action)===null||l===void 0?void 0:l.call(n)]}}),this.displayDirective==="show"?[[ln,this.mergedShow],[_t,this.handleMenuClickOutside,void 0,{capture:!0}]]:[[_t,this.handleMenuClickOutside,void 0,{capture:!0}]])):null}})})]}))}});/*!
 * Compressor.js v1.2.1
 * https://fengyuanchen.github.io/compressorjs
 *
 * Copyright 2018-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2023-02-28T14:09:41.732Z
 */function Kt(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),o.push.apply(o,n)}return o}function it(e){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?arguments[t]:{};t%2?Kt(Object(o),!0).forEach(function(n){gr(e,n,o[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Kt(Object(o)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))})}return e}function hr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qt(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ho(n.key),n)}}function vr(e,t,o){return t&&qt(e.prototype,t),o&&qt(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function gr(e,t,o){return t=ho(t),t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function ut(){return ut=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},ut.apply(this,arguments)}function br(e,t){if(typeof e!="object"||e===null)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var n=o.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ho(e){var t=br(e,"string");return typeof t=="symbol"?t:String(t)}var vo={exports:{}};(function(e){typeof window>"u"||function(t){var o=t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype,n=t.Blob&&function(){try{return!!new Blob}catch{return!1}}(),l=n&&t.Uint8Array&&function(){try{return new Blob([new Uint8Array(100)]).size===100}catch{return!1}}(),r=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||t.MSBlobBuilder,h=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,i=(n||r)&&t.atob&&t.ArrayBuffer&&t.Uint8Array&&function(u){var a,d,m,C,v,f,F,R,w;if(a=u.match(h),!a)throw new Error("invalid data URI");for(d=a[2]?a[1]:"text/plain"+(a[3]||";charset=US-ASCII"),m=!!a[4],C=u.slice(a[0].length),m?v=atob(C):v=decodeURIComponent(C),f=new ArrayBuffer(v.length),F=new Uint8Array(f),R=0;R<v.length;R+=1)F[R]=v.charCodeAt(R);return n?new Blob([l?F:f],{type:d}):(w=new r,w.append(f),w.getBlob(d))};t.HTMLCanvasElement&&!o.toBlob&&(o.mozGetAsFile?o.toBlob=function(u,a,d){var m=this;setTimeout(function(){d&&o.toDataURL&&i?u(i(m.toDataURL(a,d))):u(m.mozGetAsFile("blob",a))})}:o.toDataURL&&i&&(o.msToBlob?o.toBlob=function(u,a,d){var m=this;setTimeout(function(){(a&&a!=="image/png"||d)&&o.toDataURL&&i?u(i(m.toDataURL(a,d))):u(m.msToBlob(a))})}:o.toBlob=function(u,a,d){var m=this;setTimeout(function(){u(i(m.toDataURL(a,d)))})})),e.exports?e.exports=i:t.dataURLtoBlob=i}(window)})(vo);var Gt=vo.exports,pr=function(t){return typeof Blob>"u"?!1:t instanceof Blob||Object.prototype.toString.call(t)==="[object Blob]"},Xt={strict:!0,checkOrientation:!0,retainExif:!1,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},mr=typeof window<"u"&&typeof window.document<"u",Me=mr?window:{},ft=function(t){return t>0&&t<1/0},yr=Array.prototype.slice;function Mt(e){return Array.from?Array.from(e):yr.call(e)}var xr=/^image\/.+$/;function Tt(e){return xr.test(e)}function wr(e){var t=Tt(e)?e.substr(6):"";return t==="jpeg"&&(t="jpg"),".".concat(t)}var go=String.fromCharCode;function Cr(e,t,o){var n="",l;for(o+=t,l=t;l<o;l+=1)n+=go(e.getUint8(l));return n}var Sr=Me.btoa;function Yt(e,t){for(var o=[],n=8192,l=new Uint8Array(e);l.length>0;)o.push(go.apply(null,Mt(l.subarray(0,n)))),l=l.subarray(n);return"data:".concat(t,";base64,").concat(Sr(o.join("")))}function kr(e){var t=new DataView(e),o;try{var n,l,r;if(t.getUint8(0)===255&&t.getUint8(1)===216)for(var h=t.byteLength,i=2;i+1<h;){if(t.getUint8(i)===255&&t.getUint8(i+1)===225){l=i;break}i+=1}if(l){var u=l+4,a=l+10;if(Cr(t,u,4)==="Exif"){var d=t.getUint16(a);if(n=d===18761,(n||d===19789)&&t.getUint16(a+2,n)===42){var m=t.getUint32(a+4,n);m>=8&&(r=a+m)}}}if(r){var C=t.getUint16(r,n),v,f;for(f=0;f<C;f+=1)if(v=r+f*12+2,t.getUint16(v,n)===274){v+=8,o=t.getUint16(v,n),t.setUint16(v,1,n);break}}}catch{o=1}return o}function Rr(e){var t=0,o=1,n=1;switch(e){case 2:o=-1;break;case 3:t=-180;break;case 4:n=-1;break;case 5:t=90,n=-1;break;case 6:t=90;break;case 7:t=90,o=-1;break;case 8:t=-90;break}return{rotate:t,scaleX:o,scaleY:n}}var Fr=/\.\d*(?:0|9){12}\d*$/;function Zt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return Fr.test(e)?Math.round(e*t)/t:e}function Ke(e){var t=e.aspectRatio,o=e.height,n=e.width,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none",r=ft(n),h=ft(o);if(r&&h){var i=o*t;(l==="contain"||l==="none")&&i>n||l==="cover"&&i<n?o=n/t:n=o*t}else r?o=n/t:h&&(n=o*t);return{width:n,height:o}}function Tr(e){for(var t=Mt(new Uint8Array(e)),o=t.length,n=[],l=0;l+3<o;){var r=t[l],h=t[l+1];if(r===255&&h===218)break;if(r===255&&h===216)l+=2;else{var i=t[l+2]*256+t[l+3],u=l+i+2,a=t.slice(l,u);n.push(a),l=u}}return n.reduce(function(d,m){return m[0]===255&&m[1]===225?d.concat(m):d},[])}function zr(e,t){var o=Mt(new Uint8Array(e));if(o[2]!==255||o[3]!==224)return e;var n=o[4]*256+o[5],l=[255,216].concat(t,o.slice(4+n));return new Uint8Array(l)}var Or=Me.ArrayBuffer,St=Me.FileReader,$e=Me.URL||Me.webkitURL,Pr=/\.\w+$/,Ir=Me.Compressor,Br=function(){function e(t,o){hr(this,e),this.file=t,this.exif=[],this.image=new Image,this.options=it(it({},Xt),o),this.aborted=!1,this.result=null,this.init()}return vr(e,[{key:"init",value:function(){var o=this,n=this.file,l=this.options;if(!pr(n)){this.fail(new Error("The first argument must be a File or Blob object."));return}var r=n.type;if(!Tt(r)){this.fail(new Error("The first argument must be an image File or Blob object."));return}if(!$e||!St){this.fail(new Error("The current browser does not support image compression."));return}Or||(l.checkOrientation=!1,l.retainExif=!1);var h=r==="image/jpeg",i=h&&l.checkOrientation,u=h&&l.retainExif;if($e&&!i&&!u)this.load({url:$e.createObjectURL(n)});else{var a=new St;this.reader=a,a.onload=function(d){var m=d.target,C=m.result,v={},f=1;i&&(f=kr(C),f>1&&ut(v,Rr(f))),u&&(o.exif=Tr(C)),i||u?!$e||f>1?v.url=Yt(C,r):v.url=$e.createObjectURL(n):v.url=C,o.load(v)},a.onabort=function(){o.fail(new Error("Aborted to read the image with FileReader."))},a.onerror=function(){o.fail(new Error("Failed to read the image with FileReader."))},a.onloadend=function(){o.reader=null},i||u?a.readAsArrayBuffer(n):a.readAsDataURL(n)}}},{key:"load",value:function(o){var n=this,l=this.file,r=this.image;r.onload=function(){n.draw(it(it({},o),{},{naturalWidth:r.naturalWidth,naturalHeight:r.naturalHeight}))},r.onabort=function(){n.fail(new Error("Aborted to load the image."))},r.onerror=function(){n.fail(new Error("Failed to load the image."))},Me.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(Me.navigator.userAgent)&&(r.crossOrigin="anonymous"),r.alt=l.name,r.src=o.url}},{key:"draw",value:function(o){var n=this,l=o.naturalWidth,r=o.naturalHeight,h=o.rotate,i=h===void 0?0:h,u=o.scaleX,a=u===void 0?1:u,d=o.scaleY,m=d===void 0?1:d,C=this.file,v=this.image,f=this.options,F=document.createElement("canvas"),R=F.getContext("2d"),w=Math.abs(i)%180===90,c=(f.resize==="contain"||f.resize==="cover")&&ft(f.width)&&ft(f.height),b=Math.max(f.maxWidth,0)||1/0,O=Math.max(f.maxHeight,0)||1/0,B=Math.max(f.minWidth,0)||0,q=Math.max(f.minHeight,0)||0,A=l/r,_=f.width,D=f.height;if(w){var Q=[O,b];b=Q[0],O=Q[1];var ee=[q,B];B=ee[0],q=ee[1];var ne=[D,_];_=ne[0],D=ne[1]}c&&(A=_/D);var p=Ke({aspectRatio:A,width:b,height:O},"contain");b=p.width,O=p.height;var T=Ke({aspectRatio:A,width:B,height:q},"cover");if(B=T.width,q=T.height,c){var $=Ke({aspectRatio:A,width:_,height:D},f.resize);_=$.width,D=$.height}else{var G=Ke({aspectRatio:A,width:_,height:D}),J=G.width;_=J===void 0?l:J;var Y=G.height;D=Y===void 0?r:Y}_=Math.floor(Zt(Math.min(Math.max(_,B),b))),D=Math.floor(Zt(Math.min(Math.max(D,q),O)));var Z=-_/2,U=-D/2,te=_,y=D,S=[];if(c){var N=0,se=0,pe=l,me=r,ve=Ke({aspectRatio:A,width:l,height:r},{contain:"cover",cover:"contain"}[f.resize]);pe=ve.width,me=ve.height,N=(l-pe)/2,se=(r-me)/2,S.push(N,se,pe,me)}if(S.push(Z,U,te,y),w){var ce=[D,_];_=ce[0],D=ce[1]}F.width=_,F.height=D,Tt(f.mimeType)||(f.mimeType=C.type);var ye="transparent";C.size>f.convertSize&&f.convertTypes.indexOf(f.mimeType)>=0&&(f.mimeType="image/jpeg");var ue=f.mimeType==="image/jpeg";if(ue&&(ye="#fff"),R.fillStyle=ye,R.fillRect(0,0,_,D),f.beforeDraw&&f.beforeDraw.call(this,R,F),!this.aborted&&(R.save(),R.translate(_/2,D/2),R.rotate(i*Math.PI/180),R.scale(a,m),R.drawImage.apply(R,[v].concat(S)),R.restore(),f.drew&&f.drew.call(this,R,F),!this.aborted)){var ze=function(xe){if(!n.aborted){var Oe=function(we){return n.done({naturalWidth:l,naturalHeight:r,result:we})};if(xe&&ue&&f.retainExif&&n.exif&&n.exif.length>0){var Se=function(we){return Oe(Gt(Yt(zr(we,n.exif),f.mimeType)))};if(xe.arrayBuffer)xe.arrayBuffer().then(Se).catch(function(){n.fail(new Error("Failed to read the compressed image with Blob.arrayBuffer()."))});else{var ge=new St;n.reader=ge,ge.onload=function(Fe){var we=Fe.target;Se(we.result)},ge.onabort=function(){n.fail(new Error("Aborted to read the compressed image with FileReader."))},ge.onerror=function(){n.fail(new Error("Failed to read the compressed image with FileReader."))},ge.onloadend=function(){n.reader=null},ge.readAsArrayBuffer(xe)}}else Oe(xe)}};F.toBlob?F.toBlob(ze,f.mimeType,f.quality):ze(Gt(F.toDataURL(f.mimeType,f.quality)))}}},{key:"done",value:function(o){var n=o.naturalWidth,l=o.naturalHeight,r=o.result,h=this.file,i=this.image,u=this.options;if($e&&i.src.indexOf("blob:")===0&&$e.revokeObjectURL(i.src),r)if(u.strict&&!u.retainExif&&r.size>h.size&&u.mimeType===h.type&&!(u.width>n||u.height>l||u.minWidth>n||u.minHeight>l||u.maxWidth<n||u.maxHeight<l))r=h;else{var a=new Date;r.lastModified=a.getTime(),r.lastModifiedDate=a,r.name=h.name,r.name&&r.type!==h.type&&(r.name=r.name.replace(Pr,wr(r.type)))}else r=h;this.result=r,u.success&&u.success.call(this,r)}},{key:"fail",value:function(o){var n=this.options;if(n.error)n.error.call(this,o);else throw o}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}],[{key:"noConflict",value:function(){return window.Compressor=Ir,e}},{key:"setDefaults",value:function(o){ut(Xt,o)}}]),e}();function Mr(...e){return fetch(...e).then(t=>t.status!==200?Promise.reject(t):t.json())}function bo(e){return new Promise((t,o)=>{new Br(e,{maxWidth:600,maxHeight:900,quality:.8,success(n){t(n)},error(n){o(n)}})})}function Er(e){return fetch(e).then(t=>t.blob()).then(t=>bo(t))}const qe={"book-form":"_book-form_3m159_1","center-form-item":"_center-form-item_3m159_1","book-cover-image":"_book-cover-image_3m159_9","change-cover-buttons":"_change-cover-buttons_3m159_17"};function $r(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!fn(e)}const Vr=be({name:"BookForm",props:{data:{type:Object,required:!1},onScrape:{type:Function,required:!1},scraping:{type:Boolean,required:!1,default:!1}},setup(e,{expose:t}){const{data:o,onScrape:n,scraping:l}=cn(e),{t:r}=dn({useScope:"global"}),{message:h,dialog:i}=un(),u=M(),a=M({covers:[],...o.value});Be(()=>o.value,w=>{a.value={covers:[],...a.value,...w}});function d(w,c){a.value[w]=c}function m(w){a.value={...a.value,...w}}function C(){var w;return(w=u.value)==null?void 0:w.validate().then(()=>bn(a.value)).catch(c=>{throw h.error(r("pages.book.bookForm.formItemRequiredError")),console.log(c),c})}t({getFormData:C});function v(w=!1){const c=document.createElement("input");c.type="file",c.accept="image/*",w&&(c.capture="environment"),c.onchange=b=>{var B;const O=(B=b.target.files)==null?void 0:B[0];O&&bo(O).then(q=>{a.value={...a.value,covers:[q]}})},c.click()}function f(){i.warning({title:r("pages.book.bookForm.scrapeDialog.title"),content:r("pages.book.bookForm.scrapeDialog.content"),closable:!1,positiveText:r("common.confirm"),negativeText:r("common.cancel"),onPositiveClick(){var c,b;const w=(c=a.value)==null?void 0:c.isbn;w&&((b=n.value)==null||b.call(n,w).then(O=>m(O)))}})}const F=E(()=>{var c,b,O;if(l.value)return"";const w=(b=(c=a.value)==null?void 0:c.covers)==null?void 0:b[0];return gn(w,(O=a.value)==null?void 0:O.title)}),R=(w,c="string")=>({type:c,required:!0,trigger:"blur",renderMessage:()=>r("pages.book.bookForm.fieldRuleMessage",[w])});return()=>{let w;return P(Rt,null,[P(zn,{class:Ve(qe["book-form"]),ref:u,inline:!1,labelPlacement:"top",labelAlign:"left",showLabel:!0,model:a.value,onSubmit:c=>c.preventDefault()},{default:()=>[P(de,{label:"",showLabel:!1,path:"cover"},{default:()=>[P("div",{class:Ve(qe["center-form-item"])},[P(On,{class:Ve(qe["book-cover-image"]),src:F.value,renderToolbar:({nodes:c})=>P(Rt,null,[c.zoomIn,c.resizeToOriginalSize,c.zoomOut])},null),P("div",{class:Ve(qe["change-cover-buttons"])},[P(mt,{circle:!0,secondary:!0,onClick:()=>v()},{default:()=>[P(Dt,{name:"gallery"},null)]}),P(mt,{circle:!0,secondary:!0,onClick:()=>v(!0)},{default:()=>[P(Dt,{name:"camera"},null)]})])])]}),P(de,{label:r("pages.book.bookForm.form.rating.label"),showLabel:!1,path:"rating"},{default:()=>{var c;return[P("div",{class:Ve(qe["center-form-item"])},[P(vn,{count:5,value:(c=a.value)==null?void 0:c.rating,onUpdateValue:b=>d("rating",b)},null)])]}}),P(de,{label:"isbn",path:"isbn",rule:R("isbn")},{default:()=>[P(pn,null,{default:()=>{var c;return[P(Ie,{type:"text",placeholder:"isbn",allowInput:b=>/^\d*$/.test(b),value:(c=a.value)==null?void 0:c.isbn,onUpdateValue:b=>d("isbn",b)},null),P(mt,{ghost:!0,onClick:f},$r(w=r("pages.book.bookForm.form.isbn.scrapeBtn"))?w:{default:()=>[w]})]}})]}),P(de,{label:r("pages.book.bookForm.form.title.label"),path:"title",rule:R(r("pages.book.bookForm.form.title.label"))},{default:()=>{var c;return[P(Ie,{type:"text",placeholder:r("pages.book.bookForm.form.title.placeholder"),value:(c=a.value)==null?void 0:c.title,onUpdateValue:b=>d("title",b)},null)]}}),P(de,{label:r("pages.book.bookForm.form.subtitle.label"),path:"subtitle"},{default:()=>{var c;return[P(Ie,{type:"text",placeholder:r("pages.book.bookForm.form.subtitle.placeholder"),value:(c=a.value)==null?void 0:c.subtitle,onUpdateValue:b=>d("subtitle",b)},null)]}}),P(de,{label:r("pages.book.bookForm.form.editionName.label"),path:"editionName"},{default:()=>{var c;return[P(Ie,{type:"text",placeholder:r("pages.book.bookForm.form.editionName.placeholder"),value:(c=a.value)==null?void 0:c.editionName,onUpdateValue:b=>d("editionName",b)},null)]}}),P(de,{label:r("pages.book.bookForm.form.authors.label"),path:"authors",rule:R(r("pages.book.bookForm.form.authors.label","array"))},{default:()=>{var c;return[P(He,{value:(c=a.value)==null?void 0:c.authors,tag:!0,multiple:!0,filterable:!0,show:!1,showArrow:!1,placeholder:r("pages.book.bookForm.form.authors.placeholder"),onUpdateValue:b=>d("authors",b),inputProps:{enterKeyHint:"done"}},null)]}}),P(de,{label:r("pages.book.bookForm.form.contributions.label"),path:"contributions"},{default:()=>{var c;return[P(He,{value:(c=a.value)==null?void 0:c.contributions,tag:!0,multiple:!0,filterable:!0,show:!1,showArrow:!1,placeholder:r("pages.book.bookForm.form.contributions.placeholder"),onUpdateValue:b=>d("contributions",b),inputProps:{enterKeyHint:"done"}},null)]}}),P(de,{label:r("pages.book.bookForm.form.languages.label"),path:"languages"},{default:()=>{var c;return[P(He,{value:(c=a.value)==null?void 0:c.languages,tag:!0,multiple:!0,filterable:!0,show:!1,showArrow:!1,placeholder:r("pages.book.bookForm.form.languages.placeholder"),onUpdateValue:b=>d("languages",b),inputProps:{enterKeyHint:"done"}},null)]}}),P(de,{label:r("pages.book.bookForm.form.publisher.label"),path:"publishers"},{default:()=>{var c;return[P(He,{value:(c=a.value)==null?void 0:c.publishers,tag:!0,multiple:!0,filterable:!0,show:!1,showArrow:!1,placeholder:r("pages.book.bookForm.form.publishers.placeholder"),onUpdateValue:b=>d("publishers",b),inputProps:{enterKeyHint:"done"}},null)]}}),P(de,{label:r("pages.book.bookForm.form.publishDate.label"),path:"publishDate"},{default:()=>{var c;return[P(Ie,{type:"text",placeholder:r("pages.book.bookForm.form.publishDate.placeholder"),value:(c=a.value)==null?void 0:c.publishDate,onUpdateValue:b=>d("publishDate",b)},null)]}}),P(de,{label:r("pages.book.bookForm.form.publishCountry.label"),path:"publishCountry"},{default:()=>{var c;return[P(Ie,{type:"text",placeholder:r("pages.book.bookForm.form.publishCountry.placeholder"),value:(c=a.value)==null?void 0:c.publishCountry,onUpdateValue:b=>d("publishCountry",b)},null)]}}),P(de,{label:r("pages.book.bookForm.form.numberOfPages.label"),path:"numberOfPages"},{default:()=>{var c;return[P(Pn,{style:{width:"100%"},placeholder:r("pages.book.bookForm.form.numberOfPages.placeholder"),buttonPlacement:"both",value:(c=a.value)==null?void 0:c.numberOfPages,onUpdateValue:b=>d("numberOfPages",b||0)},null)]}}),P(de,{label:r("pages.book.bookForm.form.tags.label"),path:"tags"},{default:()=>{var c;return[P(He,{value:(c=a.value)==null?void 0:c.tags,tag:!0,multiple:!0,filterable:!0,show:!1,showArrow:!1,placeholder:r("pages.book.bookForm.form.tags.placeholder"),onUpdateValue:b=>d("tags",b),inputProps:{enterKeyHint:"done"}},null)]}}),P(de,{label:r("pages.book.bookForm.form.subjects.label"),path:"subjects"},{default:()=>{var c;return[P(He,{value:(c=a.value)==null?void 0:c.subjects,tag:!0,multiple:!0,filterable:!0,show:!1,showArrow:!1,placeholder:r("pages.book.bookForm.form.subjects.placeholder"),onUpdateValue:b=>d("subjects",b),inputProps:{enterKeyHint:"done"}},null)]}}),P(de,{label:r("pages.book.bookForm.form.summary.label"),path:"summary"},{default:()=>{var c;return[P(Ie,{type:"textarea",rows:7,placeholder:r("pages.book.bookForm.form.summary.placeholder"),value:(c=a.value)==null?void 0:c.summary},null)]}}),P("div",{style:{display:"none"}},[P(de,null,{default:()=>[P(Ie,null,null)]})])]})])}}});function Kr(e){return hn.settings.querySettingByKey("isbnDataUrl").then(t=>{const o=t==null?void 0:t.value;return!o||typeof o!="string"?Promise.reject("isbnDataUrl is invalid"):o.replace("{isbn}",e)}).then(t=>Mr(t,{method:"GET",mode:"cors"}).then(o=>{const{covers:n}=o,l=new URL(n[0],t).href;return Er(l).then(r=>({...o,covers:[r]}))}))}export{Vr as B,Kr as s};
//# sourceMappingURL=index-DdlyYhZ8.js.map
