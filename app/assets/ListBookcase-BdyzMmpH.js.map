{"version":3,"file":"ListBookcase-BdyzMmpH.js","sources":["../../src/pages/bookcase/list/ListBookcase.tsx"],"sourcesContent":["/**\n * @file ‰π¶Êû∂ÂàóË°®\n * @author Yangholmes 2024-12-23\n */\n\nimport { defineComponent, onMounted, ref } from 'vue';\nimport { I18nT, useI18n } from 'vue-i18n';\nimport useTRouter from '@/composite/useTRouter';\n\nimport cn from 'classnames';\n\nimport db from '@/services/db';\n\nimport BasicLayout from '@/pages/layout/BasicLayout';\nimport BasicTopBar from '@/pages/layout/BasicTopBar';\nimport DeleteConfirmButton from '@/components/deleteConfirmButton/DeleteConfirmButton';\nimport Empty from '@/components/empty/Empty';\nimport SvgIcon from '@/components/svgIcon/SvgIcon';\n\nimport { NButton } from 'naive-ui';\n\nimport { Bookcase } from '../utils';\n\nimport styles from './listBookcase.module.less';\n\nexport default defineComponent({\n  name: 'ListBookcase',\n  setup() {\n    const { t } = useI18n({ useScope: 'global' });\n    const { router } = useTRouter();\n\n    const list = ref<Pick<Bookcase, 'id' | 'name'>[]>([]);\n    function initData() {\n      db.bookcase.getBookcases().then(res => {\n        list.value = res;\n      });\n    }\n\n    // Ëé∑Âèñ‰π¶Êû∂ÂàóË°®\n    onMounted(() => {\n      initData();\n    });\n\n    const renderBookcaseList = () => {\n      if (list.value.length === 0) {\n        return (\n          <Empty\n            title={t('pages.bookcase.list.empty.title')}\n            description={\n              <I18nT scope=\"global\" keypath=\"pages.bookcase.list.empty.description\">\n                <SvgIcon name=\"plus\" />\n              </I18nT>\n            }\n          />\n        );\n      } else {\n        return <ul class={cn(styles['bookcase-list'])}>\n          {list.value.map(item =>\n            <li class={cn(styles.item)} key={item.id}>\n              <span class={cn(styles.title)}>\n                {item.name}\n              </span>\n              <span class={cn(styles.actions)}>\n                <NButton secondary circle onClick={() => {\n                  router.push({\n                    path: `/bookcase/edit/${item.id}`,\n                  });\n                }}>\n                  üëÄÔ∏è\n                </NButton>\n                <DeleteConfirmButton secondary circle onConfirm={() => {\n                  db.bookcase.deleteBookcase(item.id!).then(() => {\n                    initData();\n                  });\n                }}>\n                  <SvgIcon name=\"delete\" />\n                </DeleteConfirmButton>\n              </span>\n            </li>\n          )}\n        </ul>;\n      }\n    };\n\n    return () => (\n      <BasicLayout\n        topBar={\n          <BasicTopBar rightSlots={[\n            <NButton onClick={() => {\n              router.push({\n                path: '/bookcase/new',\n              });\n            }\n            }>\n              <SvgIcon name=\"plus\" />\n            </NButton>\n          ]}>\n            {t('pages.bookcase.list.topbar.title')}\n          </BasicTopBar>\n        }\n      >\n        {renderBookcaseList()}\n      </BasicLayout>\n    );\n  }\n});\n"],"names":["_isSlot","s","Object","prototype","toString","call","_isVNode","defineComponent","name","setup","t","useI18n","useScope","router","useTRouter","list","ref","initData","db","bookcase","getBookcases","then","res","value","onMounted","renderBookcaseList","length","_createVNode","Empty","I18nT","default","SvgIcon","cn","styles","map","item","id","title","actions","NButton","onClick","push","path","_createTextVNode","DeleteConfirmButton","onConfirm","deleteBookcase","_slot","_slot2","BasicLayout","BasicTopBar"],"mappings":"shBAuBgD,SAAAA,EAAAC,EAAA,CAAA,OAAA,OAAAA,GAAA,YAAAC,OAAAC,UAAAC,SAAAC,KAAAJ,CAAA,IAAAK,mBAAAA,CAAAA,EAAAL,CAAA,CAAA,CAEhD,MAAeM,IAAgB,CAC7BC,KAAM,eACNC,OAAQ,CACN,KAAM,CAAEC,EAAAA,CAAG,EAAGC,EAAQ,CAAEC,SAAU,QAAS,CAAC,EACtC,CAAEC,OAAAA,CAAQ,EAAGC,EAAU,EAEvBC,EAAOC,EAAqC,CAAA,CAAE,EACpD,SAASC,GAAW,CAClBC,EAAGC,SAASC,eAAeC,KAAKC,GAAO,CACrCP,EAAKQ,MAAQD,CACf,CAAC,CACH,CAGAE,EAAU,IAAM,CACdP,GACF,CAAC,EAED,MAAMQ,EAAqBA,IACrBV,EAAKQ,MAAMG,SAAW,EACxBC,EAAAC,EAAA,CAAA,MAEWlB,EAAE,iCAAiC,EAAC,YAAAiB,EAAAE,EAAA,CAAA,MAAA,SAAA,QAAA,uCAAA,EAAA,CAAAC,QAAAA,IAAAH,CAAAA,EAAAI,EAAA,CAAA,KAAA,MAAA,EAAA,IAAA,CAAA,CAAA,CAAA,CAAA,EAAA,IAAA,EAS/CJ,EAAA,KAAA,CAAA,MAAkBK,EAAGC,EAAO,eAAe,CAAC,GACzClB,CAAAA,EAAKQ,MAAMW,IAAIC,GAAIR,EAAA,KAAA,CAAA,MACPK,EAAGC,EAAOE,IAAI,EAAC,IAAOA,EAAKC,EAAE,EAAA,CAAAT,EAAA,OAAA,CAAA,MACzBK,EAAGC,EAAOI,KAAK,CAAC,EAAA,CAC1BF,EAAK3B,IAAI,CAAA,EAAAmB,EAAA,OAAA,CAAA,MAECK,EAAGC,EAAOK,OAAO,GAACX,CAAAA,EAAAY,EAAA,CAAA,UAAA,GAAA,OAAA,GAAA,QACMC,IAAM,CACvC3B,EAAO4B,KAAK,CACVC,KAAM,kBAAkBP,EAAKC,EAAE,EACjC,CAAC,CACH,CAAC,EAAA,CAAAN,QAAAA,IAAA,CAAAa,EAAA,KAAA,CAAA,EAAAhB,EAAAA,EAAAiB,EAAA,CAAA,UAAA,GAAA,OAAA,GAAA,UAGgDC,IAAM,CACrD3B,EAAGC,SAAS2B,eAAeX,EAAKC,EAAG,EAAEf,KAAK,IAAM,CAC9CJ,GACF,CAAC,CACH,CAAC,EAAA,CAAAa,QAAAA,IAAAH,CAAAA,EAAAI,EAAA,CAAA,KAAA,QAAA,EAAA,IAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAKP,CAAC,CAAA,EAKP,MAAO,IAAA,CAAA,IAAAgB,EAAAC,EAAA,OAAArB,EAAAsB,EAAA,CAAA,OAAAtB,EAAAuB,EAAA,CAAA,WAGwB,CAAAvB,EAAAY,EAAA,CAAA,QACLC,IAAM,CACtB3B,EAAO4B,KAAK,CACVC,KAAM,eACR,CAAC,CACH,CAAC,EAAA,CAAAZ,QAAAA,IAAAH,CAAAA,EAAAI,EAAA,CAAA,KAAA,MAAA,EAAA,IAAA,CAAA,CAAA,CAAA,CAAA,GAIF/B,EAAA+C,EACErC,EAAE,kCAAkC,CAAC,EAAAqC,EAAA,CAAAjB,QAAAA,IAAA,CAAAiB,CAAA,CAAA,CAAA,CAAA/C,EAAAA,EAAAgD,EAIzCvB,EAAoB,CAAA,EAAAuB,EAAA,CAAAlB,QAAAA,IAAA,CAAAkB,CAAA,CAAA,CAAA,EAG3B,CACF,CAAC"}