import{d as h,t as I,u as B,r as b,w as y,c as t,e as s,S as _,f as c,af as L}from"./index-B3qSu1dX.js";import{h as m}from"./utils-7_mGPhvC.js";const r={"bookcase-preview-container":"_bookcase-preview-container_1hd3b_1","bookcase-preview":"_bookcase-preview_1hd3b_1","bookcase-preview-image":"_bookcase-preview-image_1hd3b_16"},C=h({name:"BookcasePreview",props:{bookcaseId:{type:String,required:!1},selectedCellId:{type:String,required:!1},isLocated:{type:Boolean,default:!1},onSizeLoad:{type:Function,required:!1}},setup(i){const{bookcaseId:p,selectedCellId:u,isLocated:f}=I(i),{t:g}=B({useScope:"global"}),l=b();y(()=>p.value,a=>{a&&c.bookcase.queryBookcaseById(a).then(o=>{k(o),l.value=(o==null?void 0:o.name)||"-"})},{immediate:!0});const n=b();function k(a){if(!a){n.value=L(200,200,g("pages.bookcase.preview.bookcaseDisappeared"),"#bbb");return}const{thumbnail:o}=a;return u.value?m(a,u.value).then(e=>{n.value=e.img}):o?c.bookcase.queryThumbnailById(o).then(e=>{n.value=e==null?void 0:e.file}):m(a).then(e=>{n.value=e.img,c.bookcase.updateBookcase(a,e.img)})}const w=a=>{var d,v;const e=(d=a.target.parentElement)==null?void 0:d.parentElement;(v=i.onSizeLoad)==null||v.call(i,e.clientWidth,e.clientHeight)};return()=>t("div",{class:s(r["bookcase-preview-container"])},[t("div",{class:s(r["bookcase-preview"])},[t("img",{class:s(r["bookcase-preview-image"]),src:n.value&&URL.createObjectURL(n.value),alt:l.value,onLoad:w},null),t("div",null,[t("span",null,[f.value?t(_,{name:"locationPin"},null):""]),t("span",null,[l.value])])])])}});export{C as B};
//# sourceMappingURL=BookcasePreview-CI3Qpvrl.js.map
