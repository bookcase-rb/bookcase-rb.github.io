{"version":3,"file":"DeckerLayout-IuQg5hTJ.js","sources":["../../src/components/doubleDeckerContainer/DoubleDeckerContainer.tsx","../../src/pages/layout/DeckerLayout.tsx"],"sourcesContent":["/**\n * @file 双层容器\n * @author Yangholmes 2025-04-01\n */\n\nimport { defineComponent, PropType, ref, watch } from 'vue';\nimport cn from 'classnames';\nimport styles from './doubleDeckerContainer.module.less';\n\nexport default defineComponent({\n  name: 'DoubleDeckerContainer',\n  props: {\n    layer: {\n      type: Number as PropType<1 | 2>,\n      default: 1\n    },\n    onLayerChange: {\n      type: Function as PropType<(layer: 1 | 2) => void>,\n    },\n    maskClosable: {\n      type: Boolean,\n      default: true\n    }\n  },\n  setup(props, { slots }) {\n    const layer = ref(props.layer);\n\n    const layerChangeDuration = ref(.3);\n\n    /** 控制第二层是否渲染，在不显示的时候，应该销毁第二层 */\n    const isLayer2Show = ref(false);\n\n    watch(() => props.layer, (newVal) => {\n      layer.value = newVal;\n    });\n\n    watch(() => layer.value, (newVal, oldVal) => {\n      // 配合动画，第二层需要延迟销毁\n      if (newVal === 2) {\n        isLayer2Show.value = true;\n      } else if (newVal === 1 && oldVal === 2) {\n        setTimeout(() => {\n          isLayer2Show.value = false;\n        }, layerChangeDuration.value * 1e3);\n      }\n    });\n\n    const onLayerGo = () => {\n      layer.value = 2;\n      props.onLayerChange?.(layer.value);\n    };\n\n    const onLayerBack = () => {\n      layer.value = 1;\n      props.onLayerChange?.(layer.value);\n    };\n\n    const onClickMask = () => {\n      if (props.maskClosable) {\n        onLayerBack();\n      }\n    };\n\n    return () => (\n      <div\n        class={cn(styles['double-decker-container'], styles[`is-${layer.value}`])}\n        style={{ '--layer-change-duration': `${layerChangeDuration.value}s` }}\n      >\n        <div class={cn(styles['layer-1'])}>\n          {slots.default?.(onLayerGo, layer.value)}\n        </div>\n        <div class={cn(styles['layer-2'])}>\n          {isLayer2Show.value ? slots.decker?.(onLayerBack, layer.value) : null}\n        </div>\n        <div class={cn(styles.mask)} onClick={onClickMask} />\n      </div>\n    );\n  }\n});\n","/**\n * @file 双层容器弹出层布局\n * @author Yangholmes 2025-04-16\n */\n\nimport { defineComponent, PropType } from 'vue';\nimport cn from 'classnames';\n\nimport styles from './deckerLayout.module.less';\nimport { JSX } from 'vue/jsx-runtime';\n\nexport default defineComponent({\n  name: 'DeckerLayout',\n  props: {\n    topBar: {\n      type: Object as PropType<JSX.Element>,\n    },\n    fullWidth: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup(props, { slots }) {\n    return () => (<div class={cn(styles['decker-layout'])}>\n      {/* 顶部栏 */}\n      <div class={cn(styles['top-bar'])}>\n        {props.topBar}\n      </div>\n      {/* 内容区 */}\n      <div class={cn(styles.main, {\n        [styles['full-width']]: props.fullWidth\n      })}>\n        {slots.default?.()}\n      </div>\n    </div>);\n  }\n});\n\n"],"names":["defineComponent","name","props","layer","type","Number","default","onLayerChange","Function","maskClosable","Boolean","setup","slots","ref","layerChangeDuration","isLayer2Show","watch","newVal","value","oldVal","setTimeout","onLayerGo","onLayerBack","onClickMask","_createVNode","cn","styles","decker","mask","topBar","Object","fullWidth","main"],"mappings":"uPASeA,IAAgB,CAC7BC,KAAM,wBACNC,MAAO,CACLC,MAAO,CACLC,KAAMC,OACNC,QAAS,CACV,EACDC,cAAe,CACbH,KAAMI,QACP,EACDC,aAAc,CACZL,KAAMM,QACNJ,QAAS,EACX,CACD,EACDK,MAAMT,EAAO,CAAEU,MAAAA,CAAM,EAAG,CACtB,MAAMT,EAAQU,EAAIX,EAAMC,KAAK,EAEvBW,EAAsBD,EAAI,EAAE,EAG5BE,EAAeF,EAAI,EAAK,EAE9BG,EAAM,IAAMd,EAAMC,MAAQc,GAAW,CACnCd,EAAMe,MAAQD,CAChB,CAAC,EAEDD,EAAM,IAAMb,EAAMe,MAAO,CAACD,EAAQE,IAAW,CAEvCF,IAAW,EACbF,EAAaG,MAAQ,GACZD,IAAW,GAAKE,IAAW,GACpCC,WAAW,IAAM,CACfL,EAAaG,MAAQ,EACvB,EAAGJ,EAAoBI,MAAQ,GAAG,CAEtC,CAAC,EAED,MAAMG,EAAYA,IAAM,OACtBlB,EAAMe,MAAQ,GACdhB,EAAAA,EAAMK,gBAANL,MAAAA,EAAAA,KAAAA,EAAsBC,EAAMe,QAGxBI,EAAcA,IAAM,OACxBnB,EAAMe,MAAQ,GACdhB,EAAAA,EAAMK,gBAANL,MAAAA,EAAAA,KAAAA,EAAsBC,EAAMe,QAGxBK,EAAcA,IAAM,CACpBrB,EAAMO,cACRa,KAIJ,MAAO,IAAA,SAAAE,OAAAA,EAAA,MAAA,CAAA,MAEIC,EAAGC,EAAO,yBAAyB,EAAGA,EAAO,MAAMvB,EAAMe,KAAK,EAAE,CAAC,EAAC,MAClE,CAAE,0BAA2B,GAAGJ,EAAoBI,KAAK,GAAI,CAAC,EAAA,CAAAM,EAAA,MAAA,CAAA,MAEzDC,EAAGC,EAAO,SAAS,CAAC,GAC7Bd,EAAAA,EAAAA,EAAMN,UAANM,YAAAA,EAAAA,KAAAA,EAAgBS,EAAWlB,EAAMe,MAAM,CAAA,EAAAM,EAAA,MAAA,CAAA,MAE9BC,EAAGC,EAAO,SAAS,CAAC,CAAC,EAAA,CAC9BX,EAAaG,OAAQN,EAAAA,EAAMe,SAANf,YAAAA,EAAAA,KAAAA,EAAeU,EAAanB,EAAMe,OAAS,IAAI,GAAAM,EAAA,MAAA,CAAA,MAE3DC,EAAGC,EAAOE,IAAI,EAAC,QAAWL,GAEzC,IAAA,CAAA,CAAA,EACH,CACF,CAAC,0ICnEcvB,IAAgB,CAC7BC,KAAM,eACNC,MAAO,CACL2B,OAAQ,CACNzB,KAAM0B,MACP,EACDC,UAAW,CACT3B,KAAMM,QACNJ,QAAS,EACX,CACD,EACDK,MAAMT,EAAO,CAAEU,MAAAA,CAAM,EAAG,CACtB,MAAO,IAAA,OAAAY,OAAAA,EAAA,MAAA,CAAA,MAAmBC,EAAGC,EAAO,eAAe,CAAC,CAAC,EAAA,CAAAF,EAAA,MAAA,CAAA,MAEvCC,EAAGC,EAAO,SAAS,CAAC,CAAC,EAAA,CAC9BxB,EAAM2B,MAAM,CAAA,EAAAL,EAAA,MAAA,CAAA,MAGHC,EAAGC,EAAOM,KAAM,CAC1B,CAACN,EAAO,YAAY,CAAC,EAAGxB,EAAM6B,UAC/B,CAAC,EAAA,EACCnB,EAAAA,EAAMN,UAANM,YAAAA,EAAAA,KAAAA,EAAiB,CAEf,CAAA,CAAA,EACT,CACF,CAAC"}