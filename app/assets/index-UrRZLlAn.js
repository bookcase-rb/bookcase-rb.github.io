import{r as M,L as E,R as _e,Q as st,d as be,C as zt,o as Xe,ac as jo,a6 as Uo,a0 as ae,ad as kt,v as g,ae as Et,af as Jt,P as Vo,ag as je,a7 as Ot,ah as Ko,ai as pt,w as Be,p as Qt,y as Ye,E as V,_ as H,H as he,K as Ze,J as Re,aj as eo,M as Je,ak as to,a3 as oe,x as Pt,al as qo,D as He,T as oo,G as re,Z as Ae,Y as no,am as It,an as ct,ao as Go,ap as Xo,aq as Yo,ar as Ne,z as X,as as Zo,A as Jo,a1 as we,at as $t,au as Qo,F as Rt,av as en,aw as tn,$ as At,ax as on,ay as nn,az as rn,aA as ln,aB as _t,aC as an,aD as sn,t as cn,u as dn,f as un,c as P,b as Ue,B as mt,S as Dt,N as Te,i as fn,a as hn}from"./index-DU3akae0.js";import{N as vn,g as gn}from"./utils-DG50A_wr.js";import{d as bn}from"./vue-utils-C8Ubh6bB.js";import{N as pn}from"./InputGroup-CNgR8C4C.js";import{c as ro,d as at,e as mn,i as Bt,f as yn,p as xn,N as Cn,u as wn,g as Ft,B as Sn,V as kn,a as Rn}from"./Popover-Bd5t-vwt.js";import{h as Ge,a as Fn,c as Tn}from"./create-D3Vn69pI.js";import{a as zn,N as de}from"./FormItem-OC8cROAO.js";import{a as On}from"./Image-D-2JZKSR.js";import{N as Pn}from"./InputNumber-BijZY0P-.js";function Lt(e){return e&-e}class lo{constructor(t,o){this.l=t,this.min=o;const n=new Array(t+1);for(let l=0;l<t+1;++l)n[l]=0;this.ft=n}add(t,o){if(o===0)return;const{l:n,ft:l}=this;for(t+=1;t<=n;)l[t]+=o,t+=Lt(t)}get(t){return this.sum(t+1)-this.sum(t)}sum(t){if(t===void 0&&(t=this.l),t<=0)return 0;const{ft:o,min:n,l}=this;if(t>l)throw new Error("[FinweckTree.sum]: `i` is larger than length.");let r=t*n;for(;t>0;)r+=o[t],t-=Lt(t);return r}getBound(t){let o=0,n=this.l;for(;n>o;){const l=Math.floor((o+n)/2),r=this.sum(l);if(r>t){n=l;continue}else if(r<t){if(o===l)return this.sum(o+1)<=t?o+1:l;o=l}else return l}return o}}let lt;function In(){return typeof document>"u"?!1:(lt===void 0&&("matchMedia"in window?lt=window.matchMedia("(pointer:coarse)").matches:lt=!1),lt)}let yt;function Ht(){return typeof document>"u"?1:(yt===void 0&&(yt="chrome"in window?window.devicePixelRatio:1),yt)}const io="VVirtualListXScroll";function Bn({columnsRef:e,renderColRef:t,renderItemWithColsRef:o}){const n=M(0),l=M(0),r=E(()=>{const a=e.value;if(a.length===0)return null;const c=new lo(a.length,0);return a.forEach((p,S)=>{c.add(S,p.width)}),c}),f=_e(()=>{const a=r.value;return a!==null?Math.max(a.getBound(l.value)-1,0):0}),i=a=>{const c=r.value;return c!==null?c.sum(a):0},d=_e(()=>{const a=r.value;return a!==null?Math.min(a.getBound(l.value+n.value)+1,e.value.length-1):0});return st(io,{startIndexRef:f,endIndexRef:d,columnsRef:e,renderColRef:t,renderItemWithColsRef:o,getLeft:i}),{listWidthRef:n,scrollLeftRef:l}}const Nt=be({name:"VirtualListRow",props:{index:{type:Number,required:!0},item:{type:Object,required:!0}},setup(){const{startIndexRef:e,endIndexRef:t,columnsRef:o,getLeft:n,renderColRef:l,renderItemWithColsRef:r}=zt(io);return{startIndex:e,endIndex:t,columns:o,renderCol:l,renderItemWithCols:r,getLeft:n}},render(){const{startIndex:e,endIndex:t,columns:o,renderCol:n,renderItemWithCols:l,getLeft:r,item:f}=this;if(l!=null)return l({itemIndex:this.index,startColIndex:e,endColIndex:t,allColumns:o,item:f,getLeft:r});if(n!=null){const i=[];for(let d=e;d<=t;++d){const a=o[d];i.push(n({column:a,left:r(d),item:f}))}return i}return null}}),Mn=at(".v-vl",{maxHeight:"inherit",height:"100%",overflow:"auto",minWidth:"1px"},[at("&:not(.v-vl--show-scrollbar)",{scrollbarWidth:"none"},[at("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",{width:0,height:0,display:"none"})])]),En=be({name:"VirtualList",inheritAttrs:!1,props:{showScrollbar:{type:Boolean,default:!0},columns:{type:Array,default:()=>[]},renderCol:Function,renderItemWithCols:Function,items:{type:Array,default:()=>[]},itemSize:{type:Number,required:!0},itemResizable:Boolean,itemsStyle:[String,Object],visibleItemsTag:{type:[String,Object],default:"div"},visibleItemsProps:Object,ignoreItemResize:Boolean,onScroll:Function,onWheel:Function,onResize:Function,defaultScrollKey:[Number,String],defaultScrollIndex:Number,keyField:{type:String,default:"key"},paddingTop:{type:[Number,String],default:0},paddingBottom:{type:[Number,String],default:0}},setup(e){const t=Jt();Mn.mount({id:"vueuc/virtual-list",head:!0,anchorMetaName:ro,ssr:t}),Xe(()=>{const{defaultScrollIndex:b,defaultScrollKey:z}=e;b!=null?C({index:b}):z!=null&&C({key:z})});let o=!1,n=!1;jo(()=>{if(o=!1,!n){n=!0;return}C({top:v.value,left:f.value})}),Uo(()=>{o=!0,n||(n=!0)});const l=_e(()=>{if(e.renderCol==null&&e.renderItemWithCols==null||e.columns.length===0)return;let b=0;return e.columns.forEach(z=>{b+=z.width}),b}),r=E(()=>{const b=new Map,{keyField:z}=e;return e.items.forEach(($,G)=>{b.set($[z],G)}),b}),{scrollLeftRef:f,listWidthRef:i}=Bn({columnsRef:ae(e,"columns"),renderColRef:ae(e,"renderCol"),renderItemWithColsRef:ae(e,"renderItemWithCols")}),d=M(null),a=M(void 0),c=new Map,p=E(()=>{const{items:b,itemSize:z,keyField:$}=e,G=new lo(b.length,z);return b.forEach((J,Y)=>{const Z=J[$],U=c.get(Z);U!==void 0&&G.add(Y,U)}),G}),S=M(0),v=M(0),u=_e(()=>Math.max(p.value.getBound(v.value-kt(e.paddingTop))-1,0)),T=E(()=>{const{value:b}=a;if(b===void 0)return[];const{items:z,itemSize:$}=e,G=u.value,J=Math.min(G+Math.ceil(b/$+1),z.length-1),Y=[];for(let Z=G;Z<=J;++Z)Y.push(z[Z]);return Y}),C=(b,z)=>{if(typeof b=="number"){x(b,z,"auto");return}const{left:$,top:G,index:J,key:Y,position:Z,behavior:U,debounce:te=!0}=b;if($!==void 0||G!==void 0)x($,G,U);else if(J!==void 0)h(J,U,te);else if(Y!==void 0){const m=r.value.get(Y);m!==void 0&&h(m,U,te)}else Z==="bottom"?x(0,Number.MAX_SAFE_INTEGER,U):Z==="top"&&x(0,0,U)};let w,F=null;function h(b,z,$){const{value:G}=p,J=G.sum(b)+kt(e.paddingTop);if(!$)d.value.scrollTo({left:0,top:J,behavior:z});else{w=b,F!==null&&window.clearTimeout(F),F=window.setTimeout(()=>{w=void 0,F=null},16);const{scrollTop:Y,offsetHeight:Z}=d.value;if(J>Y){const U=G.get(b);J+U<=Y+Z||d.value.scrollTo({left:0,top:J+U-Z,behavior:z})}else d.value.scrollTo({left:0,top:J,behavior:z})}}function x(b,z,$){d.value.scrollTo({left:b,top:z,behavior:$})}function I(b,z){var $,G,J;if(o||e.ignoreItemResize||ne(z.target))return;const{value:Y}=p,Z=r.value.get(b),U=Y.get(Z),te=(J=(G=($=z.borderBoxSize)===null||$===void 0?void 0:$[0])===null||G===void 0?void 0:G.blockSize)!==null&&J!==void 0?J:z.contentRect.height;if(te===U)return;te-e.itemSize===0?c.delete(b):c.set(b,te-e.itemSize);const k=te-U;if(k===0)return;Y.add(Z,k);const N=d.value;if(N!=null){if(w===void 0){const se=Y.sum(Z);N.scrollTop>se&&N.scrollBy(0,k)}else if(Z<w)N.scrollBy(0,k);else if(Z===w){const se=Y.sum(Z);te+se>N.scrollTop+N.offsetHeight&&N.scrollBy(0,k)}ee()}S.value++}const K=!In();let A=!1;function _(b){var z;(z=e.onScroll)===null||z===void 0||z.call(e,b),(!K||!A)&&ee()}function D(b){var z;if((z=e.onWheel)===null||z===void 0||z.call(e,b),K){const $=d.value;if($!=null){if(b.deltaX===0&&($.scrollTop===0&&b.deltaY<=0||$.scrollTop+$.offsetHeight>=$.scrollHeight&&b.deltaY>=0))return;b.preventDefault(),$.scrollTop+=b.deltaY/Ht(),$.scrollLeft+=b.deltaX/Ht(),ee(),A=!0,mn(()=>{A=!1})}}}function Q(b){if(o||ne(b.target))return;if(e.renderCol==null&&e.renderItemWithCols==null){if(b.contentRect.height===a.value)return}else if(b.contentRect.height===a.value&&b.contentRect.width===i.value)return;a.value=b.contentRect.height,i.value=b.contentRect.width;const{onResize:z}=e;z!==void 0&&z(b)}function ee(){const{value:b}=d;b!=null&&(v.value=b.scrollTop,f.value=b.scrollLeft)}function ne(b){let z=b;for(;z!==null;){if(z.style.display==="none")return!0;z=z.parentElement}return!1}return{listHeight:a,listStyle:{overflow:"auto"},keyToIndex:r,itemsStyle:E(()=>{const{itemResizable:b}=e,z=je(p.value.sum());return S.value,[e.itemsStyle,{boxSizing:"content-box",width:je(l.value),height:b?"":z,minHeight:b?z:"",paddingTop:je(e.paddingTop),paddingBottom:je(e.paddingBottom)}]}),visibleItemsStyle:E(()=>(S.value,{transform:`translateY(${je(p.value.sum(u.value))})`})),viewportItems:T,listElRef:d,itemsElRef:M(null),scrollTo:C,handleListResize:Q,handleListScroll:_,handleListWheel:D,handleItemResize:I}},render(){const{itemResizable:e,keyField:t,keyToIndex:o,visibleItemsTag:n}=this;return g(Et,{onResize:this.handleListResize},{default:()=>{var l,r;return g("div",Vo(this.$attrs,{class:["v-vl",this.showScrollbar&&"v-vl--show-scrollbar"],onScroll:this.handleListScroll,onWheel:this.handleListWheel,ref:"listElRef"}),[this.items.length!==0?g("div",{ref:"itemsElRef",class:"v-vl-items",style:this.itemsStyle},[g(n,Object.assign({class:"v-vl-visible-items",style:this.visibleItemsStyle},this.visibleItemsProps),{default:()=>{const{renderCol:f,renderItemWithCols:i}=this;return this.viewportItems.map(d=>{const a=d[t],c=o.get(a),p=f!=null?g(Nt,{index:c,item:d}):void 0,S=i!=null?g(Nt,{index:c,item:d}):void 0,v=this.$slots.default({item:d,renderedCols:p,renderedItemWithCols:S,index:c})[0];return e?g(Et,{key:a,onResize:u=>this.handleItemResize(a,u)},{default:()=>v}):(v.key=a,v)})}})]):(r=(l=this.$slots).empty)===null||r===void 0?void 0:r.call(l)])}})}}),ze="v-hidden",$n=at("[v-hidden]",{display:"none!important"}),Wt=be({name:"Overflow",props:{getCounter:Function,getTail:Function,updateCounter:Function,onUpdateCount:Function,onUpdateOverflow:Function},setup(e,{slots:t}){const o=M(null),n=M(null);function l(f){const{value:i}=o,{getCounter:d,getTail:a}=e;let c;if(d!==void 0?c=d():c=n.value,!i||!c)return;c.hasAttribute(ze)&&c.removeAttribute(ze);const{children:p}=i;if(f.showAllItemsBeforeCalculate)for(const h of p)h.hasAttribute(ze)&&h.removeAttribute(ze);const S=i.offsetWidth,v=[],u=t.tail?a==null?void 0:a():null;let T=u?u.offsetWidth:0,C=!1;const w=i.children.length-(t.tail?1:0);for(let h=0;h<w-1;++h){if(h<0)continue;const x=p[h];if(C){x.hasAttribute(ze)||x.setAttribute(ze,"");continue}else x.hasAttribute(ze)&&x.removeAttribute(ze);const I=x.offsetWidth;if(T+=I,v[h]=I,T>S){const{updateCounter:K}=e;for(let A=h;A>=0;--A){const _=w-1-A;K!==void 0?K(_):c.textContent=`${_}`;const D=c.offsetWidth;if(T-=v[A],T+D<=S||A===0){C=!0,h=A-1,u&&(h===-1?(u.style.maxWidth=`${S-D}px`,u.style.boxSizing="border-box"):u.style.maxWidth="");const{onUpdateCount:Q}=e;Q&&Q(_);break}}}}const{onUpdateOverflow:F}=e;C?F!==void 0&&F(!0):(F!==void 0&&F(!1),c.setAttribute(ze,""))}const r=Jt();return $n.mount({id:"vueuc/overflow",head:!0,anchorMetaName:ro,ssr:r}),Xe(()=>l({showAllItemsBeforeCalculate:!1})),{selfRef:o,counterRef:n,sync:l}},render(){const{$slots:e}=this;return Ot(()=>this.sync({showAllItemsBeforeCalculate:!1})),g("div",{class:"v-overflow",ref:"selfRef"},[Ko(e,"default"),e.counter?e.counter():g("span",{style:{display:"inline-block"},ref:"counterRef"}),e.tail?e.tail():null])}});function ao(e,t){t&&(Xe(()=>{const{value:o}=e;o&&pt.registerHandler(o,t)}),Be(e,(o,n)=>{n&&pt.unregisterHandler(n)},{deep:!1}),Qt(()=>{const{value:o}=e;o&&pt.unregisterHandler(o)}))}function jt(e){switch(typeof e){case"string":return e||void 0;case"number":return String(e);default:return}}function xt(e){const t=e.filter(o=>o!==void 0);if(t.length!==0)return t.length===1?t[0]:o=>{e.forEach(n=>{n&&n(o)})}}const An=be({name:"Checkmark",render(){return g("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},g("g",{fill:"none"},g("path",{d:"M14.046 3.486a.75.75 0 0 1-.032 1.06l-7.93 7.474a.85.85 0 0 1-1.188-.022l-2.68-2.72a.75.75 0 1 1 1.068-1.053l2.234 2.267l7.468-7.038a.75.75 0 0 1 1.06.032z",fill:"currentColor"})))}}),_n=be({name:"Empty",render(){return g("svg",{viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},g("path",{d:"M26 7.5C26 11.0899 23.0899 14 19.5 14C15.9101 14 13 11.0899 13 7.5C13 3.91015 15.9101 1 19.5 1C23.0899 1 26 3.91015 26 7.5ZM16.8536 4.14645C16.6583 3.95118 16.3417 3.95118 16.1464 4.14645C15.9512 4.34171 15.9512 4.65829 16.1464 4.85355L18.7929 7.5L16.1464 10.1464C15.9512 10.3417 15.9512 10.6583 16.1464 10.8536C16.3417 11.0488 16.6583 11.0488 16.8536 10.8536L19.5 8.20711L22.1464 10.8536C22.3417 11.0488 22.6583 11.0488 22.8536 10.8536C23.0488 10.6583 23.0488 10.3417 22.8536 10.1464L20.2071 7.5L22.8536 4.85355C23.0488 4.65829 23.0488 4.34171 22.8536 4.14645C22.6583 3.95118 22.3417 3.95118 22.1464 4.14645L19.5 6.79289L16.8536 4.14645Z",fill:"currentColor"}),g("path",{d:"M25 22.75V12.5991C24.5572 13.0765 24.053 13.4961 23.5 13.8454V16H17.5L17.3982 16.0068C17.0322 16.0565 16.75 16.3703 16.75 16.75C16.75 18.2688 15.5188 19.5 14 19.5C12.4812 19.5 11.25 18.2688 11.25 16.75L11.2432 16.6482C11.1935 16.2822 10.8797 16 10.5 16H4.5V7.25C4.5 6.2835 5.2835 5.5 6.25 5.5H12.2696C12.4146 4.97463 12.6153 4.47237 12.865 4H6.25C4.45507 4 3 5.45507 3 7.25V22.75C3 24.5449 4.45507 26 6.25 26H21.75C23.5449 26 25 24.5449 25 22.75ZM4.5 22.75V17.5H9.81597L9.85751 17.7041C10.2905 19.5919 11.9808 21 14 21L14.215 20.9947C16.2095 20.8953 17.842 19.4209 18.184 17.5H23.5V22.75C23.5 23.7165 22.7165 24.5 21.75 24.5H6.25C5.2835 24.5 4.5 23.7165 4.5 22.75Z",fill:"currentColor"}))}}),Dn=be({props:{onFocus:Function,onBlur:Function},setup(e){return()=>g("div",{style:"width: 0; height: 0",tabindex:0,onFocus:e.onFocus,onBlur:e.onBlur})}}),Ln={iconSizeTiny:"28px",iconSizeSmall:"34px",iconSizeMedium:"40px",iconSizeLarge:"46px",iconSizeHuge:"52px"};function Hn(e){const{textColorDisabled:t,iconColor:o,textColor2:n,fontSizeTiny:l,fontSizeSmall:r,fontSizeMedium:f,fontSizeLarge:i,fontSizeHuge:d}=e;return Object.assign(Object.assign({},Ln),{fontSizeTiny:l,fontSizeSmall:r,fontSizeMedium:f,fontSizeLarge:i,fontSizeHuge:d,textColor:t,iconColor:o,extraTextColor:n})}const so={name:"Empty",common:Ye,self:Hn},Nn=V("empty",`
 display: flex;
 flex-direction: column;
 align-items: center;
 font-size: var(--n-font-size);
`,[H("icon",`
 width: var(--n-icon-size);
 height: var(--n-icon-size);
 font-size: var(--n-icon-size);
 line-height: var(--n-icon-size);
 color: var(--n-icon-color);
 transition:
 color .3s var(--n-bezier);
 `,[he("+",[H("description",`
 margin-top: 8px;
 `)])]),H("description",`
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
 `),H("extra",`
 text-align: center;
 transition: color .3s var(--n-bezier);
 margin-top: 12px;
 color: var(--n-extra-text-color);
 `)]),Wn=Object.assign(Object.assign({},Re.props),{description:String,showDescription:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!0},size:{type:String,default:"medium"},renderIcon:Function}),jn=be({name:"Empty",props:Wn,slots:Object,setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:o,mergedComponentPropsRef:n}=Ze(e),l=Re("Empty","-empty",Nn,so,e,t),{localeRef:r}=eo("Empty"),f=E(()=>{var c,p,S;return(c=e.description)!==null&&c!==void 0?c:(S=(p=n==null?void 0:n.value)===null||p===void 0?void 0:p.Empty)===null||S===void 0?void 0:S.description}),i=E(()=>{var c,p;return((p=(c=n==null?void 0:n.value)===null||c===void 0?void 0:c.Empty)===null||p===void 0?void 0:p.renderIcon)||(()=>g(_n,null))}),d=E(()=>{const{size:c}=e,{common:{cubicBezierEaseInOut:p},self:{[oe("iconSize",c)]:S,[oe("fontSize",c)]:v,textColor:u,iconColor:T,extraTextColor:C}}=l.value;return{"--n-icon-size":S,"--n-font-size":v,"--n-bezier":p,"--n-text-color":u,"--n-icon-color":T,"--n-extra-text-color":C}}),a=o?Je("empty",E(()=>{let c="";const{size:p}=e;return c+=p[0],c}),d,e):void 0;return{mergedClsPrefix:t,mergedRenderIcon:i,localizedDescription:E(()=>f.value||r.value.description),cssVars:o?void 0:d,themeClass:a==null?void 0:a.themeClass,onRender:a==null?void 0:a.onRender}},render(){const{$slots:e,mergedClsPrefix:t,onRender:o}=this;return o==null||o(),g("div",{class:[`${t}-empty`,this.themeClass],style:this.cssVars},this.showIcon?g("div",{class:`${t}-empty__icon`},e.icon?e.icon():g(to,{clsPrefix:t},{default:this.mergedRenderIcon})):null,this.showDescription?g("div",{class:`${t}-empty__description`},e.default?e.default():this.localizedDescription):null,e.extra?g("div",{class:`${t}-empty__extra`},e.extra()):null)}}),Un={height:"calc(var(--n-option-height) * 7.6)",paddingTiny:"4px 0",paddingSmall:"4px 0",paddingMedium:"4px 0",paddingLarge:"4px 0",paddingHuge:"4px 0",optionPaddingTiny:"0 12px",optionPaddingSmall:"0 12px",optionPaddingMedium:"0 12px",optionPaddingLarge:"0 12px",optionPaddingHuge:"0 12px",loadingSize:"18px"};function Vn(e){const{borderRadius:t,popoverColor:o,textColor3:n,dividerColor:l,textColor2:r,primaryColorPressed:f,textColorDisabled:i,primaryColor:d,opacityDisabled:a,hoverColor:c,fontSizeTiny:p,fontSizeSmall:S,fontSizeMedium:v,fontSizeLarge:u,fontSizeHuge:T,heightTiny:C,heightSmall:w,heightMedium:F,heightLarge:h,heightHuge:x}=e;return Object.assign(Object.assign({},Un),{optionFontSizeTiny:p,optionFontSizeSmall:S,optionFontSizeMedium:v,optionFontSizeLarge:u,optionFontSizeHuge:T,optionHeightTiny:C,optionHeightSmall:w,optionHeightMedium:F,optionHeightLarge:h,optionHeightHuge:x,borderRadius:t,color:o,groupHeaderTextColor:n,actionDividerColor:l,optionTextColor:r,optionTextColorPressed:f,optionTextColorDisabled:i,optionTextColorActive:d,optionOpacityDisabled:a,optionCheckColor:d,optionColorPending:c,optionColorActive:"rgba(0, 0, 0, 0)",optionColorActivePending:c,actionTextColor:r,loadingColor:d})}const co=Pt({name:"InternalSelectMenu",common:Ye,peers:{Scrollbar:qo,Empty:so},self:Vn}),Ut=be({name:"NBaseSelectGroupHeader",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(){const{renderLabelRef:e,renderOptionRef:t,labelFieldRef:o,nodePropsRef:n}=zt(Bt);return{labelField:o,nodeProps:n,renderLabel:e,renderOption:t}},render(){const{clsPrefix:e,renderLabel:t,renderOption:o,nodeProps:n,tmNode:{rawNode:l}}=this,r=n==null?void 0:n(l),f=t?t(l,!1):He(l[this.labelField],l,!1),i=g("div",Object.assign({},r,{class:[`${e}-base-select-group-header`,r==null?void 0:r.class]}),f);return l.render?l.render({node:i,option:l}):o?o({node:i,option:l,selected:!1}):i}});function Kn(e,t){return g(oo,{name:"fade-in-scale-up-transition"},{default:()=>e?g(to,{clsPrefix:t,class:`${t}-base-select-option__check`},{default:()=>g(An)}):null})}const Vt=be({name:"NBaseSelectOption",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(e){const{valueRef:t,pendingTmNodeRef:o,multipleRef:n,valueSetRef:l,renderLabelRef:r,renderOptionRef:f,labelFieldRef:i,valueFieldRef:d,showCheckmarkRef:a,nodePropsRef:c,handleOptionClick:p,handleOptionMouseEnter:S}=zt(Bt),v=_e(()=>{const{value:w}=o;return w?e.tmNode.key===w.key:!1});function u(w){const{tmNode:F}=e;F.disabled||p(w,F)}function T(w){const{tmNode:F}=e;F.disabled||S(w,F)}function C(w){const{tmNode:F}=e,{value:h}=v;F.disabled||h||S(w,F)}return{multiple:n,isGrouped:_e(()=>{const{tmNode:w}=e,{parent:F}=w;return F&&F.rawNode.type==="group"}),showCheckmark:a,nodeProps:c,isPending:v,isSelected:_e(()=>{const{value:w}=t,{value:F}=n;if(w===null)return!1;const h=e.tmNode.rawNode[d.value];if(F){const{value:x}=l;return x.has(h)}else return w===h}),labelField:i,renderLabel:r,renderOption:f,handleMouseMove:C,handleMouseEnter:T,handleClick:u}},render(){const{clsPrefix:e,tmNode:{rawNode:t},isSelected:o,isPending:n,isGrouped:l,showCheckmark:r,nodeProps:f,renderOption:i,renderLabel:d,handleClick:a,handleMouseEnter:c,handleMouseMove:p}=this,S=Kn(o,e),v=d?[d(t,o),r&&S]:[He(t[this.labelField],t,o),r&&S],u=f==null?void 0:f(t),T=g("div",Object.assign({},u,{class:[`${e}-base-select-option`,t.class,u==null?void 0:u.class,{[`${e}-base-select-option--disabled`]:t.disabled,[`${e}-base-select-option--selected`]:o,[`${e}-base-select-option--grouped`]:l,[`${e}-base-select-option--pending`]:n,[`${e}-base-select-option--show-checkmark`]:r}],style:[(u==null?void 0:u.style)||"",t.style||""],onClick:xt([a,u==null?void 0:u.onClick]),onMouseenter:xt([c,u==null?void 0:u.onMouseenter]),onMousemove:xt([p,u==null?void 0:u.onMousemove])}),g("div",{class:`${e}-base-select-option__content`},v));return t.render?t.render({node:T,option:t,selected:o}):i?i({node:T,option:t,selected:o}):T}}),qn=V("base-select-menu",`
 line-height: 1.5;
 outline: none;
 z-index: 0;
 position: relative;
 border-radius: var(--n-border-radius);
 transition:
 background-color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier);
 background-color: var(--n-color);
`,[V("scrollbar",`
 max-height: var(--n-height);
 `),V("virtual-list",`
 max-height: var(--n-height);
 `),V("base-select-option",`
 min-height: var(--n-option-height);
 font-size: var(--n-option-font-size);
 display: flex;
 align-items: center;
 `,[H("content",`
 z-index: 1;
 white-space: nowrap;
 text-overflow: ellipsis;
 overflow: hidden;
 `)]),V("base-select-group-header",`
 min-height: var(--n-option-height);
 font-size: .93em;
 display: flex;
 align-items: center;
 `),V("base-select-menu-option-wrapper",`
 position: relative;
 width: 100%;
 `),H("loading, empty",`
 display: flex;
 padding: 12px 32px;
 flex: 1;
 justify-content: center;
 `),H("loading",`
 color: var(--n-loading-color);
 font-size: var(--n-loading-size);
 `),H("header",`
 padding: 8px var(--n-option-padding-left);
 font-size: var(--n-option-font-size);
 transition: 
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 border-bottom: 1px solid var(--n-action-divider-color);
 color: var(--n-action-text-color);
 `),H("action",`
 padding: 8px var(--n-option-padding-left);
 font-size: var(--n-option-font-size);
 transition: 
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 border-top: 1px solid var(--n-action-divider-color);
 color: var(--n-action-text-color);
 `),V("base-select-group-header",`
 position: relative;
 cursor: default;
 padding: var(--n-option-padding);
 color: var(--n-group-header-text-color);
 `),V("base-select-option",`
 cursor: pointer;
 position: relative;
 padding: var(--n-option-padding);
 transition:
 color .3s var(--n-bezier),
 opacity .3s var(--n-bezier);
 box-sizing: border-box;
 color: var(--n-option-text-color);
 opacity: 1;
 `,[re("show-checkmark",`
 padding-right: calc(var(--n-option-padding-right) + 20px);
 `),he("&::before",`
 content: "";
 position: absolute;
 left: 4px;
 right: 4px;
 top: 0;
 bottom: 0;
 border-radius: var(--n-border-radius);
 transition: background-color .3s var(--n-bezier);
 `),he("&:active",`
 color: var(--n-option-text-color-pressed);
 `),re("grouped",`
 padding-left: calc(var(--n-option-padding-left) * 1.5);
 `),re("pending",[he("&::before",`
 background-color: var(--n-option-color-pending);
 `)]),re("selected",`
 color: var(--n-option-text-color-active);
 `,[he("&::before",`
 background-color: var(--n-option-color-active);
 `),re("pending",[he("&::before",`
 background-color: var(--n-option-color-active-pending);
 `)])]),re("disabled",`
 cursor: not-allowed;
 `,[Ae("selected",`
 color: var(--n-option-text-color-disabled);
 `),re("selected",`
 opacity: var(--n-option-opacity-disabled);
 `)]),H("check",`
 font-size: 16px;
 position: absolute;
 right: calc(var(--n-option-padding-right) - 4px);
 top: calc(50% - 7px);
 color: var(--n-option-check-color);
 transition: color .3s var(--n-bezier);
 `,[no({enterScale:"0.5"})])])]),Gn=be({name:"InternalSelectMenu",props:Object.assign(Object.assign({},Re.props),{clsPrefix:{type:String,required:!0},scrollable:{type:Boolean,default:!0},treeMate:{type:Object,required:!0},multiple:Boolean,size:{type:String,default:"medium"},value:{type:[String,Number,Array],default:null},autoPending:Boolean,virtualScroll:{type:Boolean,default:!0},show:{type:Boolean,default:!0},labelField:{type:String,default:"label"},valueField:{type:String,default:"value"},loading:Boolean,focusable:Boolean,renderLabel:Function,renderOption:Function,nodeProps:Function,showCheckmark:{type:Boolean,default:!0},onMousedown:Function,onScroll:Function,onFocus:Function,onBlur:Function,onKeyup:Function,onKeydown:Function,onTabOut:Function,onMouseenter:Function,onMouseleave:Function,onResize:Function,resetMenuOnOptionsChange:{type:Boolean,default:!0},inlineThemeDisabled:Boolean,onToggle:Function}),setup(e){const{mergedClsPrefixRef:t,mergedRtlRef:o}=Ze(e),n=It("InternalSelectMenu",o,t),l=Re("InternalSelectMenu","-internal-select-menu",qn,co,e,ae(e,"clsPrefix")),r=M(null),f=M(null),i=M(null),d=E(()=>e.treeMate.getFlattenedNodes()),a=E(()=>Fn(d.value)),c=M(null);function p(){const{treeMate:m}=e;let k=null;const{value:N}=e;N===null?k=m.getFirstAvailableNode():(e.multiple?k=m.getNode((N||[])[(N||[]).length-1]):k=m.getNode(N),(!k||k.disabled)&&(k=m.getFirstAvailableNode())),z(k||null)}function S(){const{value:m}=c;m&&!e.treeMate.getNode(m.key)&&(c.value=null)}let v;Be(()=>e.show,m=>{m?v=Be(()=>e.treeMate,()=>{e.resetMenuOnOptionsChange?(e.autoPending?p():S(),Ot($)):S()},{immediate:!0}):v==null||v()},{immediate:!0}),Qt(()=>{v==null||v()});const u=E(()=>kt(l.value.self[oe("optionHeight",e.size)])),T=E(()=>Ne(l.value.self[oe("padding",e.size)])),C=E(()=>e.multiple&&Array.isArray(e.value)?new Set(e.value):new Set),w=E(()=>{const m=d.value;return m&&m.length===0});function F(m){const{onToggle:k}=e;k&&k(m)}function h(m){const{onScroll:k}=e;k&&k(m)}function x(m){var k;(k=i.value)===null||k===void 0||k.sync(),h(m)}function I(){var m;(m=i.value)===null||m===void 0||m.sync()}function K(){const{value:m}=c;return m||null}function A(m,k){k.disabled||z(k,!1)}function _(m,k){k.disabled||F(k)}function D(m){var k;Ge(m,"action")||(k=e.onKeyup)===null||k===void 0||k.call(e,m)}function Q(m){var k;Ge(m,"action")||(k=e.onKeydown)===null||k===void 0||k.call(e,m)}function ee(m){var k;(k=e.onMousedown)===null||k===void 0||k.call(e,m),!e.focusable&&m.preventDefault()}function ne(){const{value:m}=c;m&&z(m.getNext({loop:!0}),!0)}function b(){const{value:m}=c;m&&z(m.getPrev({loop:!0}),!0)}function z(m,k=!1){c.value=m,k&&$()}function $(){var m,k;const N=c.value;if(!N)return;const se=a.value(N.key);se!==null&&(e.virtualScroll?(m=f.value)===null||m===void 0||m.scrollTo({index:se}):(k=i.value)===null||k===void 0||k.scrollTo({index:se,elSize:u.value}))}function G(m){var k,N;!((k=r.value)===null||k===void 0)&&k.contains(m.target)&&((N=e.onFocus)===null||N===void 0||N.call(e,m))}function J(m){var k,N;!((k=r.value)===null||k===void 0)&&k.contains(m.relatedTarget)||(N=e.onBlur)===null||N===void 0||N.call(e,m)}st(Bt,{handleOptionMouseEnter:A,handleOptionClick:_,valueSetRef:C,pendingTmNodeRef:c,nodePropsRef:ae(e,"nodeProps"),showCheckmarkRef:ae(e,"showCheckmark"),multipleRef:ae(e,"multiple"),valueRef:ae(e,"value"),renderLabelRef:ae(e,"renderLabel"),renderOptionRef:ae(e,"renderOption"),labelFieldRef:ae(e,"labelField"),valueFieldRef:ae(e,"valueField")}),st(yn,r),Xe(()=>{const{value:m}=i;m&&m.sync()});const Y=E(()=>{const{size:m}=e,{common:{cubicBezierEaseInOut:k},self:{height:N,borderRadius:se,color:pe,groupHeaderTextColor:me,actionDividerColor:ve,optionTextColorPressed:ce,optionTextColor:ye,optionTextColorDisabled:ue,optionTextColorActive:Oe,optionOpacityDisabled:De,optionCheckColor:xe,actionTextColor:Pe,optionColorPending:Se,optionColorActive:ge,loadingColor:Fe,loadingSize:Ce,optionColorActivePending:We,[oe("optionFontSize",m)]:Le,[oe("optionHeight",m)]:Ee,[oe("optionPadding",m)]:fe}}=l.value;return{"--n-height":N,"--n-action-divider-color":ve,"--n-action-text-color":Pe,"--n-bezier":k,"--n-border-radius":se,"--n-color":pe,"--n-option-font-size":Le,"--n-group-header-text-color":me,"--n-option-check-color":xe,"--n-option-color-pending":Se,"--n-option-color-active":ge,"--n-option-color-active-pending":We,"--n-option-height":Ee,"--n-option-opacity-disabled":De,"--n-option-text-color":ye,"--n-option-text-color-active":Oe,"--n-option-text-color-disabled":ue,"--n-option-text-color-pressed":ce,"--n-option-padding":fe,"--n-option-padding-left":Ne(fe,"left"),"--n-option-padding-right":Ne(fe,"right"),"--n-loading-color":Fe,"--n-loading-size":Ce}}),{inlineThemeDisabled:Z}=e,U=Z?Je("internal-select-menu",E(()=>e.size[0]),Y,e):void 0,te={selfRef:r,next:ne,prev:b,getPendingTmNode:K};return ao(r,e.onResize),Object.assign({mergedTheme:l,mergedClsPrefix:t,rtlEnabled:n,virtualListRef:f,scrollbarRef:i,itemSize:u,padding:T,flattenedNodes:d,empty:w,virtualListContainer(){const{value:m}=f;return m==null?void 0:m.listElRef},virtualListContent(){const{value:m}=f;return m==null?void 0:m.itemsElRef},doScroll:h,handleFocusin:G,handleFocusout:J,handleKeyUp:D,handleKeyDown:Q,handleMouseDown:ee,handleVirtualListResize:I,handleVirtualListScroll:x,cssVars:Z?void 0:Y,themeClass:U==null?void 0:U.themeClass,onRender:U==null?void 0:U.onRender},te)},render(){const{$slots:e,virtualScroll:t,clsPrefix:o,mergedTheme:n,themeClass:l,onRender:r}=this;return r==null||r(),g("div",{ref:"selfRef",tabindex:this.focusable?0:-1,class:[`${o}-base-select-menu`,this.rtlEnabled&&`${o}-base-select-menu--rtl`,l,this.multiple&&`${o}-base-select-menu--multiple`],style:this.cssVars,onFocusin:this.handleFocusin,onFocusout:this.handleFocusout,onKeyup:this.handleKeyUp,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave},ct(e.header,f=>f&&g("div",{class:`${o}-base-select-menu__header`,"data-header":!0,key:"header"},f)),this.loading?g("div",{class:`${o}-base-select-menu__loading`},g(Go,{clsPrefix:o,strokeWidth:20})):this.empty?g("div",{class:`${o}-base-select-menu__empty`,"data-empty":!0},Yo(e.empty,()=>[g(jn,{theme:n.peers.Empty,themeOverrides:n.peerOverrides.Empty,size:this.size})])):g(Xo,{ref:"scrollbarRef",theme:n.peers.Scrollbar,themeOverrides:n.peerOverrides.Scrollbar,scrollable:this.scrollable,container:t?this.virtualListContainer:void 0,content:t?this.virtualListContent:void 0,onScroll:t?void 0:this.doScroll},{default:()=>t?g(En,{ref:"virtualListRef",class:`${o}-virtual-list`,items:this.flattenedNodes,itemSize:this.itemSize,showScrollbar:!1,paddingTop:this.padding.top,paddingBottom:this.padding.bottom,onResize:this.handleVirtualListResize,onScroll:this.handleVirtualListScroll,itemResizable:!0},{default:({item:f})=>f.isGroup?g(Ut,{key:f.key,clsPrefix:o,tmNode:f}):f.ignored?null:g(Vt,{clsPrefix:o,key:f.key,tmNode:f})}):g("div",{class:`${o}-base-select-menu-option-wrapper`,style:{paddingTop:this.padding.top,paddingBottom:this.padding.bottom}},this.flattenedNodes.map(f=>f.isGroup?g(Ut,{key:f.key,clsPrefix:o,tmNode:f}):g(Vt,{clsPrefix:o,key:f.key,tmNode:f})))}),ct(e.action,f=>f&&[g("div",{class:`${o}-base-select-menu__action`,"data-action":!0,key:"action"},f),g(Dn,{onFocus:this.onTabOut,key:"focus-detector"})]))}}),Xn={closeIconSizeTiny:"12px",closeIconSizeSmall:"12px",closeIconSizeMedium:"14px",closeIconSizeLarge:"14px",closeSizeTiny:"16px",closeSizeSmall:"16px",closeSizeMedium:"18px",closeSizeLarge:"18px",padding:"0 7px",closeMargin:"0 0 0 4px"};function Yn(e){const{textColor2:t,primaryColorHover:o,primaryColorPressed:n,primaryColor:l,infoColor:r,successColor:f,warningColor:i,errorColor:d,baseColor:a,borderColor:c,opacityDisabled:p,tagColor:S,closeIconColor:v,closeIconColorHover:u,closeIconColorPressed:T,borderRadiusSmall:C,fontSizeMini:w,fontSizeTiny:F,fontSizeSmall:h,fontSizeMedium:x,heightMini:I,heightTiny:K,heightSmall:A,heightMedium:_,closeColorHover:D,closeColorPressed:Q,buttonColor2Hover:ee,buttonColor2Pressed:ne,fontWeightStrong:b}=e;return Object.assign(Object.assign({},Xn),{closeBorderRadius:C,heightTiny:I,heightSmall:K,heightMedium:A,heightLarge:_,borderRadius:C,opacityDisabled:p,fontSizeTiny:w,fontSizeSmall:F,fontSizeMedium:h,fontSizeLarge:x,fontWeightStrong:b,textColorCheckable:t,textColorHoverCheckable:t,textColorPressedCheckable:t,textColorChecked:a,colorCheckable:"#0000",colorHoverCheckable:ee,colorPressedCheckable:ne,colorChecked:l,colorCheckedHover:o,colorCheckedPressed:n,border:`1px solid ${c}`,textColor:t,color:S,colorBordered:"rgb(250, 250, 252)",closeIconColor:v,closeIconColorHover:u,closeIconColorPressed:T,closeColorHover:D,closeColorPressed:Q,borderPrimary:`1px solid ${X(l,{alpha:.3})}`,textColorPrimary:l,colorPrimary:X(l,{alpha:.12}),colorBorderedPrimary:X(l,{alpha:.1}),closeIconColorPrimary:l,closeIconColorHoverPrimary:l,closeIconColorPressedPrimary:l,closeColorHoverPrimary:X(l,{alpha:.12}),closeColorPressedPrimary:X(l,{alpha:.18}),borderInfo:`1px solid ${X(r,{alpha:.3})}`,textColorInfo:r,colorInfo:X(r,{alpha:.12}),colorBorderedInfo:X(r,{alpha:.1}),closeIconColorInfo:r,closeIconColorHoverInfo:r,closeIconColorPressedInfo:r,closeColorHoverInfo:X(r,{alpha:.12}),closeColorPressedInfo:X(r,{alpha:.18}),borderSuccess:`1px solid ${X(f,{alpha:.3})}`,textColorSuccess:f,colorSuccess:X(f,{alpha:.12}),colorBorderedSuccess:X(f,{alpha:.1}),closeIconColorSuccess:f,closeIconColorHoverSuccess:f,closeIconColorPressedSuccess:f,closeColorHoverSuccess:X(f,{alpha:.12}),closeColorPressedSuccess:X(f,{alpha:.18}),borderWarning:`1px solid ${X(i,{alpha:.35})}`,textColorWarning:i,colorWarning:X(i,{alpha:.15}),colorBorderedWarning:X(i,{alpha:.12}),closeIconColorWarning:i,closeIconColorHoverWarning:i,closeIconColorPressedWarning:i,closeColorHoverWarning:X(i,{alpha:.12}),closeColorPressedWarning:X(i,{alpha:.18}),borderError:`1px solid ${X(d,{alpha:.23})}`,textColorError:d,colorError:X(d,{alpha:.1}),colorBorderedError:X(d,{alpha:.08}),closeIconColorError:d,closeIconColorHoverError:d,closeIconColorPressedError:d,closeColorHoverError:X(d,{alpha:.12}),closeColorPressedError:X(d,{alpha:.18})})}const Zn={name:"Tag",common:Ye,self:Yn},Jn={color:Object,type:{type:String,default:"default"},round:Boolean,size:{type:String,default:"medium"},closable:Boolean,disabled:{type:Boolean,default:void 0}},Qn=V("tag",`
 --n-close-margin: var(--n-close-margin-top) var(--n-close-margin-right) var(--n-close-margin-bottom) var(--n-close-margin-left);
 white-space: nowrap;
 position: relative;
 box-sizing: border-box;
 cursor: default;
 display: inline-flex;
 align-items: center;
 flex-wrap: nowrap;
 padding: var(--n-padding);
 border-radius: var(--n-border-radius);
 color: var(--n-text-color);
 background-color: var(--n-color);
 transition: 
 border-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 opacity .3s var(--n-bezier);
 line-height: 1;
 height: var(--n-height);
 font-size: var(--n-font-size);
`,[re("strong",`
 font-weight: var(--n-font-weight-strong);
 `),H("border",`
 pointer-events: none;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 border-radius: inherit;
 border: var(--n-border);
 transition: border-color .3s var(--n-bezier);
 `),H("icon",`
 display: flex;
 margin: 0 4px 0 0;
 color: var(--n-text-color);
 transition: color .3s var(--n-bezier);
 font-size: var(--n-avatar-size-override);
 `),H("avatar",`
 display: flex;
 margin: 0 6px 0 0;
 `),H("close",`
 margin: var(--n-close-margin);
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 `),re("round",`
 padding: 0 calc(var(--n-height) / 3);
 border-radius: calc(var(--n-height) / 2);
 `,[H("icon",`
 margin: 0 4px 0 calc((var(--n-height) - 8px) / -2);
 `),H("avatar",`
 margin: 0 6px 0 calc((var(--n-height) - 8px) / -2);
 `),re("closable",`
 padding: 0 calc(var(--n-height) / 4) 0 calc(var(--n-height) / 3);
 `)]),re("icon, avatar",[re("round",`
 padding: 0 calc(var(--n-height) / 3) 0 calc(var(--n-height) / 2);
 `)]),re("disabled",`
 cursor: not-allowed !important;
 opacity: var(--n-opacity-disabled);
 `),re("checkable",`
 cursor: pointer;
 box-shadow: none;
 color: var(--n-text-color-checkable);
 background-color: var(--n-color-checkable);
 `,[Ae("disabled",[he("&:hover","background-color: var(--n-color-hover-checkable);",[Ae("checked","color: var(--n-text-color-hover-checkable);")]),he("&:active","background-color: var(--n-color-pressed-checkable);",[Ae("checked","color: var(--n-text-color-pressed-checkable);")])]),re("checked",`
 color: var(--n-text-color-checked);
 background-color: var(--n-color-checked);
 `,[Ae("disabled",[he("&:hover","background-color: var(--n-color-checked-hover);"),he("&:active","background-color: var(--n-color-checked-pressed);")])])])]),er=Object.assign(Object.assign(Object.assign({},Re.props),Jn),{bordered:{type:Boolean,default:void 0},checked:Boolean,checkable:Boolean,strong:Boolean,triggerClickOnClose:Boolean,onClose:[Array,Function],onMouseenter:Function,onMouseleave:Function,"onUpdate:checked":Function,onUpdateChecked:Function,internalCloseFocusable:{type:Boolean,default:!0},internalCloseIsButtonTag:{type:Boolean,default:!0},onCheckedChange:Function}),tr=Jo("n-tag"),Ct=be({name:"Tag",props:er,slots:Object,setup(e){const t=M(null),{mergedBorderedRef:o,mergedClsPrefixRef:n,inlineThemeDisabled:l,mergedRtlRef:r}=Ze(e),f=Re("Tag","-tag",Qn,Zn,e,n);st(tr,{roundRef:ae(e,"round")});function i(){if(!e.disabled&&e.checkable){const{checked:v,onCheckedChange:u,onUpdateChecked:T,"onUpdate:checked":C}=e;T&&T(!v),C&&C(!v),u&&u(!v)}}function d(v){if(e.triggerClickOnClose||v.stopPropagation(),!e.disabled){const{onClose:u}=e;u&&we(u,v)}}const a={setTextContent(v){const{value:u}=t;u&&(u.textContent=v)}},c=It("Tag",r,n),p=E(()=>{const{type:v,size:u,color:{color:T,textColor:C}={}}=e,{common:{cubicBezierEaseInOut:w},self:{padding:F,closeMargin:h,borderRadius:x,opacityDisabled:I,textColorCheckable:K,textColorHoverCheckable:A,textColorPressedCheckable:_,textColorChecked:D,colorCheckable:Q,colorHoverCheckable:ee,colorPressedCheckable:ne,colorChecked:b,colorCheckedHover:z,colorCheckedPressed:$,closeBorderRadius:G,fontWeightStrong:J,[oe("colorBordered",v)]:Y,[oe("closeSize",u)]:Z,[oe("closeIconSize",u)]:U,[oe("fontSize",u)]:te,[oe("height",u)]:m,[oe("color",v)]:k,[oe("textColor",v)]:N,[oe("border",v)]:se,[oe("closeIconColor",v)]:pe,[oe("closeIconColorHover",v)]:me,[oe("closeIconColorPressed",v)]:ve,[oe("closeColorHover",v)]:ce,[oe("closeColorPressed",v)]:ye}}=f.value,ue=Ne(h);return{"--n-font-weight-strong":J,"--n-avatar-size-override":`calc(${m} - 8px)`,"--n-bezier":w,"--n-border-radius":x,"--n-border":se,"--n-close-icon-size":U,"--n-close-color-pressed":ye,"--n-close-color-hover":ce,"--n-close-border-radius":G,"--n-close-icon-color":pe,"--n-close-icon-color-hover":me,"--n-close-icon-color-pressed":ve,"--n-close-icon-color-disabled":pe,"--n-close-margin-top":ue.top,"--n-close-margin-right":ue.right,"--n-close-margin-bottom":ue.bottom,"--n-close-margin-left":ue.left,"--n-close-size":Z,"--n-color":T||(o.value?Y:k),"--n-color-checkable":Q,"--n-color-checked":b,"--n-color-checked-hover":z,"--n-color-checked-pressed":$,"--n-color-hover-checkable":ee,"--n-color-pressed-checkable":ne,"--n-font-size":te,"--n-height":m,"--n-opacity-disabled":I,"--n-padding":F,"--n-text-color":C||N,"--n-text-color-checkable":K,"--n-text-color-checked":D,"--n-text-color-hover-checkable":A,"--n-text-color-pressed-checkable":_}}),S=l?Je("tag",E(()=>{let v="";const{type:u,size:T,color:{color:C,textColor:w}={}}=e;return v+=u[0],v+=T[0],C&&(v+=`a${$t(C)}`),w&&(v+=`b${$t(w)}`),o.value&&(v+="c"),v}),p,e):void 0;return Object.assign(Object.assign({},a),{rtlEnabled:c,mergedClsPrefix:n,contentRef:t,mergedBordered:o,handleClick:i,handleCloseClick:d,cssVars:l?void 0:p,themeClass:S==null?void 0:S.themeClass,onRender:S==null?void 0:S.onRender})},render(){var e,t;const{mergedClsPrefix:o,rtlEnabled:n,closable:l,color:{borderColor:r}={},round:f,onRender:i,$slots:d}=this;i==null||i();const a=ct(d.avatar,p=>p&&g("div",{class:`${o}-tag__avatar`},p)),c=ct(d.icon,p=>p&&g("div",{class:`${o}-tag__icon`},p));return g("div",{class:[`${o}-tag`,this.themeClass,{[`${o}-tag--rtl`]:n,[`${o}-tag--strong`]:this.strong,[`${o}-tag--disabled`]:this.disabled,[`${o}-tag--checkable`]:this.checkable,[`${o}-tag--checked`]:this.checkable&&this.checked,[`${o}-tag--round`]:f,[`${o}-tag--avatar`]:a,[`${o}-tag--icon`]:c,[`${o}-tag--closable`]:l}],style:this.cssVars,onClick:this.handleClick,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave},c||a,g("span",{class:`${o}-tag__content`,ref:"contentRef"},(t=(e=this.$slots).default)===null||t===void 0?void 0:t.call(e)),!this.checkable&&l?g(Zo,{clsPrefix:o,class:`${o}-tag__close`,disabled:this.disabled,onClick:this.handleCloseClick,focusable:this.internalCloseFocusable,round:f,isButtonTag:this.internalCloseIsButtonTag,absolute:!0}):null,!this.checkable&&this.mergedBordered?g("div",{class:`${o}-tag__border`,style:{borderColor:r}}):null)}}),or={paddingSingle:"0 26px 0 12px",paddingMultiple:"3px 26px 0 12px",clearSize:"16px",arrowSize:"16px"};function nr(e){const{borderRadius:t,textColor2:o,textColorDisabled:n,inputColor:l,inputColorDisabled:r,primaryColor:f,primaryColorHover:i,warningColor:d,warningColorHover:a,errorColor:c,errorColorHover:p,borderColor:S,iconColor:v,iconColorDisabled:u,clearColor:T,clearColorHover:C,clearColorPressed:w,placeholderColor:F,placeholderColorDisabled:h,fontSizeTiny:x,fontSizeSmall:I,fontSizeMedium:K,fontSizeLarge:A,heightTiny:_,heightSmall:D,heightMedium:Q,heightLarge:ee,fontWeight:ne}=e;return Object.assign(Object.assign({},or),{fontSizeTiny:x,fontSizeSmall:I,fontSizeMedium:K,fontSizeLarge:A,heightTiny:_,heightSmall:D,heightMedium:Q,heightLarge:ee,borderRadius:t,fontWeight:ne,textColor:o,textColorDisabled:n,placeholderColor:F,placeholderColorDisabled:h,color:l,colorDisabled:r,colorActive:l,border:`1px solid ${S}`,borderHover:`1px solid ${i}`,borderActive:`1px solid ${f}`,borderFocus:`1px solid ${i}`,boxShadowHover:"none",boxShadowActive:`0 0 0 2px ${X(f,{alpha:.2})}`,boxShadowFocus:`0 0 0 2px ${X(f,{alpha:.2})}`,caretColor:f,arrowColor:v,arrowColorDisabled:u,loadingColor:f,borderWarning:`1px solid ${d}`,borderHoverWarning:`1px solid ${a}`,borderActiveWarning:`1px solid ${d}`,borderFocusWarning:`1px solid ${a}`,boxShadowHoverWarning:"none",boxShadowActiveWarning:`0 0 0 2px ${X(d,{alpha:.2})}`,boxShadowFocusWarning:`0 0 0 2px ${X(d,{alpha:.2})}`,colorActiveWarning:l,caretColorWarning:d,borderError:`1px solid ${c}`,borderHoverError:`1px solid ${p}`,borderActiveError:`1px solid ${c}`,borderFocusError:`1px solid ${p}`,boxShadowHoverError:"none",boxShadowActiveError:`0 0 0 2px ${X(c,{alpha:.2})}`,boxShadowFocusError:`0 0 0 2px ${X(c,{alpha:.2})}`,colorActiveError:l,caretColorError:c,clearColor:T,clearColorHover:C,clearColorPressed:w})}const uo=Pt({name:"InternalSelection",common:Ye,peers:{Popover:xn},self:nr}),rr=he([V("base-selection",`
 --n-padding-single: var(--n-padding-single-top) var(--n-padding-single-right) var(--n-padding-single-bottom) var(--n-padding-single-left);
 --n-padding-multiple: var(--n-padding-multiple-top) var(--n-padding-multiple-right) var(--n-padding-multiple-bottom) var(--n-padding-multiple-left);
 position: relative;
 z-index: auto;
 box-shadow: none;
 width: 100%;
 max-width: 100%;
 display: inline-block;
 vertical-align: bottom;
 border-radius: var(--n-border-radius);
 min-height: var(--n-height);
 line-height: 1.5;
 font-size: var(--n-font-size);
 `,[V("base-loading",`
 color: var(--n-loading-color);
 `),V("base-selection-tags","min-height: var(--n-height);"),H("border, state-border",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 pointer-events: none;
 border: var(--n-border);
 border-radius: inherit;
 transition:
 box-shadow .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `),H("state-border",`
 z-index: 1;
 border-color: #0000;
 `),V("base-suffix",`
 cursor: pointer;
 position: absolute;
 top: 50%;
 transform: translateY(-50%);
 right: 10px;
 `,[H("arrow",`
 font-size: var(--n-arrow-size);
 color: var(--n-arrow-color);
 transition: color .3s var(--n-bezier);
 `)]),V("base-selection-overlay",`
 display: flex;
 align-items: center;
 white-space: nowrap;
 pointer-events: none;
 position: absolute;
 top: 0;
 right: 0;
 bottom: 0;
 left: 0;
 padding: var(--n-padding-single);
 transition: color .3s var(--n-bezier);
 `,[H("wrapper",`
 flex-basis: 0;
 flex-grow: 1;
 overflow: hidden;
 text-overflow: ellipsis;
 `)]),V("base-selection-placeholder",`
 color: var(--n-placeholder-color);
 `,[H("inner",`
 max-width: 100%;
 overflow: hidden;
 `)]),V("base-selection-tags",`
 cursor: pointer;
 outline: none;
 box-sizing: border-box;
 position: relative;
 z-index: auto;
 display: flex;
 padding: var(--n-padding-multiple);
 flex-wrap: wrap;
 align-items: center;
 width: 100%;
 vertical-align: bottom;
 background-color: var(--n-color);
 border-radius: inherit;
 transition:
 color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 `),V("base-selection-label",`
 height: var(--n-height);
 display: inline-flex;
 width: 100%;
 vertical-align: bottom;
 cursor: pointer;
 outline: none;
 z-index: auto;
 box-sizing: border-box;
 position: relative;
 transition:
 color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 border-radius: inherit;
 background-color: var(--n-color);
 align-items: center;
 `,[V("base-selection-input",`
 font-size: inherit;
 line-height: inherit;
 outline: none;
 cursor: pointer;
 box-sizing: border-box;
 border:none;
 width: 100%;
 padding: var(--n-padding-single);
 background-color: #0000;
 color: var(--n-text-color);
 transition: color .3s var(--n-bezier);
 caret-color: var(--n-caret-color);
 `,[H("content",`
 text-overflow: ellipsis;
 overflow: hidden;
 white-space: nowrap; 
 `)]),H("render-label",`
 color: var(--n-text-color);
 `)]),Ae("disabled",[he("&:hover",[H("state-border",`
 box-shadow: var(--n-box-shadow-hover);
 border: var(--n-border-hover);
 `)]),re("focus",[H("state-border",`
 box-shadow: var(--n-box-shadow-focus);
 border: var(--n-border-focus);
 `)]),re("active",[H("state-border",`
 box-shadow: var(--n-box-shadow-active);
 border: var(--n-border-active);
 `),V("base-selection-label","background-color: var(--n-color-active);"),V("base-selection-tags","background-color: var(--n-color-active);")])]),re("disabled","cursor: not-allowed;",[H("arrow",`
 color: var(--n-arrow-color-disabled);
 `),V("base-selection-label",`
 cursor: not-allowed;
 background-color: var(--n-color-disabled);
 `,[V("base-selection-input",`
 cursor: not-allowed;
 color: var(--n-text-color-disabled);
 `),H("render-label",`
 color: var(--n-text-color-disabled);
 `)]),V("base-selection-tags",`
 cursor: not-allowed;
 background-color: var(--n-color-disabled);
 `),V("base-selection-placeholder",`
 cursor: not-allowed;
 color: var(--n-placeholder-color-disabled);
 `)]),V("base-selection-input-tag",`
 height: calc(var(--n-height) - 6px);
 line-height: calc(var(--n-height) - 6px);
 outline: none;
 display: none;
 position: relative;
 margin-bottom: 3px;
 max-width: 100%;
 vertical-align: bottom;
 `,[H("input",`
 font-size: inherit;
 font-family: inherit;
 min-width: 1px;
 padding: 0;
 background-color: #0000;
 outline: none;
 border: none;
 max-width: 100%;
 overflow: hidden;
 width: 1em;
 line-height: inherit;
 cursor: pointer;
 color: var(--n-text-color);
 caret-color: var(--n-caret-color);
 `),H("mirror",`
 position: absolute;
 left: 0;
 top: 0;
 white-space: pre;
 visibility: hidden;
 user-select: none;
 -webkit-user-select: none;
 opacity: 0;
 `)]),["warning","error"].map(e=>re(`${e}-status`,[H("state-border",`border: var(--n-border-${e});`),Ae("disabled",[he("&:hover",[H("state-border",`
 box-shadow: var(--n-box-shadow-hover-${e});
 border: var(--n-border-hover-${e});
 `)]),re("active",[H("state-border",`
 box-shadow: var(--n-box-shadow-active-${e});
 border: var(--n-border-active-${e});
 `),V("base-selection-label",`background-color: var(--n-color-active-${e});`),V("base-selection-tags",`background-color: var(--n-color-active-${e});`)]),re("focus",[H("state-border",`
 box-shadow: var(--n-box-shadow-focus-${e});
 border: var(--n-border-focus-${e});
 `)])])]))]),V("base-selection-popover",`
 margin-bottom: -3px;
 display: flex;
 flex-wrap: wrap;
 margin-right: -8px;
 `),V("base-selection-tag-wrapper",`
 max-width: 100%;
 display: inline-flex;
 padding: 0 7px 3px 0;
 `,[he("&:last-child","padding-right: 0;"),V("tag",`
 font-size: 14px;
 max-width: 100%;
 `,[H("content",`
 line-height: 1.25;
 text-overflow: ellipsis;
 overflow: hidden;
 `)])])]),lr=be({name:"InternalSelection",props:Object.assign(Object.assign({},Re.props),{clsPrefix:{type:String,required:!0},bordered:{type:Boolean,default:void 0},active:Boolean,pattern:{type:String,default:""},placeholder:String,selectedOption:{type:Object,default:null},selectedOptions:{type:Array,default:null},labelField:{type:String,default:"label"},valueField:{type:String,default:"value"},multiple:Boolean,filterable:Boolean,clearable:Boolean,disabled:Boolean,size:{type:String,default:"medium"},loading:Boolean,autofocus:Boolean,showArrow:{type:Boolean,default:!0},inputProps:Object,focused:Boolean,renderTag:Function,onKeydown:Function,onClick:Function,onBlur:Function,onFocus:Function,onDeleteOption:Function,maxTagCount:[String,Number],ellipsisTagPopoverProps:Object,onClear:Function,onPatternInput:Function,onPatternFocus:Function,onPatternBlur:Function,renderLabel:Function,status:String,inlineThemeDisabled:Boolean,ignoreComposition:{type:Boolean,default:!0},onResize:Function}),setup(e){const{mergedClsPrefixRef:t,mergedRtlRef:o}=Ze(e),n=It("InternalSelection",o,t),l=M(null),r=M(null),f=M(null),i=M(null),d=M(null),a=M(null),c=M(null),p=M(null),S=M(null),v=M(null),u=M(!1),T=M(!1),C=M(!1),w=Re("InternalSelection","-internal-selection",rr,uo,e,ae(e,"clsPrefix")),F=E(()=>e.clearable&&!e.disabled&&(C.value||e.active)),h=E(()=>e.selectedOption?e.renderTag?e.renderTag({option:e.selectedOption,handleClose:()=>{}}):e.renderLabel?e.renderLabel(e.selectedOption,!0):He(e.selectedOption[e.labelField],e.selectedOption,!0):e.placeholder),x=E(()=>{const y=e.selectedOption;if(y)return y[e.labelField]}),I=E(()=>e.multiple?!!(Array.isArray(e.selectedOptions)&&e.selectedOptions.length):e.selectedOption!==null);function K(){var y;const{value:O}=l;if(O){const{value:le}=r;le&&(le.style.width=`${O.offsetWidth}px`,e.maxTagCount!=="responsive"&&((y=S.value)===null||y===void 0||y.sync({showAllItemsBeforeCalculate:!1})))}}function A(){const{value:y}=v;y&&(y.style.display="none")}function _(){const{value:y}=v;y&&(y.style.display="inline-block")}Be(ae(e,"active"),y=>{y||A()}),Be(ae(e,"pattern"),()=>{e.multiple&&Ot(K)});function D(y){const{onFocus:O}=e;O&&O(y)}function Q(y){const{onBlur:O}=e;O&&O(y)}function ee(y){const{onDeleteOption:O}=e;O&&O(y)}function ne(y){const{onClear:O}=e;O&&O(y)}function b(y){const{onPatternInput:O}=e;O&&O(y)}function z(y){var O;(!y.relatedTarget||!(!((O=f.value)===null||O===void 0)&&O.contains(y.relatedTarget)))&&D(y)}function $(y){var O;!((O=f.value)===null||O===void 0)&&O.contains(y.relatedTarget)||Q(y)}function G(y){ne(y)}function J(){C.value=!0}function Y(){C.value=!1}function Z(y){!e.active||!e.filterable||y.target!==r.value&&y.preventDefault()}function U(y){ee(y)}const te=M(!1);function m(y){if(y.key==="Backspace"&&!te.value&&!e.pattern.length){const{selectedOptions:O}=e;O!=null&&O.length&&U(O[O.length-1])}}let k=null;function N(y){const{value:O}=l;if(O){const le=y.target.value;O.textContent=le,K()}e.ignoreComposition&&te.value?k=y:b(y)}function se(){te.value=!0}function pe(){te.value=!1,e.ignoreComposition&&b(k),k=null}function me(y){var O;T.value=!0,(O=e.onPatternFocus)===null||O===void 0||O.call(e,y)}function ve(y){var O;T.value=!1,(O=e.onPatternBlur)===null||O===void 0||O.call(e,y)}function ce(){var y,O;if(e.filterable)T.value=!1,(y=a.value)===null||y===void 0||y.blur(),(O=r.value)===null||O===void 0||O.blur();else if(e.multiple){const{value:le}=i;le==null||le.blur()}else{const{value:le}=d;le==null||le.blur()}}function ye(){var y,O,le;e.filterable?(T.value=!1,(y=a.value)===null||y===void 0||y.focus()):e.multiple?(O=i.value)===null||O===void 0||O.focus():(le=d.value)===null||le===void 0||le.focus()}function ue(){const{value:y}=r;y&&(_(),y.focus())}function Oe(){const{value:y}=r;y&&y.blur()}function De(y){const{value:O}=c;O&&O.setTextContent(`+${y}`)}function xe(){const{value:y}=p;return y}function Pe(){return r.value}let Se=null;function ge(){Se!==null&&window.clearTimeout(Se)}function Fe(){e.active||(ge(),Se=window.setTimeout(()=>{I.value&&(u.value=!0)},100))}function Ce(){ge()}function We(y){y||(ge(),u.value=!1)}Be(I,y=>{y||(u.value=!1)}),Xe(()=>{Qo(()=>{const y=a.value;y&&(e.disabled?y.removeAttribute("tabindex"):y.tabIndex=T.value?-1:0)})}),ao(f,e.onResize);const{inlineThemeDisabled:Le}=e,Ee=E(()=>{const{size:y}=e,{common:{cubicBezierEaseInOut:O},self:{fontWeight:le,borderRadius:ht,color:vt,placeholderColor:Qe,textColor:et,paddingSingle:tt,paddingMultiple:gt,caretColor:bt,colorDisabled:ot,textColorDisabled:Ie,placeholderColorDisabled:s,colorActive:R,boxShadowFocus:B,boxShadowActive:q,boxShadowHover:W,border:L,borderFocus:j,borderHover:ie,borderActive:ke,arrowColor:po,arrowColorDisabled:mo,loadingColor:yo,colorActiveWarning:xo,boxShadowFocusWarning:Co,boxShadowActiveWarning:wo,boxShadowHoverWarning:So,borderWarning:ko,borderFocusWarning:Ro,borderHoverWarning:Fo,borderActiveWarning:To,colorActiveError:zo,boxShadowFocusError:Oo,boxShadowActiveError:Po,boxShadowHoverError:Io,borderError:Bo,borderFocusError:Mo,borderHoverError:Eo,borderActiveError:$o,clearColor:Ao,clearColorHover:_o,clearColorPressed:Do,clearSize:Lo,arrowSize:Ho,[oe("height",y)]:No,[oe("fontSize",y)]:Wo}}=w.value,nt=Ne(tt),rt=Ne(gt);return{"--n-bezier":O,"--n-border":L,"--n-border-active":ke,"--n-border-focus":j,"--n-border-hover":ie,"--n-border-radius":ht,"--n-box-shadow-active":q,"--n-box-shadow-focus":B,"--n-box-shadow-hover":W,"--n-caret-color":bt,"--n-color":vt,"--n-color-active":R,"--n-color-disabled":ot,"--n-font-size":Wo,"--n-height":No,"--n-padding-single-top":nt.top,"--n-padding-multiple-top":rt.top,"--n-padding-single-right":nt.right,"--n-padding-multiple-right":rt.right,"--n-padding-single-left":nt.left,"--n-padding-multiple-left":rt.left,"--n-padding-single-bottom":nt.bottom,"--n-padding-multiple-bottom":rt.bottom,"--n-placeholder-color":Qe,"--n-placeholder-color-disabled":s,"--n-text-color":et,"--n-text-color-disabled":Ie,"--n-arrow-color":po,"--n-arrow-color-disabled":mo,"--n-loading-color":yo,"--n-color-active-warning":xo,"--n-box-shadow-focus-warning":Co,"--n-box-shadow-active-warning":wo,"--n-box-shadow-hover-warning":So,"--n-border-warning":ko,"--n-border-focus-warning":Ro,"--n-border-hover-warning":Fo,"--n-border-active-warning":To,"--n-color-active-error":zo,"--n-box-shadow-focus-error":Oo,"--n-box-shadow-active-error":Po,"--n-box-shadow-hover-error":Io,"--n-border-error":Bo,"--n-border-focus-error":Mo,"--n-border-hover-error":Eo,"--n-border-active-error":$o,"--n-clear-size":Lo,"--n-clear-color":Ao,"--n-clear-color-hover":_o,"--n-clear-color-pressed":Do,"--n-arrow-size":Ho,"--n-font-weight":le}}),fe=Le?Je("internal-selection",E(()=>e.size[0]),Ee,e):void 0;return{mergedTheme:w,mergedClearable:F,mergedClsPrefix:t,rtlEnabled:n,patternInputFocused:T,filterablePlaceholder:h,label:x,selected:I,showTagsPanel:u,isComposing:te,counterRef:c,counterWrapperRef:p,patternInputMirrorRef:l,patternInputRef:r,selfRef:f,multipleElRef:i,singleElRef:d,patternInputWrapperRef:a,overflowRef:S,inputTagElRef:v,handleMouseDown:Z,handleFocusin:z,handleClear:G,handleMouseEnter:J,handleMouseLeave:Y,handleDeleteOption:U,handlePatternKeyDown:m,handlePatternInputInput:N,handlePatternInputBlur:ve,handlePatternInputFocus:me,handleMouseEnterCounter:Fe,handleMouseLeaveCounter:Ce,handleFocusout:$,handleCompositionEnd:pe,handleCompositionStart:se,onPopoverUpdateShow:We,focus:ye,focusInput:ue,blur:ce,blurInput:Oe,updateCounter:De,getCounter:xe,getTail:Pe,renderLabel:e.renderLabel,cssVars:Le?void 0:Ee,themeClass:fe==null?void 0:fe.themeClass,onRender:fe==null?void 0:fe.onRender}},render(){const{status:e,multiple:t,size:o,disabled:n,filterable:l,maxTagCount:r,bordered:f,clsPrefix:i,ellipsisTagPopoverProps:d,onRender:a,renderTag:c,renderLabel:p}=this;a==null||a();const S=r==="responsive",v=typeof r=="number",u=S||v,T=g(tn,null,{default:()=>g(en,{clsPrefix:i,loading:this.loading,showArrow:this.showArrow,showClear:this.mergedClearable&&this.selected,onClear:this.handleClear},{default:()=>{var w,F;return(F=(w=this.$slots).arrow)===null||F===void 0?void 0:F.call(w)}})});let C;if(t){const{labelField:w}=this,F=b=>g("div",{class:`${i}-base-selection-tag-wrapper`,key:b.value},c?c({option:b,handleClose:()=>{this.handleDeleteOption(b)}}):g(Ct,{size:o,closable:!b.disabled,disabled:n,onClose:()=>{this.handleDeleteOption(b)},internalCloseIsButtonTag:!1,internalCloseFocusable:!1},{default:()=>p?p(b,!0):He(b[w],b,!0)})),h=()=>(v?this.selectedOptions.slice(0,r):this.selectedOptions).map(F),x=l?g("div",{class:`${i}-base-selection-input-tag`,ref:"inputTagElRef",key:"__input-tag__"},g("input",Object.assign({},this.inputProps,{ref:"patternInputRef",tabindex:-1,disabled:n,value:this.pattern,autofocus:this.autofocus,class:`${i}-base-selection-input-tag__input`,onBlur:this.handlePatternInputBlur,onFocus:this.handlePatternInputFocus,onKeydown:this.handlePatternKeyDown,onInput:this.handlePatternInputInput,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd})),g("span",{ref:"patternInputMirrorRef",class:`${i}-base-selection-input-tag__mirror`},this.pattern)):null,I=S?()=>g("div",{class:`${i}-base-selection-tag-wrapper`,ref:"counterWrapperRef"},g(Ct,{size:o,ref:"counterRef",onMouseenter:this.handleMouseEnterCounter,onMouseleave:this.handleMouseLeaveCounter,disabled:n})):void 0;let K;if(v){const b=this.selectedOptions.length-r;b>0&&(K=g("div",{class:`${i}-base-selection-tag-wrapper`,key:"__counter__"},g(Ct,{size:o,ref:"counterRef",onMouseenter:this.handleMouseEnterCounter,disabled:n},{default:()=>`+${b}`})))}const A=S?l?g(Wt,{ref:"overflowRef",updateCounter:this.updateCounter,getCounter:this.getCounter,getTail:this.getTail,style:{width:"100%",display:"flex",overflow:"hidden"}},{default:h,counter:I,tail:()=>x}):g(Wt,{ref:"overflowRef",updateCounter:this.updateCounter,getCounter:this.getCounter,style:{width:"100%",display:"flex",overflow:"hidden"}},{default:h,counter:I}):v&&K?h().concat(K):h(),_=u?()=>g("div",{class:`${i}-base-selection-popover`},S?h():this.selectedOptions.map(F)):void 0,D=u?Object.assign({show:this.showTagsPanel,trigger:"hover",overlap:!0,placement:"top",width:"trigger",onUpdateShow:this.onPopoverUpdateShow,theme:this.mergedTheme.peers.Popover,themeOverrides:this.mergedTheme.peerOverrides.Popover},d):null,ee=(this.selected?!1:this.active?!this.pattern&&!this.isComposing:!0)?g("div",{class:`${i}-base-selection-placeholder ${i}-base-selection-overlay`},g("div",{class:`${i}-base-selection-placeholder__inner`},this.placeholder)):null,ne=l?g("div",{ref:"patternInputWrapperRef",class:`${i}-base-selection-tags`},A,S?null:x,T):g("div",{ref:"multipleElRef",class:`${i}-base-selection-tags`,tabindex:n?void 0:0},A,T);C=g(Rt,null,u?g(Cn,Object.assign({},D,{scrollable:!0,style:"max-height: calc(var(--v-target-height) * 6.6);"}),{trigger:()=>ne,default:_}):ne,ee)}else if(l){const w=this.pattern||this.isComposing,F=this.active?!w:!this.selected,h=this.active?!1:this.selected;C=g("div",{ref:"patternInputWrapperRef",class:`${i}-base-selection-label`,title:this.patternInputFocused?void 0:jt(this.label)},g("input",Object.assign({},this.inputProps,{ref:"patternInputRef",class:`${i}-base-selection-input`,value:this.active?this.pattern:"",placeholder:"",readonly:n,disabled:n,tabindex:-1,autofocus:this.autofocus,onFocus:this.handlePatternInputFocus,onBlur:this.handlePatternInputBlur,onInput:this.handlePatternInputInput,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd})),h?g("div",{class:`${i}-base-selection-label__render-label ${i}-base-selection-overlay`,key:"input"},g("div",{class:`${i}-base-selection-overlay__wrapper`},c?c({option:this.selectedOption,handleClose:()=>{}}):p?p(this.selectedOption,!0):He(this.label,this.selectedOption,!0))):null,F?g("div",{class:`${i}-base-selection-placeholder ${i}-base-selection-overlay`,key:"placeholder"},g("div",{class:`${i}-base-selection-overlay__wrapper`},this.filterablePlaceholder)):null,T)}else C=g("div",{ref:"singleElRef",class:`${i}-base-selection-label`,tabindex:this.disabled?void 0:0},this.label!==void 0?g("div",{class:`${i}-base-selection-input`,title:jt(this.label),key:"input"},g("div",{class:`${i}-base-selection-input__content`},c?c({option:this.selectedOption,handleClose:()=>{}}):p?p(this.selectedOption,!0):He(this.label,this.selectedOption,!0))):g("div",{class:`${i}-base-selection-placeholder ${i}-base-selection-overlay`,key:"placeholder"},g("div",{class:`${i}-base-selection-placeholder__inner`},this.placeholder)),T);return g("div",{ref:"selfRef",class:[`${i}-base-selection`,this.rtlEnabled&&`${i}-base-selection--rtl`,this.themeClass,e&&`${i}-base-selection--${e}-status`,{[`${i}-base-selection--active`]:this.active,[`${i}-base-selection--selected`]:this.selected||this.active&&this.pattern,[`${i}-base-selection--disabled`]:this.disabled,[`${i}-base-selection--multiple`]:this.multiple,[`${i}-base-selection--focus`]:this.focused}],style:this.cssVars,onClick:this.onClick,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onKeydown:this.onKeydown,onFocusin:this.handleFocusin,onFocusout:this.handleFocusout,onMousedown:this.handleMouseDown},C,f?g("div",{class:`${i}-base-selection__border`}):null,f?g("div",{class:`${i}-base-selection__state-border`}):null)}});function dt(e){return e.type==="group"}function fo(e){return e.type==="ignored"}function wt(e,t){try{return!!(1+t.toString().toLowerCase().indexOf(e.trim().toLowerCase()))}catch{return!1}}function ir(e,t){return{getIsGroup:dt,getIgnored:fo,getKey(n){return dt(n)?n.name||n.key||"key-required":n[e]},getChildren(n){return n[t]}}}function ar(e,t,o,n){if(!t)return e;function l(r){if(!Array.isArray(r))return[];const f=[];for(const i of r)if(dt(i)){const d=l(i[n]);d.length&&f.push(Object.assign({},i,{[n]:d}))}else{if(fo(i))continue;t(o,i)&&f.push(i)}return f}return l(e)}function sr(e,t,o){const n=new Map;return e.forEach(l=>{dt(l)?l[o].forEach(r=>{n.set(r[t],r)}):n.set(l[t],l)}),n}function cr(e){const{boxShadow2:t}=e;return{menuBoxShadow:t}}const dr=Pt({name:"Select",common:Ye,peers:{InternalSelection:uo,InternalSelectMenu:co},self:cr}),ur=he([V("select",`
 z-index: auto;
 outline: none;
 width: 100%;
 position: relative;
 font-weight: var(--n-font-weight);
 `),V("select-menu",`
 margin: 4px 0;
 box-shadow: var(--n-menu-box-shadow);
 `,[no({originalTransition:"background-color .3s var(--n-bezier), box-shadow .3s var(--n-bezier)"})])]),fr=Object.assign(Object.assign({},Re.props),{to:Ft.propTo,bordered:{type:Boolean,default:void 0},clearable:Boolean,clearFilterAfterSelect:{type:Boolean,default:!0},options:{type:Array,default:()=>[]},defaultValue:{type:[String,Number,Array],default:null},keyboard:{type:Boolean,default:!0},value:[String,Number,Array],placeholder:String,menuProps:Object,multiple:Boolean,size:String,menuSize:{type:String},filterable:Boolean,disabled:{type:Boolean,default:void 0},remote:Boolean,loading:Boolean,filter:Function,placement:{type:String,default:"bottom-start"},widthMode:{type:String,default:"trigger"},tag:Boolean,onCreate:Function,fallbackOption:{type:[Function,Boolean],default:void 0},show:{type:Boolean,default:void 0},showArrow:{type:Boolean,default:!0},maxTagCount:[Number,String],ellipsisTagPopoverProps:Object,consistentMenuWidth:{type:Boolean,default:!0},virtualScroll:{type:Boolean,default:!0},labelField:{type:String,default:"label"},valueField:{type:String,default:"value"},childrenField:{type:String,default:"children"},renderLabel:Function,renderOption:Function,renderTag:Function,"onUpdate:value":[Function,Array],inputProps:Object,nodeProps:Function,ignoreComposition:{type:Boolean,default:!0},showOnFocus:Boolean,onUpdateValue:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onFocus:[Function,Array],onScroll:[Function,Array],onSearch:[Function,Array],onUpdateShow:[Function,Array],"onUpdate:show":[Function,Array],displayDirective:{type:String,default:"show"},resetMenuOnOptionsChange:{type:Boolean,default:!0},status:String,showCheckmark:{type:Boolean,default:!0},onChange:[Function,Array],items:Array}),Ve=be({name:"Select",props:fr,slots:Object,setup(e){const{mergedClsPrefixRef:t,mergedBorderedRef:o,namespaceRef:n,inlineThemeDisabled:l}=Ze(e),r=Re("Select","-select",ur,dr,e,t),f=M(e.defaultValue),i=ae(e,"value"),d=At(i,f),a=M(!1),c=M(""),p=wn(e,["items","options"]),S=M([]),v=M([]),u=E(()=>v.value.concat(S.value).concat(p.value)),T=E(()=>{const{filter:s}=e;if(s)return s;const{labelField:R,valueField:B}=e;return(q,W)=>{if(!W)return!1;const L=W[R];if(typeof L=="string")return wt(q,L);const j=W[B];return typeof j=="string"?wt(q,j):typeof j=="number"?wt(q,String(j)):!1}}),C=E(()=>{if(e.remote)return p.value;{const{value:s}=u,{value:R}=c;return!R.length||!e.filterable?s:ar(s,T.value,R,e.childrenField)}}),w=E(()=>{const{valueField:s,childrenField:R}=e,B=ir(s,R);return Tn(C.value,B)}),F=E(()=>sr(u.value,e.valueField,e.childrenField)),h=M(!1),x=At(ae(e,"show"),h),I=M(null),K=M(null),A=M(null),{localeRef:_}=eo("Select"),D=E(()=>{var s;return(s=e.placeholder)!==null&&s!==void 0?s:_.value.placeholder}),Q=[],ee=M(new Map),ne=E(()=>{const{fallbackOption:s}=e;if(s===void 0){const{labelField:R,valueField:B}=e;return q=>({[R]:String(q),[B]:q})}return s===!1?!1:R=>Object.assign(s(R),{value:R})});function b(s){const R=e.remote,{value:B}=ee,{value:q}=F,{value:W}=ne,L=[];return s.forEach(j=>{if(q.has(j))L.push(q.get(j));else if(R&&B.has(j))L.push(B.get(j));else if(W){const ie=W(j);ie&&L.push(ie)}}),L}const z=E(()=>{if(e.multiple){const{value:s}=d;return Array.isArray(s)?b(s):[]}return null}),$=E(()=>{const{value:s}=d;return!e.multiple&&!Array.isArray(s)?s===null?null:b([s])[0]||null:null}),G=on(e),{mergedSizeRef:J,mergedDisabledRef:Y,mergedStatusRef:Z}=G;function U(s,R){const{onChange:B,"onUpdate:value":q,onUpdateValue:W}=e,{nTriggerFormChange:L,nTriggerFormInput:j}=G;B&&we(B,s,R),W&&we(W,s,R),q&&we(q,s,R),f.value=s,L(),j()}function te(s){const{onBlur:R}=e,{nTriggerFormBlur:B}=G;R&&we(R,s),B()}function m(){const{onClear:s}=e;s&&we(s)}function k(s){const{onFocus:R,showOnFocus:B}=e,{nTriggerFormFocus:q}=G;R&&we(R,s),q(),B&&ve()}function N(s){const{onSearch:R}=e;R&&we(R,s)}function se(s){const{onScroll:R}=e;R&&we(R,s)}function pe(){var s;const{remote:R,multiple:B}=e;if(R){const{value:q}=ee;if(B){const{valueField:W}=e;(s=z.value)===null||s===void 0||s.forEach(L=>{q.set(L[W],L)})}else{const W=$.value;W&&q.set(W[e.valueField],W)}}}function me(s){const{onUpdateShow:R,"onUpdate:show":B}=e;R&&we(R,s),B&&we(B,s),h.value=s}function ve(){Y.value||(me(!0),h.value=!0,e.filterable&&tt())}function ce(){me(!1)}function ye(){c.value="",v.value=Q}const ue=M(!1);function Oe(){e.filterable&&(ue.value=!0)}function De(){e.filterable&&(ue.value=!1,x.value||ye())}function xe(){Y.value||(x.value?e.filterable?tt():ce():ve())}function Pe(s){var R,B;!((B=(R=A.value)===null||R===void 0?void 0:R.selfRef)===null||B===void 0)&&B.contains(s.relatedTarget)||(a.value=!1,te(s),ce())}function Se(s){k(s),a.value=!0}function ge(){a.value=!0}function Fe(s){var R;!((R=I.value)===null||R===void 0)&&R.$el.contains(s.relatedTarget)||(a.value=!1,te(s),ce())}function Ce(){var s;(s=I.value)===null||s===void 0||s.focus(),ce()}function We(s){var R;x.value&&(!((R=I.value)===null||R===void 0)&&R.$el.contains(an(s))||ce())}function Le(s){if(!Array.isArray(s))return[];if(ne.value)return Array.from(s);{const{remote:R}=e,{value:B}=F;if(R){const{value:q}=ee;return s.filter(W=>B.has(W)||q.has(W))}else return s.filter(q=>B.has(q))}}function Ee(s){fe(s.rawNode)}function fe(s){if(Y.value)return;const{tag:R,remote:B,clearFilterAfterSelect:q,valueField:W}=e;if(R&&!B){const{value:L}=v,j=L[0]||null;if(j){const ie=S.value;ie.length?ie.push(j):S.value=[j],v.value=Q}}if(B&&ee.value.set(s[W],s),e.multiple){const L=Le(d.value),j=L.findIndex(ie=>ie===s[W]);if(~j){if(L.splice(j,1),R&&!B){const ie=y(s[W]);~ie&&(S.value.splice(ie,1),q&&(c.value=""))}}else L.push(s[W]),q&&(c.value="");U(L,b(L))}else{if(R&&!B){const L=y(s[W]);~L?S.value=[S.value[L]]:S.value=Q}et(),ce(),U(s[W],s)}}function y(s){return S.value.findIndex(B=>B[e.valueField]===s)}function O(s){x.value||ve();const{value:R}=s.target;c.value=R;const{tag:B,remote:q}=e;if(N(R),B&&!q){if(!R){v.value=Q;return}const{onCreate:W}=e,L=W?W(R):{[e.labelField]:R,[e.valueField]:R},{valueField:j,labelField:ie}=e;p.value.some(ke=>ke[j]===L[j]||ke[ie]===L[ie])||S.value.some(ke=>ke[j]===L[j]||ke[ie]===L[ie])?v.value=Q:v.value=[L]}}function le(s){s.stopPropagation();const{multiple:R}=e;!R&&e.filterable&&ce(),m(),R?U([],[]):U(null,null)}function ht(s){!Ge(s,"action")&&!Ge(s,"empty")&&!Ge(s,"header")&&s.preventDefault()}function vt(s){se(s)}function Qe(s){var R,B,q,W,L;if(!e.keyboard){s.preventDefault();return}switch(s.key){case" ":if(e.filterable)break;s.preventDefault();case"Enter":if(!(!((R=I.value)===null||R===void 0)&&R.isComposing)){if(x.value){const j=(B=A.value)===null||B===void 0?void 0:B.getPendingTmNode();j?Ee(j):e.filterable||(ce(),et())}else if(ve(),e.tag&&ue.value){const j=v.value[0];if(j){const ie=j[e.valueField],{value:ke}=d;e.multiple&&Array.isArray(ke)&&ke.includes(ie)||fe(j)}}}s.preventDefault();break;case"ArrowUp":if(s.preventDefault(),e.loading)return;x.value&&((q=A.value)===null||q===void 0||q.prev());break;case"ArrowDown":if(s.preventDefault(),e.loading)return;x.value?(W=A.value)===null||W===void 0||W.next():ve();break;case"Escape":x.value&&(sn(s),ce()),(L=I.value)===null||L===void 0||L.focus();break}}function et(){var s;(s=I.value)===null||s===void 0||s.focus()}function tt(){var s;(s=I.value)===null||s===void 0||s.focusInput()}function gt(){var s;x.value&&((s=K.value)===null||s===void 0||s.syncPosition())}pe(),Be(ae(e,"options"),pe);const bt={focus:()=>{var s;(s=I.value)===null||s===void 0||s.focus()},focusInput:()=>{var s;(s=I.value)===null||s===void 0||s.focusInput()},blur:()=>{var s;(s=I.value)===null||s===void 0||s.blur()},blurInput:()=>{var s;(s=I.value)===null||s===void 0||s.blurInput()}},ot=E(()=>{const{self:{menuBoxShadow:s}}=r.value;return{"--n-menu-box-shadow":s}}),Ie=l?Je("select",void 0,ot,e):void 0;return Object.assign(Object.assign({},bt),{mergedStatus:Z,mergedClsPrefix:t,mergedBordered:o,namespace:n,treeMate:w,isMounted:nn(),triggerRef:I,menuRef:A,pattern:c,uncontrolledShow:h,mergedShow:x,adjustedTo:Ft(e),uncontrolledValue:f,mergedValue:d,followerRef:K,localizedPlaceholder:D,selectedOption:$,selectedOptions:z,mergedSize:J,mergedDisabled:Y,focused:a,activeWithoutMenuOpen:ue,inlineThemeDisabled:l,onTriggerInputFocus:Oe,onTriggerInputBlur:De,handleTriggerOrMenuResize:gt,handleMenuFocus:ge,handleMenuBlur:Fe,handleMenuTabOut:Ce,handleTriggerClick:xe,handleToggle:Ee,handleDeleteOption:fe,handlePatternInput:O,handleClear:le,handleTriggerBlur:Pe,handleTriggerFocus:Se,handleKeydown:Qe,handleMenuAfterLeave:ye,handleMenuClickOutside:We,handleMenuScroll:vt,handleMenuKeydown:Qe,handleMenuMousedown:ht,mergedTheme:r,cssVars:l?void 0:ot,themeClass:Ie==null?void 0:Ie.themeClass,onRender:Ie==null?void 0:Ie.onRender})},render(){return g("div",{class:`${this.mergedClsPrefix}-select`},g(Sn,null,{default:()=>[g(kn,null,{default:()=>g(lr,{ref:"triggerRef",inlineThemeDisabled:this.inlineThemeDisabled,status:this.mergedStatus,inputProps:this.inputProps,clsPrefix:this.mergedClsPrefix,showArrow:this.showArrow,maxTagCount:this.maxTagCount,ellipsisTagPopoverProps:this.ellipsisTagPopoverProps,bordered:this.mergedBordered,active:this.activeWithoutMenuOpen||this.mergedShow,pattern:this.pattern,placeholder:this.localizedPlaceholder,selectedOption:this.selectedOption,selectedOptions:this.selectedOptions,multiple:this.multiple,renderTag:this.renderTag,renderLabel:this.renderLabel,filterable:this.filterable,clearable:this.clearable,disabled:this.mergedDisabled,size:this.mergedSize,theme:this.mergedTheme.peers.InternalSelection,labelField:this.labelField,valueField:this.valueField,themeOverrides:this.mergedTheme.peerOverrides.InternalSelection,loading:this.loading,focused:this.focused,onClick:this.handleTriggerClick,onDeleteOption:this.handleDeleteOption,onPatternInput:this.handlePatternInput,onClear:this.handleClear,onBlur:this.handleTriggerBlur,onFocus:this.handleTriggerFocus,onKeydown:this.handleKeydown,onPatternBlur:this.onTriggerInputBlur,onPatternFocus:this.onTriggerInputFocus,onResize:this.handleTriggerOrMenuResize,ignoreComposition:this.ignoreComposition},{arrow:()=>{var e,t;return[(t=(e=this.$slots).arrow)===null||t===void 0?void 0:t.call(e)]}})}),g(Rn,{ref:"followerRef",show:this.mergedShow,to:this.adjustedTo,teleportDisabled:this.adjustedTo===Ft.tdkey,containerClass:this.namespace,width:this.consistentMenuWidth?"target":void 0,minWidth:"target",placement:this.placement},{default:()=>g(oo,{name:"fade-in-scale-up-transition",appear:this.isMounted,onAfterLeave:this.handleMenuAfterLeave},{default:()=>{var e,t,o;return this.mergedShow||this.displayDirective==="show"?((e=this.onRender)===null||e===void 0||e.call(this),rn(g(Gn,Object.assign({},this.menuProps,{ref:"menuRef",onResize:this.handleTriggerOrMenuResize,inlineThemeDisabled:this.inlineThemeDisabled,virtualScroll:this.consistentMenuWidth&&this.virtualScroll,class:[`${this.mergedClsPrefix}-select-menu`,this.themeClass,(t=this.menuProps)===null||t===void 0?void 0:t.class],clsPrefix:this.mergedClsPrefix,focusable:!0,labelField:this.labelField,valueField:this.valueField,autoPending:!0,nodeProps:this.nodeProps,theme:this.mergedTheme.peers.InternalSelectMenu,themeOverrides:this.mergedTheme.peerOverrides.InternalSelectMenu,treeMate:this.treeMate,multiple:this.multiple,size:this.menuSize,renderOption:this.renderOption,renderLabel:this.renderLabel,value:this.mergedValue,style:[(o=this.menuProps)===null||o===void 0?void 0:o.style,this.cssVars],onToggle:this.handleToggle,onScroll:this.handleMenuScroll,onFocus:this.handleMenuFocus,onBlur:this.handleMenuBlur,onKeydown:this.handleMenuKeydown,onTabOut:this.handleMenuTabOut,onMousedown:this.handleMenuMousedown,show:this.mergedShow,showCheckmark:this.showCheckmark,resetMenuOnOptionsChange:this.resetMenuOnOptionsChange}),{empty:()=>{var n,l;return[(l=(n=this.$slots).empty)===null||l===void 0?void 0:l.call(n)]},header:()=>{var n,l;return[(l=(n=this.$slots).header)===null||l===void 0?void 0:l.call(n)]},action:()=>{var n,l;return[(l=(n=this.$slots).action)===null||l===void 0?void 0:l.call(n)]}}),this.displayDirective==="show"?[[ln,this.mergedShow],[_t,this.handleMenuClickOutside,void 0,{capture:!0}]]:[[_t,this.handleMenuClickOutside,void 0,{capture:!0}]])):null}})})]}))}});/*!
 * Compressor.js v1.2.1
 * https://fengyuanchen.github.io/compressorjs
 *
 * Copyright 2018-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2023-02-28T14:09:41.732Z
 */function Kt(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),o.push.apply(o,n)}return o}function it(e){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?arguments[t]:{};t%2?Kt(Object(o),!0).forEach(function(n){gr(e,n,o[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Kt(Object(o)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))})}return e}function hr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qt(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ho(n.key),n)}}function vr(e,t,o){return t&&qt(e.prototype,t),o&&qt(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function gr(e,t,o){return t=ho(t),t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function ut(){return ut=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},ut.apply(this,arguments)}function br(e,t){if(typeof e!="object"||e===null)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var n=o.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ho(e){var t=br(e,"string");return typeof t=="symbol"?t:String(t)}var vo={exports:{}};(function(e){typeof window>"u"||function(t){var o=t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype,n=t.Blob&&function(){try{return!!new Blob}catch{return!1}}(),l=n&&t.Uint8Array&&function(){try{return new Blob([new Uint8Array(100)]).size===100}catch{return!1}}(),r=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||t.MSBlobBuilder,f=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,i=(n||r)&&t.atob&&t.ArrayBuffer&&t.Uint8Array&&function(d){var a,c,p,S,v,u,T,C,w;if(a=d.match(f),!a)throw new Error("invalid data URI");for(c=a[2]?a[1]:"text/plain"+(a[3]||";charset=US-ASCII"),p=!!a[4],S=d.slice(a[0].length),p?v=atob(S):v=decodeURIComponent(S),u=new ArrayBuffer(v.length),T=new Uint8Array(u),C=0;C<v.length;C+=1)T[C]=v.charCodeAt(C);return n?new Blob([l?T:u],{type:c}):(w=new r,w.append(u),w.getBlob(c))};t.HTMLCanvasElement&&!o.toBlob&&(o.mozGetAsFile?o.toBlob=function(d,a,c){var p=this;setTimeout(function(){c&&o.toDataURL&&i?d(i(p.toDataURL(a,c))):d(p.mozGetAsFile("blob",a))})}:o.toDataURL&&i&&(o.msToBlob?o.toBlob=function(d,a,c){var p=this;setTimeout(function(){(a&&a!=="image/png"||c)&&o.toDataURL&&i?d(i(p.toDataURL(a,c))):d(p.msToBlob(a))})}:o.toBlob=function(d,a,c){var p=this;setTimeout(function(){d(i(p.toDataURL(a,c)))})})),e.exports?e.exports=i:t.dataURLtoBlob=i}(window)})(vo);var Gt=vo.exports,pr=function(t){return typeof Blob>"u"?!1:t instanceof Blob||Object.prototype.toString.call(t)==="[object Blob]"},Xt={strict:!0,checkOrientation:!0,retainExif:!1,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},mr=typeof window<"u"&&typeof window.document<"u",Me=mr?window:{},ft=function(t){return t>0&&t<1/0},yr=Array.prototype.slice;function Mt(e){return Array.from?Array.from(e):yr.call(e)}var xr=/^image\/.+$/;function Tt(e){return xr.test(e)}function Cr(e){var t=Tt(e)?e.substr(6):"";return t==="jpeg"&&(t="jpg"),".".concat(t)}var go=String.fromCharCode;function wr(e,t,o){var n="",l;for(o+=t,l=t;l<o;l+=1)n+=go(e.getUint8(l));return n}var Sr=Me.btoa;function Yt(e,t){for(var o=[],n=8192,l=new Uint8Array(e);l.length>0;)o.push(go.apply(null,Mt(l.subarray(0,n)))),l=l.subarray(n);return"data:".concat(t,";base64,").concat(Sr(o.join("")))}function kr(e){var t=new DataView(e),o;try{var n,l,r;if(t.getUint8(0)===255&&t.getUint8(1)===216)for(var f=t.byteLength,i=2;i+1<f;){if(t.getUint8(i)===255&&t.getUint8(i+1)===225){l=i;break}i+=1}if(l){var d=l+4,a=l+10;if(wr(t,d,4)==="Exif"){var c=t.getUint16(a);if(n=c===18761,(n||c===19789)&&t.getUint16(a+2,n)===42){var p=t.getUint32(a+4,n);p>=8&&(r=a+p)}}}if(r){var S=t.getUint16(r,n),v,u;for(u=0;u<S;u+=1)if(v=r+u*12+2,t.getUint16(v,n)===274){v+=8,o=t.getUint16(v,n),t.setUint16(v,1,n);break}}}catch{o=1}return o}function Rr(e){var t=0,o=1,n=1;switch(e){case 2:o=-1;break;case 3:t=-180;break;case 4:n=-1;break;case 5:t=90,n=-1;break;case 6:t=90;break;case 7:t=90,o=-1;break;case 8:t=-90;break}return{rotate:t,scaleX:o,scaleY:n}}var Fr=/\.\d*(?:0|9){12}\d*$/;function Zt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return Fr.test(e)?Math.round(e*t)/t:e}function Ke(e){var t=e.aspectRatio,o=e.height,n=e.width,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none",r=ft(n),f=ft(o);if(r&&f){var i=o*t;(l==="contain"||l==="none")&&i>n||l==="cover"&&i<n?o=n/t:n=o*t}else r?o=n/t:f&&(n=o*t);return{width:n,height:o}}function Tr(e){for(var t=Mt(new Uint8Array(e)),o=t.length,n=[],l=0;l+3<o;){var r=t[l],f=t[l+1];if(r===255&&f===218)break;if(r===255&&f===216)l+=2;else{var i=t[l+2]*256+t[l+3],d=l+i+2,a=t.slice(l,d);n.push(a),l=d}}return n.reduce(function(c,p){return p[0]===255&&p[1]===225?c.concat(p):c},[])}function zr(e,t){var o=Mt(new Uint8Array(e));if(o[2]!==255||o[3]!==224)return e;var n=o[4]*256+o[5],l=[255,216].concat(t,o.slice(4+n));return new Uint8Array(l)}var Or=Me.ArrayBuffer,St=Me.FileReader,$e=Me.URL||Me.webkitURL,Pr=/\.\w+$/,Ir=Me.Compressor,Br=function(){function e(t,o){hr(this,e),this.file=t,this.exif=[],this.image=new Image,this.options=it(it({},Xt),o),this.aborted=!1,this.result=null,this.init()}return vr(e,[{key:"init",value:function(){var o=this,n=this.file,l=this.options;if(!pr(n)){this.fail(new Error("The first argument must be a File or Blob object."));return}var r=n.type;if(!Tt(r)){this.fail(new Error("The first argument must be an image File or Blob object."));return}if(!$e||!St){this.fail(new Error("The current browser does not support image compression."));return}Or||(l.checkOrientation=!1,l.retainExif=!1);var f=r==="image/jpeg",i=f&&l.checkOrientation,d=f&&l.retainExif;if($e&&!i&&!d)this.load({url:$e.createObjectURL(n)});else{var a=new St;this.reader=a,a.onload=function(c){var p=c.target,S=p.result,v={},u=1;i&&(u=kr(S),u>1&&ut(v,Rr(u))),d&&(o.exif=Tr(S)),i||d?!$e||u>1?v.url=Yt(S,r):v.url=$e.createObjectURL(n):v.url=S,o.load(v)},a.onabort=function(){o.fail(new Error("Aborted to read the image with FileReader."))},a.onerror=function(){o.fail(new Error("Failed to read the image with FileReader."))},a.onloadend=function(){o.reader=null},i||d?a.readAsArrayBuffer(n):a.readAsDataURL(n)}}},{key:"load",value:function(o){var n=this,l=this.file,r=this.image;r.onload=function(){n.draw(it(it({},o),{},{naturalWidth:r.naturalWidth,naturalHeight:r.naturalHeight}))},r.onabort=function(){n.fail(new Error("Aborted to load the image."))},r.onerror=function(){n.fail(new Error("Failed to load the image."))},Me.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(Me.navigator.userAgent)&&(r.crossOrigin="anonymous"),r.alt=l.name,r.src=o.url}},{key:"draw",value:function(o){var n=this,l=o.naturalWidth,r=o.naturalHeight,f=o.rotate,i=f===void 0?0:f,d=o.scaleX,a=d===void 0?1:d,c=o.scaleY,p=c===void 0?1:c,S=this.file,v=this.image,u=this.options,T=document.createElement("canvas"),C=T.getContext("2d"),w=Math.abs(i)%180===90,F=(u.resize==="contain"||u.resize==="cover")&&ft(u.width)&&ft(u.height),h=Math.max(u.maxWidth,0)||1/0,x=Math.max(u.maxHeight,0)||1/0,I=Math.max(u.minWidth,0)||0,K=Math.max(u.minHeight,0)||0,A=l/r,_=u.width,D=u.height;if(w){var Q=[x,h];h=Q[0],x=Q[1];var ee=[K,I];I=ee[0],K=ee[1];var ne=[D,_];_=ne[0],D=ne[1]}F&&(A=_/D);var b=Ke({aspectRatio:A,width:h,height:x},"contain");h=b.width,x=b.height;var z=Ke({aspectRatio:A,width:I,height:K},"cover");if(I=z.width,K=z.height,F){var $=Ke({aspectRatio:A,width:_,height:D},u.resize);_=$.width,D=$.height}else{var G=Ke({aspectRatio:A,width:_,height:D}),J=G.width;_=J===void 0?l:J;var Y=G.height;D=Y===void 0?r:Y}_=Math.floor(Zt(Math.min(Math.max(_,I),h))),D=Math.floor(Zt(Math.min(Math.max(D,K),x)));var Z=-_/2,U=-D/2,te=_,m=D,k=[];if(F){var N=0,se=0,pe=l,me=r,ve=Ke({aspectRatio:A,width:l,height:r},{contain:"cover",cover:"contain"}[u.resize]);pe=ve.width,me=ve.height,N=(l-pe)/2,se=(r-me)/2,k.push(N,se,pe,me)}if(k.push(Z,U,te,m),w){var ce=[D,_];_=ce[0],D=ce[1]}T.width=_,T.height=D,Tt(u.mimeType)||(u.mimeType=S.type);var ye="transparent";S.size>u.convertSize&&u.convertTypes.indexOf(u.mimeType)>=0&&(u.mimeType="image/jpeg");var ue=u.mimeType==="image/jpeg";if(ue&&(ye="#fff"),C.fillStyle=ye,C.fillRect(0,0,_,D),u.beforeDraw&&u.beforeDraw.call(this,C,T),!this.aborted&&(C.save(),C.translate(_/2,D/2),C.rotate(i*Math.PI/180),C.scale(a,p),C.drawImage.apply(C,[v].concat(k)),C.restore(),u.drew&&u.drew.call(this,C,T),!this.aborted)){var Oe=function(xe){if(!n.aborted){var Pe=function(Ce){return n.done({naturalWidth:l,naturalHeight:r,result:Ce})};if(xe&&ue&&u.retainExif&&n.exif&&n.exif.length>0){var Se=function(Ce){return Pe(Gt(Yt(zr(Ce,n.exif),u.mimeType)))};if(xe.arrayBuffer)xe.arrayBuffer().then(Se).catch(function(){n.fail(new Error("Failed to read the compressed image with Blob.arrayBuffer()."))});else{var ge=new St;n.reader=ge,ge.onload=function(Fe){var Ce=Fe.target;Se(Ce.result)},ge.onabort=function(){n.fail(new Error("Aborted to read the compressed image with FileReader."))},ge.onerror=function(){n.fail(new Error("Failed to read the compressed image with FileReader."))},ge.onloadend=function(){n.reader=null},ge.readAsArrayBuffer(xe)}}else Pe(xe)}};T.toBlob?T.toBlob(Oe,u.mimeType,u.quality):Oe(Gt(T.toDataURL(u.mimeType,u.quality)))}}},{key:"done",value:function(o){var n=o.naturalWidth,l=o.naturalHeight,r=o.result,f=this.file,i=this.image,d=this.options;if($e&&i.src.indexOf("blob:")===0&&$e.revokeObjectURL(i.src),r)if(d.strict&&!d.retainExif&&r.size>f.size&&d.mimeType===f.type&&!(d.width>n||d.height>l||d.minWidth>n||d.minHeight>l||d.maxWidth<n||d.maxHeight<l))r=f;else{var a=new Date;r.lastModified=a.getTime(),r.lastModifiedDate=a,r.name=f.name,r.name&&r.type!==f.type&&(r.name=r.name.replace(Pr,Cr(r.type)))}else r=f;this.result=r,d.success&&d.success.call(this,r)}},{key:"fail",value:function(o){var n=this.options;if(n.error)n.error.call(this,o);else throw o}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}],[{key:"noConflict",value:function(){return window.Compressor=Ir,e}},{key:"setDefaults",value:function(o){ut(Xt,o)}}]),e}();function Mr(...e){return fetch(...e).then(t=>t.status!==200?Promise.reject(t):t.json())}function bo(e){return new Promise((t,o)=>{new Br(e,{maxWidth:600,maxHeight:900,quality:.8,success(n){t(n)},error(n){o(n)}})})}function Er(e){return fetch(e).then(t=>t.blob()).then(t=>bo(t))}const qe={"book-form":"_book-form_3m159_1","center-form-item":"_center-form-item_3m159_1","book-cover-image":"_book-cover-image_3m159_9","change-cover-buttons":"_change-cover-buttons_3m159_17"};function $r(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!fn(e)}const Vr=be({name:"BookForm",props:{data:{type:Object,required:!1},onScrape:{type:Function,required:!1},scraping:{type:Boolean,required:!1,default:!1}},setup(e,{expose:t}){const{data:o,onScrape:n,scraping:l}=cn(e),{t:r}=dn({useScope:"global"}),{message:f,dialog:i}=un(),d=M(),a=M({covers:[],...o.value});Be(()=>o.value,C=>{a.value={covers:[],...a.value,...C}});function c(C,w){a.value[C]=w}function p(C){a.value={...a.value,...C}}function S(){var C;return(C=d.value)==null?void 0:C.validate().then(()=>bn(a.value)).catch(w=>{throw f.error(r("pages.book.bookForm.formItemRequiredError")),console.log(w),w})}t({getFormData:S});function v(C=!1){const w=document.createElement("input");w.type="file",w.accept="image/*",C&&(w.capture="environment"),w.onchange=F=>{var x;const h=(x=F.target.files)==null?void 0:x[0];h&&bo(h).then(I=>{a.value={...a.value,covers:[I]}})},w.click()}function u(){i.warning({title:r("pages.book.bookForm.scrapeDialog.title"),content:r("pages.book.bookForm.scrapeDialog.content"),positiveText:r("common.confirm"),negativeText:r("common.cancel"),onPositiveClick(){var w,F;const C=(w=a.value)==null?void 0:w.isbn;C&&((F=n.value)==null||F.call(n,C).then(h=>p(h)))}})}const T=E(()=>{var w,F,h;if(l.value)return"";const C=(F=(w=a.value)==null?void 0:w.covers)==null?void 0:F[0];return gn(C,(h=a.value)==null?void 0:h.title)});return()=>{let C;return P(Rt,null,[P(zn,{class:Ue(qe["book-form"]),ref:d,inline:!1,labelPlacement:"left",labelAlign:"left",showLabel:!1,model:a.value,onSubmit:w=>w.preventDefault()},{default:()=>{var w,F;return[P(de,{label:"",path:"cover"},{default:()=>[P("div",{class:Ue(qe["center-form-item"])},[P(On,{class:Ue(qe["book-cover-image"]),src:T.value,renderToolbar:({nodes:h})=>P(Rt,null,[h.zoomIn,h.resizeToOriginalSize,h.zoomOut])},null),P("div",{class:Ue(qe["change-cover-buttons"])},[P(mt,{circle:!0,secondary:!0,onClick:()=>v()},{default:()=>[P(Dt,{name:"gallery"},null)]}),P(mt,{circle:!0,secondary:!0,onClick:()=>v(!0)},{default:()=>[P(Dt,{name:"camera"},null)]})])])]}),P(de,{label:r("pages.book.bookForm.form.rating.label"),path:"rating"},{default:()=>{var h;return[P("div",{class:Ue(qe["center-form-item"])},[P(vn,{count:5,value:(h=a.value)==null?void 0:h.rating,onUpdateValue:x=>c("rating",x)},null)])]}}),P(de,{label:"isbn",path:"isbn",rule:{required:!0,trigger:"blur"}},{default:()=>[P(pn,null,{default:()=>{var h;return[P(Te,{type:"text",placeholder:"isbn",allowInput:x=>/^\d*$/.test(x),value:(h=a.value)==null?void 0:h.isbn,onUpdateValue:x=>c("isbn",x)},null),P(mt,{ghost:!0,onClick:u},$r(C=r("pages.book.bookForm.form.isbn.scrapeBtn"))?C:{default:()=>[C]})]}})]}),P(de,{label:r("pages.book.bookForm.form.title.label"),path:"title",rule:{required:!0}},{default:()=>{var h;return[P(Te,{type:"text",placeholder:r("pages.book.bookForm.form.title.placeholder"),value:(h=a.value)==null?void 0:h.title,onUpdateValue:x=>c("title",x)},null)]}}),P(de,{label:r("pages.book.bookForm.form.subtitle.label"),path:"subtitle"},{default:()=>{var h;return[P(Te,{type:"text",placeholder:r("pages.book.bookForm.form.subtitle.placeholder"),value:(h=a.value)==null?void 0:h.subtitle,onUpdateValue:x=>c("subtitle",x)},null)]}}),P(de,{label:r("pages.book.bookForm.form.editionName.label"),path:"editionName"},{default:()=>{var h;return[P(Te,{type:"text",placeholder:r("pages.book.bookForm.form.editionName.placeholder"),value:(h=a.value)==null?void 0:h.editionName,onUpdateValue:x=>c("editionName",x)},null)]}}),P(de,{label:r("pages.book.bookForm.form.authors.label"),path:"authors",rule:{required:!0}},{default:()=>{var h;return[P(Ve,{value:(h=a.value)==null?void 0:h.authors,tag:!0,multiple:!0,filterable:!0,show:!1,showArrow:!1,placeholder:r("pages.book.bookForm.form.authors.placeholder"),onUpdateValue:x=>c("authors",x),inputProps:{enterKeyHint:"done"}},null)]}}),P(de,{label:r("pages.book.bookForm.form.contributions.label"),path:"contributions"},{default:()=>{var h;return[P(Ve,{value:(h=a.value)==null?void 0:h.contributions,tag:!0,multiple:!0,filterable:!0,show:!1,showArrow:!1,placeholder:r("pages.book.bookForm.form.contributions.placeholder"),onUpdateValue:x=>c("contributions",x),inputProps:{enterKeyHint:"done"}},null)]}}),P(de,{label:r("pages.book.bookForm.form.languages.label"),path:"languages"},{default:()=>{var h;return[P(Ve,{value:(h=a.value)==null?void 0:h.languages,tag:!0,multiple:!0,filterable:!0,show:!1,showArrow:!1,placeholder:r("pages.book.bookForm.form.languages.placeholder"),onUpdateValue:x=>c("languages",x),inputProps:{enterKeyHint:"done"}},null)]}}),(F=(w=a.value)==null?void 0:w.publishers)==null?void 0:F.map((h,x)=>P(de,{label:"",path:`publishers[${x}]`},{default:()=>[P(Te,{type:"text",placeholder:r("pages.book.bookForm.form.publishers.placeholder",[x]),value:h,onUpdateValue:I=>{const K=a.value.publishers;K[x]=I,c("publishers",K)}},null)]})),P(de,{label:r("pages.book.bookForm.form.publishDate.label"),path:"publishDate"},{default:()=>{var h;return[P(Te,{type:"text",placeholder:r("pages.book.bookForm.form.publishDate.placeholder"),value:(h=a.value)==null?void 0:h.publishDate,onUpdateValue:x=>c("publishDate",x)},null)]}}),P(de,{label:r("pages.book.bookForm.form.publishCountry.label"),path:"publishCountry"},{default:()=>{var h;return[P(Te,{type:"text",placeholder:r("pages.book.bookForm.form.publishCountry.placeholder"),value:(h=a.value)==null?void 0:h.publishCountry,onUpdateValue:x=>c("publishCountry",x)},null)]}}),P(de,{label:r("pages.book.bookForm.form.numberOfPages.label"),path:"numberOfPages"},{default:()=>{var h;return[P(Pn,{style:{width:"100%"},placeholder:r("pages.book.bookForm.form.numberOfPages.placeholder"),buttonPlacement:"both",value:(h=a.value)==null?void 0:h.numberOfPages,onUpdateValue:x=>c("numberOfPages",x||0)},null)]}}),P(de,{label:r("pages.book.bookForm.form.tags.label"),path:"tags"},{default:()=>{var h;return[P(Ve,{value:(h=a.value)==null?void 0:h.tags,tag:!0,multiple:!0,filterable:!0,show:!1,showArrow:!1,placeholder:r("pages.book.bookForm.form.tags.placeholder"),onUpdateValue:x=>c("tags",x),inputProps:{enterKeyHint:"done"}},null)]}}),P(de,{label:r("pages.book.bookForm.form.subjects.label"),path:"subjects"},{default:()=>{var h;return[P(Ve,{value:(h=a.value)==null?void 0:h.subjects,tag:!0,multiple:!0,filterable:!0,show:!1,showArrow:!1,placeholder:r("pages.book.bookForm.form.subjects.placeholder"),onUpdateValue:x=>c("subjects",x),inputProps:{enterKeyHint:"done"}},null)]}}),P(de,{label:r("pages.book.bookForm.form.summary.label"),path:"summary"},{default:()=>{var h;return[P(Te,{type:"textarea",rows:7,placeholder:r("pages.book.bookForm.form.summary.placeholder"),value:(h=a.value)==null?void 0:h.summary},null)]}}),P("div",{style:{display:"none"}},[P(de,null,{default:()=>[P(Te,null,null)]})])]}})])}}});function Kr(e){return hn.settings.querySettingByKey("isbnDataUrl").then(t=>{const o=t==null?void 0:t.value;return!o||typeof o!="string"?Promise.reject("isbnDataUrl is invalid"):o.replace("{isbn}",e)}).then(t=>Mr(t,{method:"GET",mode:"cors"}).then(o=>{const{covers:n}=o,l=new URL(n[0],t).href;return Er(l).then(r=>({...o,covers:[r]}))}))}export{Vr as B,Kr as s};
