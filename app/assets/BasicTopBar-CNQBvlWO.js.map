{"version":3,"file":"BasicTopBar-CNQBvlWO.js","sources":["../../src/pages/layout/BasicLayout.tsx","../../src/components/marquee/Marquee.tsx","../../src/pages/layout/BasicTopBar.tsx"],"sourcesContent":["/**\n * @file 基础布局\n * @author Yangholmes 2025-03-23\n */\n\nimport { defineComponent, PropType } from 'vue';\nimport { JSX } from 'vue/jsx-runtime';\nimport cn from 'classnames';\n\nimport styles from './basicLayout.module.less';\n\nexport default defineComponent({\n  name: 'BasicLayout',\n  props: {\n    topBar: {\n      type: Object as PropType<JSX.Element>,\n    },\n    toolBar: {\n      type: Array as PropType<JSX.Element[]>,\n    },\n    loading: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup(props, { slots }) {\n    return () => (<div class={cn(styles['basic-layout'])}>\n      {\n        // TODO 增加全局 loading\n      }\n      {/* 顶部栏 */}\n      <div class={cn(styles['top-bar'])}>\n        {props.topBar}\n      </div>\n      {/* 内容区 */}\n      <div class={cn(styles.main)}>\n        {slots.default?.()}\n      </div>\n      {/* 工具栏 */}\n      <div class={cn(styles['tool-bar'])}>\n        {props.toolBar?.map(e => e)}\n      </div>\n    </div>);\n  }\n});\n\n","/**\n * @file 跑马灯组件\n * @author Yangholmes 2025-04-23\n */\n\nimport { defineComponent, onMounted, onUnmounted, PropType, ref, toRefs } from 'vue';\n\nimport cn from 'classnames';\n\nimport styles from './marquee.module.less';\n\nexport default defineComponent({\n  name: 'Marquee',\n  props: {\n    speed: {\n      type: Number as PropType<number>,\n      default: 30\n    },\n    delay: {\n      type: Number,\n      default: 1e3\n    }\n  },\n  setup(props, { slots }) {\n    const { speed, delay } = toRefs(props);\n\n    const isPlaying = ref(false);\n\n    const wrapperRef = ref<HTMLElement>();\n    const shadowRef = ref<HTMLElement>();\n\n    /** 根元素宽度 */\n    const wrapperWidth = ref<number>(0);\n    /** 影子元素宽度 */\n    const shadowWidth = ref<number>(0);\n\n    /** 内容渲染函数 */\n    const renderContent = () => {\n      if (!wrapperWidth.value) {\n        return <></>;\n      }\n      const content = slots.default?.() || null;\n      if (shadowWidth.value > wrapperWidth.value) {\n        const duration = shadowWidth.value / speed.value * 1e3;\n        return <div\n          style={{\n            '--duration': `${duration}ms`,\n          }}\n          class={cn(styles.slot, {\n            [styles.play]: isPlaying.value,\n          })}\n        >\n          <span class={cn(styles.slide)}>{content}</span>\n          <span class={cn(styles.slide)}>{content}</span>\n        </div>;\n      }\n      return <>{content}</>;\n    };\n\n    const timer = ref<number>();\n    const resizeObserver = new ResizeObserver(() => {\n      wrapperWidth.value = wrapperRef.value?.parentElement?.clientWidth || 0;\n      shadowWidth.value = shadowRef.value?.clientWidth || 0;\n    });\n    onMounted(() => {\n      resizeObserver.observe(shadowRef.value!);\n      timer.value = window.setTimeout(() => {\n        isPlaying.value = true;\n      }, delay.value);\n    });\n    onUnmounted(() => {\n      resizeObserver.disconnect();\n      timer.value && window.clearTimeout(timer.value);\n      timer.value = undefined;\n    });\n\n    return () => (<div class={cn(styles.marquee)} ref={wrapperRef}>\n      <div class={cn(styles.content)}>\n        {renderContent()}\n      </div>\n      <div class={cn(styles.shadow)} ref={shadowRef}>\n        {slots.default?.()}\n      </div>\n    </div>);\n  }\n});\n\n","/**\n * @file 顶部导航栏\n * @author Yangholmes 2025-03-29\n */\n\nimport { computed, defineComponent, PropType } from 'vue';\nimport { JSX } from 'vue/jsx-runtime';\nimport useTRouter from '@/composite/useTRouter';\n\nimport cn from 'classnames';\n\nimport Marquee from '@/components/marquee/Marquee';\nimport SvgIcon from '@/components/svgIcon/SvgIcon';\n\nimport { NButton } from 'naive-ui';\n\nimport styles from './basicTopBar.module.less';\n\nexport default defineComponent({\n  name: 'BasicTopBar',\n  props: {\n    rightSlots: {\n      type: Array as PropType<JSX.Element[]>,\n    },\n    leftSlots: {\n      type: Array as PropType<JSX.Element[]>,\n    },\n  },\n  setup(props, { slots }) {\n    const { router } = useTRouter();\n\n    function onBack() {\n      router.back();\n    }\n\n    function onHome() {\n      router.goHome();\n    }\n\n    const backButton = () => {\n      return ([\n        <NButton onClick={onBack}>\n          <SvgIcon name=\"back\" />\n        </NButton>,\n        <NButton onClick={onHome}>\n          <SvgIcon name=\"home\" />\n        </NButton>,\n      ]);\n    };\n\n    const leftSlots = computed(() => {\n      if (props.leftSlots) {\n        return props.leftSlots;\n      }\n      return backButton();\n    });\n\n    return () => (\n      <div class={cn(styles['basic-top-bar'])}>\n        {/* 左侧按钮组 */}\n        <div class={cn(styles['left-slots'])}>\n          {leftSlots.value}\n        </div>\n        {/* 标题区 */}\n        <div class={cn(styles.title)}>\n          <Marquee>{slots.default?.()}</Marquee>\n        </div>\n        {/* 右侧按钮组 */}\n        <div class={cn(styles['right-slots'])}>\n          {props.rightSlots}\n        </div>\n      </div>\n    );\n  }\n});\n"],"names":["defineComponent","name","props","topBar","type","Object","toolBar","Array","loading","Boolean","default","setup","slots","_createVNode","cn","styles","main","map","e","speed","Number","delay","toRefs","isPlaying","ref","wrapperRef","shadowRef","wrapperWidth","shadowWidth","renderContent","value","_Fragment","content","duration","slot","play","slide","timer","resizeObserver","ResizeObserver","parentElement","clientWidth","onMounted","observe","window","setTimeout","onUnmounted","disconnect","clearTimeout","undefined","marquee","shadow","rightSlots","leftSlots","router","useTRouter","onBack","back","onHome","goHome","backButton","NButton","SvgIcon","computed","title","Marquee"],"mappings":"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"}